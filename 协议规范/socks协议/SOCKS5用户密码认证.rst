*****************
Socks5用户密码认证
*****************

简介
====
SOCKS第5版的协议规范规定了在初始 ``socks`` 连接设置中使用任意身份验证协议的通用框架。 本文档描述了其中一种协议，因为它符合 ``SOCKS`` 第5版认证“子协商”。


.. note:: 除非另有说明，否则包格式图中出现的十进制数表示相应字段的长度，以八位字节为单位。 在给定八位字节必须采用特定值的情况下，语法X'hh'用于表示该字段中单个八位字节的值。 当使用“变量”一词时，它表示相应的字段具有由相关（一个或两个八位字节）长度字段或数据类型字段定义的可变长度。


初始协商
========
一旦SOCKS V5服务器启动，并且客户端选择了用户名/密码验证协议，就会开始用户名/密码子协商。 这从客户端生成用户名/密码请求开始：

.. code-block:: shell

	+----+------+----------+------+----------+
	|VER | ULEN |  UNAME   | PLEN |  PASSWD  |
	+----+------+----------+------+----------+
	| 1  |  1   | 1 to 255 |  1   | 1 to 255 |
	+----+------+----------+------+----------+

``VER`` 字段包含子协商的当前版本，即 ``X'01'`` 。  ``ULEN`` 字段包含随后的 ``UNAME`` 字段的长度。 ``UNAME`` 字段包含源操作系统已知的用户名。  ``PLEN`` 字段包含随后的 ``PASSWD`` 字段的长度。  ``PASSWD`` 字段包含与给定 ``UNAME`` 的密码关联。

服务器验证提供的 ``UNAME`` 和 ``PASSWD`` ，并发送以下回复：

.. code-block:: shell

	+----+--------+
	|VER | STATUS |
	+----+--------+
	| 1  |   1    |
	+----+--------+

``X'00'`` 的 ``STATUS`` 字段表示成功。 如果服务器返回“失败”（ ``STATUS`` 值不是 ``X'00'`` ）状态，它必须关闭连接。

安全考虑
=======

本文档描述了提供给 ``SOCKS`` 协议的身份验证的子协商服务。由于请求带有密码以明文形式出现，建议不要使用此子协商运行在可“嗅探”的环境。

https://www.ietf.org/rfc/rfc1929.txt