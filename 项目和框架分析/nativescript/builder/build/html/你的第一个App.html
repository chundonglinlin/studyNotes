

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. 你的第一个App &mdash; nativescript 1.0 文档</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="索引"
              href="genindex.html"/>
        <link rel="search" title="搜索" href="search.html"/>
    <link rel="top" title="nativescript 1.0 文档" href="index.html"/>
        <link rel="prev" title="2. 为什么使用NativeScript" href="为什么使用NativeScript.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> nativescript
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="前言.html">1. 前言</a></li>
<li class="toctree-l1"><a class="reference internal" href="为什么使用NativeScript.html">2. 为什么使用NativeScript</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. 你的第一个App</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#hello-world">3.1. Hello World</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nativescript-cli">3.1.1. NativeScript CLI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cli">3.1.2. 使用CLI搭建您的项目</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">3.1.3. 初始化平台和开发工具</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">3.1.4. 增加和移除平台</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">3.1.5. 在模拟器中运行你的App</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nativescript-apps">3.2. NativeScript apps</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nativescript">3.2.1. NativeScript 运行时</a></li>
<li class="toctree-l3"><a class="reference internal" href="#javascript">3.2.2. JavaScript虚拟机</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nativescriptjavascript">3.2.3. 在NativeScript中的JavaScript虚拟机</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id4">3.3. 建立你的开发工作流</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nativescript-app">3.3.1. 构建NativeScript app</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">3.3.2. 实时同步</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id6">3.4. 快速参考</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id7">3.5. 总结</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">nativescript</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>3. 你的第一个App</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/你的第一个App.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="app">
<h1>3. 你的第一个App<a class="headerlink" href="#app" title="永久链接至标题">¶</a></h1>
<p>本章涵盖</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">NativeScript</span></code> 运行时；</li>
<li><code class="docutils literal"><span class="pre">NativeScript</span></code> 开发工作流程；</li>
<li><code class="docutils literal"><span class="pre">NativeScript</span> <span class="pre">CLI</span></code> ；</li>
<li>您的第一个 <code class="docutils literal"><span class="pre">NativeScript</span></code> 应用程序；</li>
</ul>
<p>在第1章中，为您介绍了 <code class="docutils literal"><span class="pre">NativeScript</span></code> 。您了解到 <code class="docutils literal"><span class="pre">NativeScript</span></code> 为您提供了一种编写应用代码的方法，并将您的应用部署到多个平台（ <code class="docutils literal"><span class="pre">iOS</span></code> 和 <code class="docutils literal"><span class="pre">Android</span></code> ）。您还了解到，您可以使用现有的 <code class="docutils literal"><span class="pre">XML</span></code> ， <code class="docutils literal"><span class="pre">JavaScript</span></code> 和 <code class="docutils literal"><span class="pre">CSS</span></code> 开发知识创建 <code class="docutils literal"><span class="pre">NativeScript</span></code> 应用程序。现在您可以进一步观察 <code class="docutils literal"><span class="pre">NativeScript</span></code> 并编写您的第一个应用程序！</p>
<div class="admonition tip">
<p class="first admonition-title">小技巧</p>
<p class="last">在学习开发跨平台移动应用程序时，您应该在初始开发期间选择一台设备进行测试。这一点非常重要，因为您不希望一次性在多个平台上测试，从而失去对应用程序创建的关注。在完成开发应用程序的每个功能时，停止并在各种设备上测试您的应用程序。一旦您满意，该功能可在所有平台上运行，然后返回单个设备进行进一步开发。</p>
</div>
<p>在整本书中，我们选择在 <code class="docutils literal"><span class="pre">iPhone</span> <span class="pre">6</span></code> 上开发和测试我们的应用程序，所以您可以看到很多 <code class="docutils literal"><span class="pre">iPhone</span></code> 屏幕截图。 有意义的是，我们将包括 <code class="docutils literal"><span class="pre">Android</span></code> 上运行的相同应用程序代码的并排比较。仅仅因为我们开始使用 iPhone 并不意味着您必须使用它：使用您熟悉的平台，因为它会使测试更容易。</p>
<p>在开始开发您的第一个应用程序之前，让我们仔细看看 <code class="docutils literal"><span class="pre">NativeScript</span></code> 应用程序的剖析。</p>
<div class="section" id="hello-world">
<h2>3.1. Hello World<a class="headerlink" href="#hello-world" title="永久链接至标题">¶</a></h2>
<p>这可能有点陈词滥调，但 <code class="docutils literal"><span class="pre">hello</span> <span class="pre">world</span></code> 应用程序仍然是开始使用任何新语言的好方法（为什么 <code class="docutils literal"><span class="pre">NativeScript</span></code> 应该有所不同？）在 <code class="docutils literal"><span class="pre">NativeScript</span></code> 中创建 <code class="docutils literal"><span class="pre">hello</span> <span class="pre">world</span></code> 应用程序后，您将获得必要的知识以便继续创建更强大的应用程序，例如您将在第4章中构建的商店前端应用程序。让我们开始使用 <code class="docutils literal"><span class="pre">NativeScript</span></code> 命令行界面( <code class="docutils literal"><span class="pre">CLI</span></code> )工具创建 <code class="docutils literal"><span class="pre">hello</span> <span class="pre">world</span></code> 应用程序。</p>
<div class="section" id="nativescript-cli">
<h3>3.1.1. NativeScript CLI<a class="headerlink" href="#nativescript-cli" title="永久链接至标题">¶</a></h3>
<p>正如您在第1章中学到的， <code class="docutils literal"><span class="pre">NativeScript</span> <span class="pre">CLI</span></code> 是您将用来构建和运行 <code class="docutils literal"><span class="pre">NativeScript</span></code> 应用程序的一系列工具。 <code class="docutils literal"><span class="pre">CLI</span></code> 只不过是在为 <code class="docutils literal"><span class="pre">NativeScript</span></code> 配置开发环境时安装到 <code class="docutils literal"><span class="pre">Node.js</span></code> 中的 <code class="docutils literal"><span class="pre">npm</span></code> 软件包。</p>
<div class="admonition tip">
<p class="first admonition-title">小技巧</p>
<p class="last"><code class="docutils literal"><span class="pre">Node.js</span></code> 是一个 <code class="docutils literal"><span class="pre">JavaScript</span></code> 虚拟机（VM）接口，被编写为与桌面和服务器操作系统（如 <code class="docutils literal"><span class="pre">Linux</span></code> 和 <code class="docutils literal"><span class="pre">Microsoft</span> <span class="pre">Windows</span></code> ）进行交互。它于2009年创建，允许开发人员使用 <code class="docutils literal"><span class="pre">JavaScript</span></code> 并编写可跨平台运行的软件。像 <code class="docutils literal"><span class="pre">Web</span></code> 浏览器和 <code class="docutils literal"><span class="pre">NativeScript</span></code> 一样， <code class="docutils literal"><span class="pre">Node.js</span></code> 提供接口代码来通知 <code class="docutils literal"><span class="pre">JavaScript</span> <span class="pre">VM</span></code> 如何与不同的操作系统进行交互。您可以通过 <a class="reference external" href="https://nodejs.org">https://nodejs.org</a> 了解关于 <code class="docutils literal"><span class="pre">Node.js</span></code> 的更多信息。</p>
</div>
<p><code class="docutils literal"><span class="pre">NativeScript</span> <span class="pre">CLI</span></code> 将在整个开发生命周期中使用，如图2.1所示。</p>
<img alt="_images/2-1.png" src="_images/2-1.png" />
<p><code class="docutils literal"><span class="pre">NativeScript</span></code> 应用程序是用 <code class="docutils literal"><span class="pre">XML</span></code> ， <code class="docutils literal"><span class="pre">JavaScript</span></code> 和 <code class="docutils literal"><span class="pre">CSS</span></code> 编写的代码文件的集合。总体而言，用户界面(UI)，业务逻辑和样式形成应用程序的页面，如 <code class="docutils literal"><span class="pre">HTML</span></code> 应用程序页面。一旦为应用程序编写了页面，就可以使用 <code class="docutils literal"><span class="pre">NativeScript</span> <span class="pre">CLI</span></code> 将代码转换为本地应用程序。然后使用 <code class="docutils literal"><span class="pre">CLI</span></code> 在模拟器，模拟器或物理设备上安装并运行应用程序。</p>
<p>您可以通过从您最喜爱的终端或命令行窗口中调用 <code class="docutils literal"><span class="pre">tns</span> <span class="pre">&lt;sub-command&gt;</span></code> 命令来使用 <code class="docutils literal"><span class="pre">NativeScript</span> <span class="pre">CLI</span></code> 。</p>
<div class="admonition tip">
<p class="first admonition-title">小技巧</p>
<p class="last"><code class="docutils literal"><span class="pre">TNS</span></code> 代表 <code class="docutils literal"><span class="pre">Telerik</span> <span class="pre">NativeScript</span></code> 。 <code class="docutils literal"><span class="pre">Telerik</span></code> 是 <code class="docutils literal"><span class="pre">NativeScript</span></code> 项目背后的公司。 选择缩写 <code class="docutils literal"><span class="pre">TNS</span></code> 以避免与 <code class="docutils literal"><span class="pre">NS</span></code> 混淆。缩写 <code class="docutils literal"><span class="pre">NS</span></code> 用于整个 <code class="docutils literal"><span class="pre">Mac</span> <span class="pre">OS</span> <span class="pre">X</span></code> 和 <code class="docutils literal"><span class="pre">iOS</span> <span class="pre">API</span></code> ，代表 <code class="docutils literal"><span class="pre">NextStep</span></code> 。</p>
</div>
<p><code class="docutils literal"><span class="pre">CLI</span></code> 中存在各种子命令，所有这些命令都旨在使您可以在 <code class="docutils literal"><span class="pre">Android</span></code> 和 <code class="docutils literal"><span class="pre">iOS</span></code> 平台上轻松构建，部署和运行您的应用。我们不打算深入了解 <code class="docutils literal"><span class="pre">CLI</span></code> 的内部工作原理，但我们认为重要的是了解 <code class="docutils literal"><span class="pre">CLI</span></code> 对 <code class="docutils literal"><span class="pre">NativeScript</span></code> 开发的整体性。没有 <code class="docutils literal"><span class="pre">CLI</span></code> ，你所拥有的只是 <code class="docutils literal"><span class="pre">XML</span></code> ， <code class="docutils literal"><span class="pre">JavaScript</span></code> 和 <code class="docutils literal"><span class="pre">CSS</span></code> 文件，无处可去。在本书中，您会看到我们使用 <code class="docutils literal"><span class="pre">CLI</span></code> 进行以下操作：</p>
<ul class="simple">
<li>创建你的应用；</li>
<li>将移动平台添加到您的应用程序( <code class="docutils literal"><span class="pre">Android</span></code> 或 <code class="docutils literal"><span class="pre">iOS</span></code> )；</li>
<li>将代码构建到本地应用程序(适用于 <code class="docutils literal"><span class="pre">Android</span></code> 的 <code class="docutils literal"><span class="pre">.apk</span></code> 文件和适用于 <code class="docutils literal"><span class="pre">iOS</span></code> 的 <code class="docutils literal"><span class="pre">.ipa</span></code> 应用程序文件)；</li>
<li>将您的应用程序部署到移动设备；</li>
<li>使用模拟器测试您的代码；</li>
<li>在连接到计算机的设备上运行应用程序；</li>
</ul>
</div>
<div class="section" id="cli">
<h3>3.1.2. 使用CLI搭建您的项目<a class="headerlink" href="#cli" title="永久链接至标题">¶</a></h3>
<p><code class="docutils literal"><span class="pre">CLI</span></code> 的核心功能是通过自动执行繁琐的任务来加速您的开发过程。其中一项任务是创建一个新的 <code class="docutils literal"><span class="pre">NativeScript</span></code> 应用程序。 <code class="docutils literal"><span class="pre">NativeScript</span></code> 应用程序必须具备非常特定的文件和文件夹结构，并且 <code class="docutils literal"><span class="pre">CLI</span></code> 通过称为脚手架的处理使此冗长的任务变得轻松。</p>
<div class="admonition tip">
<p class="first admonition-title">小技巧</p>
<p class="last">脚手架是使用预定义模板生成文件，文件夹和代码的处理。这个处理被称为脚手架，因为它类似于建筑脚手架，它是建筑物外部的临时结构，在工人建造建筑物时使用。就像构建脚手架一样，代码脚手架创建了一个应用程序的基础结构，然后构建和修改它以创建一个可用的应用程序。脚手架工具在软件开发中变得越来越流行，因为它们有助于减少开发人员花时间编写通用，可重复的代码结构的时间。</p>
</div>
<p>您可能熟悉类似的脚手架工具，例如内置于 <code class="docutils literal"><span class="pre">Visual</span> <span class="pre">Studio</span></code> 中的项目模板或另一个名为 <code class="docutils literal"><span class="pre">Yeoman</span></code> 的 <code class="docutils literal"><span class="pre">Node.js</span></code> 工具。就像这些工具一样， <code class="docutils literal"><span class="pre">NativeScript</span> <span class="pre">CLI</span></code> 的脚手架流程以 <code class="docutils literal"><span class="pre">npm</span></code> 包的形式打包一系列在线存储的模板。</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last"><code class="docutils literal"><span class="pre">NativeScript</span></code> 模板只是 <code class="docutils literal"><span class="pre">npm</span></code> 包。要找到它们，请转到 <code class="docutils literal"><span class="pre">npm</span></code> 网站 <code class="docutils literal"><span class="pre">https://www.npmjs.com</span></code> ，然后搜索以 <code class="docutils literal"><span class="pre">tns-template</span></code> 开头的软件包。</p>
</div>
<p>您将使用 <code class="docutils literal"><span class="pre">hello</span> <span class="pre">world</span></code> 模板创建您的第一个 <code class="docutils literal"><span class="pre">NativeScript</span></code> 应用程序。 <code class="docutils literal"><span class="pre">hello</span> <span class="pre">world</span></code> 模板是 <code class="docutils literal"><span class="pre">NativeScript</span></code> 用于创建新应用程序的默认模板。要开始使用此模板，请加载您最喜欢的终端。如果您使用 <code class="docutils literal"><span class="pre">Windows</span></code> ，则可以使用命令提示符或 <code class="docutils literal"><span class="pre">PowerShell</span></code> ；在 <code class="docutils literal"><span class="pre">Windows</span></code> 上，我通常坚持使用命令提示符。在 <code class="docutils literal"><span class="pre">Mac</span> <span class="pre">OS</span></code> 或 <code class="docutils literal"><span class="pre">Linux</span></code> 上，您可以加载您最喜爱的终端程序。在 <code class="docutils literal"><span class="pre">Mac</span> <span class="pre">OS</span></code> 上处理 <code class="docutils literal"><span class="pre">NativeScript</span></code> 应用程序时，我使用默认终端。</p>
<p>在安装 <code class="docutils literal"><span class="pre">NativeScript</span></code> 期间， <code class="docutils literal"><span class="pre">tns</span></code> 命令被添加到您的路径或 <code class="docutils literal"><span class="pre">shell</span></code> 配置文件中（取决于您使用的操作系统）。让我们通过运行 <code class="docutils literal"><span class="pre">tns</span> <span class="pre">create</span> <span class="pre">HelloWorld</span></code> 来创建您的第一个应用程序。</p>
<p>当您运行 <code class="docutils literal"><span class="pre">tns</span> <span class="pre">create</span> <span class="pre">{app-name}</span></code> 命令时， <code class="docutils literal"><span class="pre">NativeScript</span> <span class="pre">CLI</span></code> 会使用您指定的应用程序名称创建一个新文件夹（在当前文件夹中）。创建该文件夹后，它将构建和运行新的 <code class="docutils literal"><span class="pre">NativeScript</span></code> 应用程序所需的所有代码脚手架！图2.2显示了在运行 <code class="docutils literal"><span class="pre">create</span></code> 命令之后为您创建的结果目录结构。</p>
<img alt="_images/2-2.png" src="_images/2-2.png" />
<p>在本书后面的部分，我们将详细讨论 <code class="docutils literal"><span class="pre">NativeScript</span></code> 应用程序的文件夹结构。现在，请注意，您将为您的应用程序编写的所有代码都将位于应用程序( <code class="docutils literal"><span class="pre">app</span></code> )文件夹中。</p>
<div class="admonition tip">
<p class="first admonition-title">小技巧</p>
<p class="last">运行 <code class="docutils literal"><span class="pre">tns</span> <span class="pre">create</span></code> 命令你只用一个参数： <code class="docutils literal"><span class="pre">HelloWorld</span></code> 。 或者，您可以通过使用 <code class="docutils literal"><span class="pre">--template</span> <span class="pre">{template</span> <span class="pre">name}</span></code> 参数指定您希望在搭建项目时使用的模板。不指定模板名称， <code class="docutils literal"><span class="pre">create</span></code> 命令将使用默认的 <code class="docutils literal"><span class="pre">hello-world</span></code> 模板。你可以通过运行 <code class="docutils literal"><span class="pre">tns</span> <span class="pre">create</span> <span class="pre">HelloWorld</span> <span class="pre">--template</span> <span class="pre">tns-template-hello-world</span></code> 来获得相同的结果。在第3章中，您将学习更多关于模板以及 <code class="docutils literal"><span class="pre">NativeScript</span> <span class="pre">CLI</span></code> 如何搭建应用程序的知识。</p>
</div>
</div>
<div class="section" id="id1">
<h3>3.1.3. 初始化平台和开发工具<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h3>
<p>在运行 <code class="docutils literal"><span class="pre">hello</span> <span class="pre">world</span></code> 应用程序之前，您需要决定是否要初始定位平台 <code class="docutils literal"><span class="pre">iOS</span></code> 或 <code class="docutils literal"><span class="pre">Android</span></code> 。 首先选择一个平台作为目标非常重要，这样您就可以专注于在单个应用程序和单个仿真器或模拟器上测试功能。 一旦你确信你的应用在你的第一个平台上运行良好，你可以在第二个平台上进行测试。</p>
<p>决定你的开发平台可能看起来像一个艰难的决定，但它可能比你想象的更容易，因为这个决定的一部分可能已经为你做了。表2.1显示了您将能够定位的潜在平台（取决于您的操作系统）。不幸的是，除非你有一台 <code class="docutils literal"><span class="pre">Mac</span></code> ，否则你不能定位 <code class="docutils literal"><span class="pre">iOS</span></code> ，所以如果你使用的是 <code class="docutils literal"><span class="pre">Windows</span></code> 或者 <code class="docutils literal"><span class="pre">Linux</span></code> ， <code class="docutils literal"><span class="pre">Android</span></code> 就是你的开始平台。如果你有一台 <code class="docutils literal"><span class="pre">Mac</span></code> ，那么选择是你的。但是，如果您仍然无法决定，我们建议您从您熟悉的平台开始。如果您有 <code class="docutils literal"><span class="pre">iPhone</span></code> ，则定位 <code class="docutils literal"><span class="pre">iOS</span></code> ，否则定位 <code class="docutils literal"><span class="pre">Android</span></code> 。</p>
<p>表2-1 每一个开发操作系统可定位的平台</p>
<table border="1" class="docutils">
<colgroup>
<col width="58%" />
<col width="42%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">开发机器操作系统</th>
<th class="head">可定位平台</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Windows</td>
<td>Android</td>
</tr>
<tr class="row-odd"><td>Mac OS</td>
<td>iOS,Android</td>
</tr>
<tr class="row-even"><td>Linux</td>
<td>Android</td>
</tr>
</tbody>
</table>
<p>如果您打算将 <code class="docutils literal"><span class="pre">Windows</span></code> 机器用作您的主要开发机器并且希望稍后为 <code class="docutils literal"><span class="pre">iOS</span></code> 构建，请不要担心。在 <code class="docutils literal"><span class="pre">NativeScript</span></code> 中针对不同平台定位和构建您的应用程序非常简单。使用 <code class="docutils literal"><span class="pre">NativeScript</span></code> 时，从一开始就针对一个平台是首选工作流程。 当需要将应用程序安装到另一个平台上时，您总是可以从朋友那里借用 <code class="docutils literal"><span class="pre">Mac</span></code> (或者更好的方式是购买旧的翻新 <code class="docutils literal"><span class="pre">Mac</span> <span class="pre">mini</span></code> )！</p>
<p>除了选择目标应用平台之外，您还需要决定要使用的开发编辑器。无论您选择基本的文本编辑器， <code class="docutils literal"><span class="pre">Visual</span> <span class="pre">Studio</span></code> 还是其他集成开发环境 ( <code class="docutils literal"><span class="pre">IDE</span></code> )，都不是错误的答案。选择你最喜欢的开发工具。我们最喜欢的 <code class="docutils literal"><span class="pre">Windows</span></code> ， <code class="docutils literal"><span class="pre">Mac</span> <span class="pre">OS</span></code> 和 <code class="docutils literal"><span class="pre">Linux</span></code> 上的编辑器之一就是 <code class="docutils literal"><span class="pre">Visual</span> <span class="pre">Studio</span> <span class="pre">Code</span></code> 。</p>
<div class="admonition tip">
<p class="first admonition-title">小技巧</p>
<p class="last"><code class="docutils literal"><span class="pre">Visual</span> <span class="pre">Studio</span> <span class="pre">Code</span></code> 是完全免费的，可以从 <a class="reference external" href="https://code.visualstudio.com">https://code.visualstudio.com</a> 下载。 <code class="docutils literal"><span class="pre">Visual</span> <span class="pre">Studio</span> <span class="pre">Code</span></code> 在 <code class="docutils literal"><span class="pre">Mac</span></code> ， <code class="docutils literal"><span class="pre">PC</span></code> 和 <code class="docutils literal"><span class="pre">Linux</span></code> 上都能很好地工作。这是我们用来编写 <code class="docutils literal"><span class="pre">NativeScript</span></code> 应用程序的内容，在学习 <code class="docutils literal"><span class="pre">NativeScript</span></code> 时强烈建议您使用。 <code class="docutils literal"><span class="pre">Visual</span> <span class="pre">Studio</span></code> 代码有一个正式的 <code class="docutils literal"><span class="pre">NativeScript</span></code> 扩展，它可以在创建应用时提供更好的智能感知，调试和模拟器支持，从而为您提供帮助。该扩展可从 <a class="reference external" href="https://www.nativescript.org/nativescript-for-visual-studio-code">https://www.nativescript.org/nativescript-for-visual-studio-code</a> 获得。</p>
</div>
</div>
<div class="section" id="id2">
<h3>3.1.4. 增加和移除平台<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h3>
<p>现在您已经开始创建您的第一个官方 <code class="docutils literal"><span class="pre">NativeScript</span></code> 应用程序，您几乎可以开始测试了！在开始测试您的应用程序之前，您需要确保您的 <code class="docutils literal"><span class="pre">Hello</span> <span class="pre">World</span></code> 应用程序运行在您选择的平台（或两者兼而有之）。添加和删除平台很容易。如果您需要添加平台，请运行以下命令。 图2.3显示了生成的平台文件夹：</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>tns platform add android
tns platform add ios
</pre></div>
</div>
<img alt="_images/2-3.png" src="_images/2-3.png" />
<p>当您运行 <code class="docutils literal"><span class="pre">tns</span> <span class="pre">platform</span> <span class="pre">add</span></code> 命令时， <code class="docutils literal"><span class="pre">NativeScript</span> <span class="pre">CLI</span></code> 将创建本地 <code class="docutils literal"><span class="pre">Android</span></code> 和 <code class="docutils literal"><span class="pre">iOS</span></code> 项目，并为每个项目添加重要的 <code class="docutils literal"><span class="pre">NativeScript</span></code> 运行时库。这些库（以及您编写的代码）最终将一起捆绑到本地应用程序中，并存储在平台文件夹的子文件夹中。</p>
<p>由于新功能不断添加到 <code class="docutils literal"><span class="pre">NativeScript</span></code> 中，因此 <code class="docutils literal"><span class="pre">NativeScript</span></code> 运行时会定期更新。 <code class="docutils literal"><span class="pre">NativeScript</span></code> 运行时包含在先前安装的 <code class="docutils literal"><span class="pre">NativeScript</span> <span class="pre">npm</span></code> 软件包中。我们建议您在学习 <code class="docutils literal"><span class="pre">NativeScript</span></code> 和本书时保持 <code class="docutils literal"><span class="pre">NativeScript</span></code> 版本的最新状态。当新版本可用时，您不必更新 <code class="docutils literal"><span class="pre">NativeScript</span></code> 运行时，但您可能需要。您可以使用 <code class="docutils literal"><span class="pre">--version</span></code> 参数运行 <code class="docutils literal"><span class="pre">tns</span></code> 命令来检查您安装的 <code class="docutils literal"><span class="pre">NativeScript</span></code> 版本。</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>tns --version
</pre></div>
</div>
<p>您可以通过 <a class="reference external" href="https://www.npmjs.com/package/nativescript">https://www.npmjs.com/package/nativescript</a> 在 <code class="docutils literal"><span class="pre">npm</span></code> 上检查 <code class="docutils literal"><span class="pre">NativeScript</span></code> 的最新版本，或者使用 <code class="docutils literal"><span class="pre">npm</span></code> 命令 <code class="docutils literal"><span class="pre">npm</span> <span class="pre">view</span> <span class="pre">nativescript</span></code> 版本检查 <code class="docutils literal"><span class="pre">NativeScript</span></code> 的最新版本。由于 <code class="docutils literal"><span class="pre">NativeScript</span></code> 只是一个 <code class="docutils literal"><span class="pre">npm</span></code> 包，您可以使用 <code class="docutils literal"><span class="pre">npm</span></code> 命令 <code class="docutils literal"><span class="pre">npm</span> <span class="pre">install</span> <span class="pre">-g</span> <span class="pre">nativescript</span></code> 来更新它。</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">请记住， <code class="docutils literal"><span class="pre">ativeScript</span></code> 是一个开源项目。 您可以通过 <a class="reference external" href="https://github.com/NativeScript/NativeScript/releases">https://github.com/NativeScript/NativeScript/releases</a> 阅读 <code class="docutils literal"><span class="pre">Github</span></code> 上 <code class="docutils literal"><span class="pre">NativeScript</span></code> 的版本历史记录和最新更改。 如果你非常喜欢，你可以通过提交拉请求来为项目做出贡献。</p>
</div>
<p>更新 <code class="docutils literal"><span class="pre">NativeScript</span></code> 运行时后，您需要更新应用程序中的运行时文件（但首先您需要删除旧文件）。以下命令显示如何使用 <code class="docutils literal"><span class="pre">tns</span> <span class="pre">platform</span> <span class="pre">remove</span></code> 命令从项目中删除 <code class="docutils literal"><span class="pre">Android</span></code> 和 <code class="docutils literal"><span class="pre">iOS</span></code> 平台。</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>tns platform remove android
tns platform remove ios
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">NativeScript</span> <span class="pre">CLI</span></code> 会告诉您是否成功移除平台。如果该平台不作为项目中的目标存在，则 <code class="docutils literal"><span class="pre">NativeScript</span> <span class="pre">CLI</span></code> 将无法将其删除。图2.4显示了运行这两个命令后生成的空平台文件夹。</p>
<p>要使用 <code class="docutils literal"><span class="pre">Android</span></code> 或 <code class="docutils literal"><span class="pre">iOS</span></code> 平台的 <code class="docutils literal"><span class="pre">NativeScript</span></code> 运行时的最新版本更新您的应用程序，请运行以下命令：</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>tns platform add android
tns platform add ios
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">如果您在 <code class="docutils literal"><span class="pre">Windows</span></code> 或 <code class="docutils literal"><span class="pre">Linux</span></code> 计算机上开发时尝试将 <code class="docutils literal"><span class="pre">iOS</span></code> 添加为目标平台，则 <code class="docutils literal"><span class="pre">NativeScript</span> <span class="pre">CLI</span></code> 将检测到此消息并引发错误消息。（请记住， <code class="docutils literal"><span class="pre">Mac</span> <span class="pre">OS</span></code> 是将 <code class="docutils literal"><span class="pre">iOS</span></code> 作为平台定位的先决条件）</p>
</div>
<p>正如您现在可能已经想出的那样， <code class="docutils literal"><span class="pre">NativeScript</span></code> 在 <code class="docutils literal"><span class="pre">platforms</span></code> 文件夹下面组织特定平台的文件。当平台添加命令运行时，最新的运行时文件将被复制到平台文件夹下相应的文件夹中。例如，如果您浏览平台下的 android 子文件夹，您会注意到很多文件。被复制的文件包含以下内容：</p>
<ul class="simple">
<li>特定平台的文件；</li>
<li>平台配置文件；</li>
</ul>
<p>您将在后面的章节中详细了解特定于平台的文件。</p>
</div>
<div class="section" id="id3">
<h3>3.1.5. 在模拟器中运行你的App<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h3>
<p>现在您已经学会了如何定位平台，现在是时候在模拟器中运行您的应用并对其进行测试！使用以下命令启动您的应用程序，使用 <code class="docutils literal"><span class="pre">Android</span></code> 模拟器或 <code class="docutils literal"><span class="pre">iOS</span></code> 模拟器：</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>tns run ios --emulator
tns run android --emulator
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">确保你在 <code class="docutils literal"><span class="pre">HelloWorld</span></code> 项目文件夹的根目录下运行 <code class="docutils literal"><span class="pre">run</span></code> 命令，否则你会得到一个错误。</p>
</div>
<p>当您使用 <code class="docutils literal"><span class="pre">run</span></code> 命令时， <code class="docutils literal"><span class="pre">NativeScript</span> <span class="pre">CLI</span></code> 将为您自动构建原生 <code class="docutils literal"><span class="pre">Android</span></code> 或 <code class="docutils literal"><span class="pre">iOS</span></code> 应用程序。图2.5显示了特定于平台的文件夹中的文件如何与您的应用程序的代码结合使用，以创建将在 <code class="docutils literal"><span class="pre">Android</span></code> 或 <code class="docutils literal"><span class="pre">iOS</span></code> 上运行的本地应用程序。</p>
<img alt="_images/2-5.png" src="_images/2-5.png" />
<p>如果您使用 <code class="docutils literal"><span class="pre">iOS</span></code> 参数运行应用程序，则 <code class="docutils literal"><span class="pre">iOS</span></code> 文件夹中的 <code class="docutils literal"><span class="pre">iOS</span></code> 平台文件用于创建本地 <code class="docutils literal"><span class="pre">iOS</span></code> 应用程序。同样，如果您为 <code class="docutils literal"><span class="pre">Android</span></code> 运行应用程序，则会使用 <code class="docutils literal"><span class="pre">Android</span></code> 的 <code class="docutils literal"><span class="pre">NativeScript</span></code> 运行时（在 <code class="docutils literal"><span class="pre">android</span></code> 文件夹中）。</p>
</div>
</div>
<div class="section" id="nativescript-apps">
<h2>3.2. NativeScript apps<a class="headerlink" href="#nativescript-apps" title="永久链接至标题">¶</a></h2>
<p>使用 <code class="docutils literal"><span class="pre">JavaScript</span></code> ， <code class="docutils literal"><span class="pre">XML</span></code> 和 <code class="docutils literal"><span class="pre">CSS</span></code> 编写原生移动应用程序并不是开发人员经常讨论的内容。相反，您听说在 <code class="docutils literal"><span class="pre">Objective</span> <span class="pre">C</span></code> ， <code class="docutils literal"><span class="pre">Swift</span></code> 或 <code class="docutils literal"><span class="pre">Java</span></code> 中编写移动应用程序。 <code class="docutils literal"><span class="pre">NativeScript</span></code> 使用 <code class="docutils literal"><span class="pre">JavaScript</span></code> 编写具有多个组件的应用程序成为可能，这些组件包括：您的应用程序代码， <code class="docutils literal"><span class="pre">NativeScript</span></code> 运行时和核心模块， <code class="docutils literal"><span class="pre">JavaScript</span></code> 虚拟机（VM）以及 <code class="docutils literal"><span class="pre">NativeScript</span></code> 命令行界面（CLI）。图2.7显示了 <code class="docutils literal"><span class="pre">NativeScript</span></code> 应用程序的所有部分如何组合在一起。</p>
<img alt="_images/2-6.png" src="_images/2-6.png" />
<p><code class="docutils literal"><span class="pre">NativeScript</span></code> 应用程序的核心来自您编写的代码（使用 <code class="docutils literal"><span class="pre">XML</span></code> ， <code class="docutils literal"><span class="pre">CSS</span></code> 和 <code class="docutils literal"><span class="pre">JavaScript</span></code> ）。您编写的代码还将利用 <code class="docutils literal"><span class="pre">NativeScript</span></code> 核心模块和 <code class="docutils literal"><span class="pre">NativeScript</span></code> 运行时。 <code class="docutils literal"><span class="pre">NativeScript</span></code> 运行时和核心模块是创建 <code class="docutils literal"><span class="pre">NativeScript</span></code> 应用程序时将使用的库。你的应用程序代码和这些库运行在一个 <code class="docutils literal"><span class="pre">JavaScript</span></code> 虚拟机中（我们将稍微详细介绍一下）。通过 <code class="docutils literal"><span class="pre">NativeScript</span> <span class="pre">CLI</span></code> 将这四个组件一起捆绑在一起，为 <code class="docutils literal"><span class="pre">Android</span></code> 和 <code class="docutils literal"><span class="pre">iOS</span></code> 创建原生应用程序。</p>
<div class="section" id="nativescript">
<h3>3.2.1. NativeScript 运行时<a class="headerlink" href="#nativescript" title="永久链接至标题">¶</a></h3>
<p>当移动应用程序使用本地代码编写时，它们被编译成特殊的应用程序文件并分发到移动设备。图2.8显示了如何编写本地代码并将其部署到设备。</p>
<p>对于 <code class="docutils literal"><span class="pre">iOS</span></code> ，您在 <code class="docutils literal"><span class="pre">Objective</span> <span class="pre">C</span></code> 中编写代码，该代码已编译并构建到 <code class="docutils literal"><span class="pre">.ipa</span></code> 文件中并分发给运行 <code class="docutils literal"><span class="pre">iOS</span></code> 设备。对于 <code class="docutils literal"><span class="pre">Android</span></code> ，您编写 <code class="docutils literal"><span class="pre">Java</span></code> 代码，将代码编译并构建到 <code class="docutils literal"><span class="pre">.apk</span></code> 文件中，然后将 <code class="docutils literal"><span class="pre">.apk</span></code> 文件分发到 <code class="docutils literal"><span class="pre">Android</span></code> 设备。当 <code class="docutils literal"><span class="pre">iOS</span></code> 和 <code class="docutils literal"><span class="pre">Android</span></code> 运行各自的应用程序时，设备本地运行编译的 <code class="docutils literal"><span class="pre">Objective</span> <span class="pre">C</span></code> 和 <code class="docutils literal"><span class="pre">Java</span></code> 代码。</p>
<p>在 <code class="docutils literal"><span class="pre">NativeScript</span></code> 中编写应用程序时，您可以使用 <code class="docutils literal"><span class="pre">JavaScript</span></code> 编写应用程序，该应用程序未编译，但与 <code class="docutils literal"><span class="pre">NativeScript</span></code> 运行时一起捆绑到应用程序文件中。图2.9显示了应用程序代码在 <code class="docutils literal"><span class="pre">Android</span></code> 或 <code class="docutils literal"><span class="pre">iOS</span></code> 设备上的运行方式。</p>
<img alt="_images/2-7.png" src="_images/2-7.png" />
<p>正如您所看到的，您使用 <code class="docutils literal"><span class="pre">JavaScript</span></code> 一次性编写应用程序代码，并且 <code class="docutils literal"><span class="pre">NativeScript</span></code> 运行时确保它在 <code class="docutils literal"><span class="pre">Android</span></code> 或 <code class="docutils literal"><span class="pre">iOS</span></code> 上运行。 <code class="docutils literal"><span class="pre">NativeScript</span></code> 运行时是在您的应用程序运行时在设备上发出本机调用的。 运行时通过捆绑到您的本机应用程序中的 <code class="docutils literal"><span class="pre">JavaScript</span> <span class="pre">VM</span></code> 执行此操作。</p>
</div>
<div class="section" id="javascript">
<h3>3.2.2. JavaScript虚拟机<a class="headerlink" href="#javascript" title="永久链接至标题">¶</a></h3>
<p><code class="docutils literal"><span class="pre">JavaScript</span></code> 虚拟机是一些专门的软件，它们执行 <code class="docutils literal"><span class="pre">JavaScript</span></code> 代码并在底层环境上运行代码。如果您熟悉网络编程，您将在 <code class="docutils literal"><span class="pre">Web</span></code> 浏览器中使用 <code class="docutils literal"><span class="pre">JavaScript</span> <span class="pre">VM</span></code> 。每个浏览器运行一个 <code class="docutils literal"><span class="pre">JavaScript</span> <span class="pre">VM</span></code> ，然后运行您编写的 <code class="docutils literal"><span class="pre">JavaScript</span></code> 代码。简而言之， <code class="docutils literal"><span class="pre">JavaScript</span> <span class="pre">VM</span></code> 知道如何做一件事：读取和执行 <code class="docutils literal"><span class="pre">JavaScript</span></code> 代码。例如， <code class="docutils literal"><span class="pre">VM</span></code> 知道如何读取和执行 <code class="docutils literal"><span class="pre">JavaScript</span></code> 变量， <code class="docutils literal"><span class="pre">FOR</span></code> 循环和函数。</p>
<p>由于 <code class="docutils literal"><span class="pre">JavaScript</span> <span class="pre">VM</span></code> 只知道 <code class="docutils literal"><span class="pre">JavaScript</span></code> ，所以他们不了解 <code class="docutils literal"><span class="pre">Web</span></code> 浏览器。即使它们是浏览器的一部分，但是如果没有帮助，它们本身并不理解浏览器概念，如 DOM（文档对象模型），文档对象或窗口对象。因此，当一个 <code class="docutils literal"><span class="pre">JavaScript</span></code> 虚拟机被包含在 Web 浏览器内时，浏览器制造商会创建接口代码来教会虚拟机如何与浏览器进行交互。这教导了虚拟机存在文档和窗口对象，并分别表示 <code class="docutils literal"><span class="pre">HTML</span></code> 文档和浏览器窗口。</p>
</div>
<div class="section" id="nativescriptjavascript">
<h3>3.2.3. 在NativeScript中的JavaScript虚拟机<a class="headerlink" href="#nativescriptjavascript" title="永久链接至标题">¶</a></h3>
<p>现在您已经介绍了 <code class="docutils literal"><span class="pre">JavaScript</span> <span class="pre">VM</span></code> ，并且您了解 <code class="docutils literal"><span class="pre">VM</span></code> 如何与浏览器捆绑在一起，您将了解 <code class="docutils literal"><span class="pre">NativeScript</span></code> 如何利用 <code class="docutils literal"><span class="pre">JavaScript</span> <span class="pre">VM</span></code> 。与浏览器类似， <code class="docutils literal"><span class="pre">NativeScript</span></code> 应用程序与 <code class="docutils literal"><span class="pre">JavaScript</span> <span class="pre">VM</span></code> 捆绑在一起以读取并运行您的 <code class="docutils literal"><span class="pre">JavaScript</span></code> 代码。就像浏览器中的 <code class="docutils literal"><span class="pre">JavaScript</span> <span class="pre">VM</span></code> 一样，与 <code class="docutils literal"><span class="pre">NativeScript</span></code> 应用程序捆绑在一起的 <code class="docutils literal"><span class="pre">JavaScript</span> <span class="pre">VM</span></code> 知道如何做一件事 - 读取和执行 <code class="docutils literal"><span class="pre">JavaScript</span></code> 代码。</p>
<p>可是等等！如果 <code class="docutils literal"><span class="pre">NativeScript</span> <span class="pre">JavaScript</span> <span class="pre">VM</span></code> 只知道如何读取和执行 <code class="docutils literal"><span class="pre">JavaScript</span></code> 变量， <code class="docutils literal"><span class="pre">FOR</span></code> 循环和函数，它如何知道如何与 <code class="docutils literal"><span class="pre">Android</span></code> 手机或 <code class="docutils literal"><span class="pre">iOS</span></code> 平板电脑等移动设备进行交互？ 如果没有帮助，它不会，这就是为什么 <code class="docutils literal"><span class="pre">NativeScript</span></code> 开发团队编写了接口代码（称为 <code class="docutils literal"><span class="pre">NativeScript</span></code> 核心模块和 <code class="docutils literal"><span class="pre">NativeScript</span></code> 运行时）以教授关于移动设备 <code class="docutils literal"><span class="pre">API</span></code> （如 <code class="docutils literal"><span class="pre">Android</span></code> 和 <code class="docutils literal"><span class="pre">iOS</span></code> ）的 <code class="docutils literal"><span class="pre">JavaScript</span></code> 虚拟机。</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last"><code class="docutils literal"><span class="pre">NativeScript</span></code> 核心模块是您将在本书中了解的一系列库。 这些库是您用来构建应用程序并指导 <code class="docutils literal"><span class="pre">NativeScript</span></code> 运行时应用程序在设备上执行什么操作的库。核心模块由不同的库组成，如 <code class="docutils literal"><span class="pre">UI</span></code> 组件（按钮，列表视图，标签），导航和应用程序。</p>
</div>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last"><code class="docutils literal"><span class="pre">NativeScript</span></code> 运行时是接口代码，它连接 <code class="docutils literal"><span class="pre">JavaScript</span></code> 代码与 <code class="docutils literal"><span class="pre">Android</span></code> 和 <code class="docutils literal"><span class="pre">iOS</span></code> 本机 <code class="docutils literal"><span class="pre">API</span></code> 之间的空隙。就像浏览器制造商通过接口代码教他们关于文档和窗口对象的 <code class="docutils literal"><span class="pre">JavaScript</span></code> 虚拟机一样， <code class="docutils literal"><span class="pre">NativeScript</span></code> 运行时教导它的 <code class="docutils literal"><span class="pre">JavaScript</span></code> 虚拟机关于底层本机设备 <code class="docutils literal"><span class="pre">API</span></code> 。</p>
</div>
</div>
</div>
<div class="section" id="id4">
<h2>3.3. 建立你的开发工作流<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h2>
<p>现在您对 <code class="docutils literal"><span class="pre">NativeScript</span></code> 的工作原理有了更深入的了解，现在应该为自己建立一个开发工作流程。 在开始创建应用程序之前，建立您的开发工作流程非常重要。由于您只需编写一次代码，并且 <code class="docutils literal"><span class="pre">NativeScript</span></code> 运行时将代码作为本机代码运行，您不必花费大量时间来担心应用程序将如何跨不同平台运行。</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last"><code class="docutils literal"><span class="pre">Android</span></code> 中有一些功能可能不适用于 <code class="docutils literal"><span class="pre">iOS</span></code> ，反之亦然。因此，您仍然可能需要编写一些专门针对 <code class="docutils literal"><span class="pre">Android</span></code> 或 <code class="docutils literal"><span class="pre">iOS</span></code> 的代码。幸运的是， <code class="docutils literal"><span class="pre">NativeScript</span></code> 提供了几种在特定平台上代码的机制。 您将在第3章中了解有关平台特定代码的更多信息。</p>
</div>
<p>平台特定的实现是一种解脱，因为它允许您专注于应用程序的功能和使其更好。实际上，我不想知道 <code class="docutils literal"><span class="pre">Android</span></code> 和 <code class="docutils literal"><span class="pre">iOS</span></code> 上按钮和文本的显示细节。这就是 <code class="docutils literal"><span class="pre">NativeScript</span></code> 的用途！</p>
<p>现在，我们来了解一下典型的 <code class="docutils literal"><span class="pre">NativeScript</span></code> 开发流程。这一基本过程是您在编写 <code class="docutils literal"><span class="pre">NativeScript</span></code> 应用程序时不断重复的过程。图2.10显示了编写应用程序代码，调用 <code class="docutils literal"><span class="pre">NativeScript</span> <span class="pre">CLI</span></code> 命令将代码捆绑到本机应用程序，然后测试应用程序的三个步骤过程。</p>
<img alt="_images/2-8.png" src="_images/2-8.png" />
<div class="section" id="nativescript-app">
<h3>3.3.1. 构建NativeScript app<a class="headerlink" href="#nativescript-app" title="永久链接至标题">¶</a></h3>
<p>您已经知道 <code class="docutils literal"><span class="pre">NativeScript</span></code> 应用程序是用 <code class="docutils literal"><span class="pre">XML</span></code> ， <code class="docutils literal"><span class="pre">JavaScript</span></code> 和 <code class="docutils literal"><span class="pre">CSS</span></code> 编写的。这是您开发工作流程的第一步。让我们仔细看看步骤2，即 <code class="docutils literal"><span class="pre">NativeScript</span> <span class="pre">CLI</span></code> 。 在第2步中， <code class="docutils literal"><span class="pre">NativeScript</span> <span class="pre">CLI</span></code> 将您的代码转换为本地应用程序，将应用程序部署到移动设备（或模拟器/模拟器），并运行该应用程序。当我们创建并运行您的第一个应用程序时，您已经看到 <code class="docutils literal"><span class="pre">CLI</span></code> 在行动：hello world。</p>
<p>当您创建 <code class="docutils literal"><span class="pre">hello</span> <span class="pre">world</span></code> 应用程序时，您使用了 <code class="docutils literal"><span class="pre">tns</span> <span class="pre">run</span> <span class="pre">&lt;platform&gt;</span> <span class="pre">--emulator</span></code> 命令在模拟器/模拟器中构建，部署和运行应用程序。但是，您可能需要构建应用程序，而不必部署和运行它。您可以使用以下某个 <code class="docutils literal"><span class="pre">tns</span></code> 构建命令为 <code class="docutils literal"><span class="pre">Android</span></code> 或 <code class="docutils literal"><span class="pre">iOS</span></code> 构建您的应用程序：</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>tns build ios
tns build android
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">tns</span> <span class="pre">build</span></code> 命令打包您的应用程序代码， <code class="docutils literal"><span class="pre">NativeScript</span></code> 运行时和核心模块打包到本机应用程序中（图2.11）。</p>
<img alt="_images/2-9.png" src="_images/2-9.png" />
<p>每次构建应用程序时，无论是通过 <code class="docutils literal"><span class="pre">tns</span> <span class="pre">build</span></code> 还是 <code class="docutils literal"><span class="pre">tns</span> <span class="pre">run</span></code> 命令， <code class="docutils literal"><span class="pre">NativeScript</span> <span class="pre">CLI</span></code> 都会将您的应用程序代码以及 <code class="docutils literal"><span class="pre">NativeScript</span></code> 运行时和核心模块一起使用，并将其打包到 <code class="docutils literal"><span class="pre">Android</span></code> 或 <code class="docutils literal"><span class="pre">iOS</span></code> 的本机应用程序中。在这一点上，您可能会认为这看起来很多工作，并且您正在浪费大量时间来构建，运行，等待模拟器启动，等等。 如果您认为这是正确的：可能需要很长时间，特别是如果您有大型应用程序。 所以，让我介绍一个更好的方法：实时同步。</p>
</div>
<div class="section" id="id5">
<h3>3.3.2. 实时同步<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h3>
<p>因为每次要测试更改时都需要构建，部署和重新启动应用程序， <code class="docutils literal"><span class="pre">NativeScript</span> <span class="pre">CLI</span></code> 会将更改程序代码快速注入到正在运行的应用程序中。这个过程被称为实时同步，并且它是自动完成的。</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">在早期版本的 <code class="docutils literal"><span class="pre">NativeScript</span></code> 中，您必须使用特殊的 <code class="docutils literal"><span class="pre">CLI</span></code> 命令才能使用 <code class="docutils literal"><span class="pre">livesync</span></code> 。 但是，它现在已经完全集成到 <code class="docutils literal"><span class="pre">CLI</span></code> 中，并且不需要做任何特殊的事情。使用 <code class="docutils literal"><span class="pre">tns</span></code> 运行，并且应用程序上运行的代码将自动保持最新。即使同步是内置的，我们仍然将同步技术称为实时同步。</p>
</div>
<p>当您运行 <code class="docutils literal"><span class="pre">tns</span> <span class="pre">run</span></code> 命令时， <code class="docutils literal"><span class="pre">lifeync</span></code> 引擎 <code class="docutils literal"><span class="pre">NativeScript</span> <span class="pre">CLI</span></code> 将计算增量文件更改并将文件同步到设备（或模拟器/模拟器）。图2.12显示了如何通过替换正在运行的 <code class="docutils literal"><span class="pre">NativeScript</span></code> 应用程序中的单个文件来实现同步。</p>
</div>
</div>
<div class="section" id="id6">
<h2>3.4. 快速参考<a class="headerlink" href="#id6" title="永久链接至标题">¶</a></h2>
<p>我们已经介绍了本章中的许多概念，如果您是 <code class="docutils literal"><span class="pre">NativeScript</span></code> 的新手，您可能会感到不知所措。有 <code class="docutils literal"><span class="pre">CLI</span></code> 命令需要理解，跨平台编译以及将源代码更改同步到正在运行的应用程序。因为这可能会让人困惑，所以我们为你做了两件事。首先，请查看附录B中的 <code class="docutils literal"><span class="pre">NativeScript</span> <span class="pre">CLI</span></code> 快速参考指南：它列出了您在本书中使用的 <code class="docutils literal"><span class="pre">CLI</span></code> 命令。其次，表2.2是一个入门快速参考。 它总结了创建新应用程序并在仿真器/模拟器中运行时需要使用的 <code class="docutils literal"><span class="pre">NativeScript</span> <span class="pre">CLI</span></code> 命令。</p>
<p>CLI命令  描述
tns create &lt;app-name&gt;  创建一个名为 <code class="docutils literal"><span class="pre">&lt;app-name&gt;</span></code> 的新的跨平台 <code class="docutils literal"><span class="pre">NativeScript</span></code> 应用程序。 将使用您的应用程序的名称创建一个文件夹，并添加第3章中介绍的 <code class="docutils literal"><span class="pre">NativeScript</span></code> 应用程序结构。 该命令还使用 <code class="docutils literal"><span class="pre">JavaScript</span></code> 创建了一个 <code class="docutils literal"><span class="pre">vanilla</span> <span class="pre">NativeScript</span></code> 应用程序。有关其他选项，请参阅附录B。
tns platform add &lt;platform&gt;  将 <code class="docutils literal"><span class="pre">Android</span></code> 和 <code class="docutils literal"><span class="pre">iOS</span></code> 平台添加到您的应用程序。该命令是可选的，因为 <code class="docutils literal"><span class="pre">tns</span> <span class="pre">run</span></code> 在构建和部署应用程序之前执行此操作。
tns run &lt;platform&gt;  当你的应用程序已经创建，采取快捷方式并使用 <code class="docutils literal"><span class="pre">tns</span> <span class="pre">run</span> <span class="pre">android</span></code> 或 <code class="docutils literal"><span class="pre">tns</span> <span class="pre">run</span> <span class="pre">ios</span></code> 。这将添加本地平台，将您的应用程序的源代码复制到本地项目中，编译您的应用程序，将其安装在设备，模拟器或模拟器上，运行它，然后使用实时同步监视它的更改。</p>
</div>
<div class="section" id="id7">
<h2>3.5. 总结<a class="headerlink" href="#id7" title="永久链接至标题">¶</a></h2>
<p>在本章中，您了解了以下内容：</p>
<ul class="simple">
<li>尽早建立开发工作流程将使您专注于创建应用程序，而不是专注于不同的平台。</li>
<li><code class="docutils literal"><span class="pre">NativeScript</span> <span class="pre">CLI</span></code> 是开发工作流程的重要组成部分。</li>
<li>如何使用 <code class="docutils literal"><span class="pre">NativeScript</span> <span class="pre">CLI</span></code> 运行各种命令（创建，平台添加/删除，运行）。</li>
<li>当您使用 <code class="docutils literal"><span class="pre">tns</span> <span class="pre">run</span></code> 命令运行应用程序时，它会监控应用程序的源代码以进行更改，并将其自动同步到正在运行的设备。</li>
</ul>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="为什么使用NativeScript.html" class="btn btn-neutral" title="2. 为什么使用NativeScript" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, lz.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            LANGUAGE:'zh_CN',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>