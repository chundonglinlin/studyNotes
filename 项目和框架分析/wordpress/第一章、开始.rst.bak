=================
wordpress主题设计
=================
在本章节和接下来的章节中，我们将会讨论如下话题：

	- 使用WordPress的优点和主题如何运作的基础知识；
	- 你应该理解的核心技术和开发你的主题你应该使用的工具；
	- 当设计你的主题时，你必须考虑的因素；
	- 主题开发策略的概览；
	- 从使用HTML5标记语言开始；
	- 网页排版的概述；
	- 使用一个CSS框架；
	- 使用ems调整排版；
	- 使用“面向对象的CSS”技术进行图形处理；
	- 设置您的WordPress主题设计流程；

Wordpress优点概览
=================
Wordpress实现了主题和内容分离的设计理念。

Wordpress站点只能是一个博客吗
=============================

不是的，Wordpress可以管理页面和子页面，页面不同于文章。

考虑如何通过WordPress管理内容，您可能会使用什么样的插件，以及您的主题如何显示所有内容，您可以轻松实现创建一个完全独特和原始的网站。

选择或设计你自己的主题
======================
从两个角度来看待主题设计是个好主意：

	- 简单：适用于简单要求的客户。在这种情况下，使用一个基础主题，可以快速构建和修改它。
	- 唯一且美观：有时候，网站的主题需要所有显示的东西都符合特定的网站内容。来确保了这个网站是引人注目的，没有其他人会这样做有。 当定制品牌或您只是显示你的设计技能时，这是最佳路线。

使用或调整现成的主题有很多好处。首先，你节省了很多的时间来获取一个主题设计良好的网站。第二，你不需要知道很多关于CSS，HTML或PHP。这意味着你可以有一个时尚的外观的WordPress网站开始运行。

使用现成主题的缺点。使用一个现成的主题开始感觉像最简单的方法，但正如你
深入了解代码，您可能会自己做出越来越多的变更，使您无法理解达到要从头开始变得更容易的点。在使用一个存在的主题之前，检查一下它是否真的拥有你需要的一切项目微调。

框架主题
========
框架在许多方面与高级主题相似，但是框架的重点不是一个“主题”本身，而是更多的是一个“开始工具套件”剥离需要了解WordPress'Theme API的设计过程，通常也是增加了巨大的附加功能。大多数框架都适用于假设你会创造一个你自己的孩子主题的外观。因为框架对设计人员进行“快速开始”，以及额外的功能，类似于收费主题。一些框架需要购买或许可，还有一些非常好的开源框架可以免费下载和使用。

框架对于没有时间且不想了解WordPress的学习模板页面层次结构，模板标签和插件API钩子的设计师来说非常有用。

.. note::
   什么是孩子主题？

.. tip::
   **流行的主题框架**

   越来越多的框架每天都会出现，每个框架都会尝试处理稍微不同的需求。作为奖励，一些框架在WordPress管理面板添加选项，允许用户从他们选择的子主题中添加和删除。

   您选用正确框架将取决于您的开发风格和您的网站的需求，但下面列出了一些流行的框架。
   
   您可以自定义自己的很多孩子主题：

   - `Thematic <http://themeshaper.com/thematic/>`_;
   - `Hybrid <http://themehybrid.com/>`_

   这些框架可能看起来很复杂，但是有一系列丰富的功能用于开发主题，特别是如果您了解创建WordPress主题本质（正如你将阅读这本书），真的可以帮助你加快你的主题发展。

   再次，有许多主题框架可用。快速搜索“WordPress主题框架”将会有相当的范围主题可供选择。

WordPress主题的基础
===================
模板层次
--------
WordPress主题最重要的部分是模板层次。WordPress主题由包括模板页面在内的多种类型的类型组成。模板页面有一个层次结构。这意味着，如果一个模板是不存在，那么WordPress系统会调用下一级模板。这允许
开发人员创造出更细节的主题，充分利用所有这些主题的层次结构的可用模板文件，但使设置令人难以置信的简单。仅包含一个index.php和样式表的主题，也可能是一个完全功能的WordPress主题。

WordPress使用查询字符串来决定哪个模板或模板集来显示页面内容。查询字符串是指向您网站每个部分的链接的信息。它来自初始问号之后，可能包含许多由＆符号分隔的参数。

简单地说，WordPress通过搜索模板层次结构，直到找到匹配的模板文件。确定要使用哪个模板文件：

	- 将每个查询字符串匹配到查询类型以确定正在请求哪个页面（例如，搜索页面，分类页面等）;
	- 按照模板层次结构确定的顺序选择模板;
	- 在当前主题的目录中查找具有特定名称的模板文件，并使用层次结构指定的第一个匹配的模板文件。

除了基本的index.php模板文件外，您可以选择是否要实现特定的模板文件。

如果WordPress无法找到具有匹配名称的模板文件，它将跳到层次结构中的下一个文件。如果WordPress找不到任何匹配的模板文件，将使用主题的index.php文件。

例如：
+++++

如果您的博客位于http://example.com/blog/，访问者点击链接到类别页面（例如http://example.com/blog/category/your-cat/），则WordPress会查找模板文件在当前主题的目录中匹配类别的ID以生成正确的页面。更具体地说，WordPress遵循以下过程：

	1. 在当前主题的目录中查找与该类别的别名匹配的模板文件。如果类别slug是“unicorns”，则WordPress将查找名为category-unicorns.php的模板文件。
	2. 如果category-unicorns.php丢失且该类别的ID为4，则WordPress将查找名为category-4.php的模板文件。
	3. 如果类别4.php丢失，WordPress将寻找一个通用类别模板文件category.php。
	4. 如果category.php不存在，WordPress将查找通用存档模板archive.php。
	5. 如果archive.php也缺少，WordPress将会回到主题模板文件index.php。

层次概览
++++++++
下图显示了基于WordPress模板层次结构决定哪些模板文件被调用生成WordPress页面。

.. image:: https://developer.wordpress.org/files/2014/10/wp-hierarchy.png
`页面调用层次高清图 <https://developer.wordpress.org/files/2014/10/wp-hierarchy.png>`_ `页面调用层次路径图 <https://wphierarchy.com/>`_

循环
----
在层次结构中的大多数模板页（不一定全部）中，我们将被添加一段代码叫做“循环”。循环是WordPress主题的一个基本部分。它按时间顺序显示您的帖子，并允许您通过包含在HTML标记中各种WordPress模板标签定制显示属性。

模板标签和API钩子
-----------------
看一个模板页面的“循环”，你会发现一些令人兴奋的包裹在PHP标签中的代码。代码不是纯PHP，其中大部分是具体的WordPress标签和函数
例如仅在WordPress系统中工作的模板标签。大多数标签和函数
可以传递各种参数给它们。

并不是所有的WordPress标签和函数都进入循环。如果你要查看包含在默认的Twenty Ten主题中header.php fle，你会发现几个可以在循环之外工作的标签。特别在header.php模板页面（以及footer.php
和sidebar.php模板页面），你还会发现几个WordPress Plugin API和Script API中的一部分具体函数。

再次，现在没有必要担心这些的具体东西。 我们将在详细的第3章的例子中涵盖所有这些项目，代码加上附录将会有一个完整的快速参考表，您可以快速查找所有这些说明。

我们开发策略
============
这本书的方法将让你知道如何从头开始创建一个主题，你会更了解
在其他WordPress主题，高级主题和框架中寻找什么。然后你就可以
评估什么时候自己从头开始真的比建立使用已经建立的主题更好或更容易。

第2章我们准备设计的WordPress主题将涵盖HTML5和基于CSS3，设计“模拟”，可以在所有浏览器中运行并且响应。在第3章“编码”中，我们将采用HTML/CSS代码并将其分解到模板页面并注入模板标签，并完成一个完整的功能主题。在第4章“高级主题功能”中，我们将学习如何
添加一些很好的高级功能，以及正确验证和打包该主题以便和其它人分享。

字体
----
当设想主题的排版时，请考虑该网站将会（或可能）持有的信息类型，以及预期现在的时尚。尝试思考标题，辅助字体，块引号，特殊文本（代码）和段落文本。

只要您认为其他人的电脑也有对于的字体，您可以使用任何您想要的字体。 以下是基本字体的列表：

- 屏幕设计字体：
	+ Georgia(serif)
	+ Verdana(sans serif)
- 大多数Mac和PC可用字体：
	+ Arial
	+ Helvetica
	+ Times New Roman
- 代码使用的字体：
	+ Monaco
	+ Consolas

一个CSS策略——字体大小使用em
+++++++++++++++++++++++++++
可以将文本设置为六个不同的单位之一 ——关键字、pt、px、百分比、em、rem。这些工作方式如下：

	- 关键字包含 xx-small, x-small, small, medium, large, x-large和xx-large。medium选项与浏览器设置的默认字体大小相同，而其他的则与此相关，例如，x-small关键字相当于在桌面浏览器上以9个像素的默认设置。关键词有限只有七个选择，它们是不精确的，因为不可能知道用户是否有更改浏览器的默认大小，或者不同的浏览器使用不同的默认值尺寸。 因此使用关键字不是一个好主意。
	- 如果您使用文字处理或桌面发布程序，你将会很熟悉点数，它们与打印页面上的文本大小有关。他们在网站上的应用唯一的真实目的是单独的打印样式表 - 它们通常不被使用在屏幕样式表中。
	- 像素可能是最常用的，并且与屏幕上的像素有关。它们提供对精确尺寸的控制，但是由于每个字体的字体大小元素（例如标题）必须单独设置，如果您想使整个网站的字体大小或更小您必须编辑每个元素。
	- 百分比将文本大小改为浏览器设置的大小（有点像关键字），但给予很多精细控制。在一个相对于大小的元素中您还可以使用它们来设置文本的大小，它通常会从更高的元素继承html结构。例如，如果将<body>元素设置为具有字体大小16个像素，<h1>标签的字体大小为120％，其大小将为16像素的120%，就是19.2像素。
	  
	  **使用百分比定宽的元素，百分比参考的是该元素最近的、定了宽度的、父元素。**
	
	- em也是相对的，工作方式与百分比完全相同，所以1.2em相当于120％。 一些开发人员会发现数字越小更容易使用。当样式布局与文本大小相关时，它们也很有用。例如，在对action框的调用中，空白是em，所以它会基于该元素中文本的大小。 如果我们使用百分比空白，浏览器将使用包含action元素的宽度或高度的百分比。

	  **相对单位em是相对于元素本身的字体大小的。在css中唯一例外的是font-size属性，它的em和ex值指的是相对父元素的字体大小。如果父元素没有设置font-size,那么它的参考对象就会一直往上冒泡，直到body，也就是参考的是该元素最近的，定了font-size的、父元素。**

	  .. image:: http://images0.cnblogs.com/blog2015/315302/201508/191704221918468.png

	  h1的默认font-size:2em，相对于父元素，这里父元素body的font-size:16px;(默认值)，所以计算一下得到h1的font-size:32px。除了font-size之外其他属性的em计算相对于元素自身字体大小。所以margin-bottom:0.67em计算值就是0.67*32px=21.44px了。

	- 前面说了“em”是相对于其父元素来设置字体大小的，这样就会存在一个问题，进行任何元素设置，都有可能需要知道他父元素的大小，在我们多次使用时，就会带来无法预知的错误风险。而 **rem是相对于根元素<html>** ，这样就意味着，我们只需要在根元素确定一个参考值，在根元素中设置多大的字体，这完全可以根据您自己的需要。

因为em和百分比是相对值，它们比像素有两个主要优点：

	- 如果您将站点的基本文本大小设置为14像素，例如，使用<body>元素，并使用em设置其他元素不同字体，然后在后期决定使文本大小更大，所有您需要做的是更改<body>元素大小，这将对所有其他使用ems或像素设置的元素或选择器有一个影响。这也意味着你更改<body>元素的字体大小可以调整移动设备上的站点的所有部分的文字大小。
	- 因为em相对的，当用户调整他们的浏览器文本大小时，会改文本大小。例如，如果他或她视力受损或近视。使用像素不会那么好。这使得ems更适合可访问性。

您可以使用它们，但是em更常用，因为它们更易于使用。
