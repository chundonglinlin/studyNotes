

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>39. 集合 &mdash; laravel 1.0 文档</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="索引"
              href="genindex.html"/>
        <link rel="search" title="搜索" href="search.html"/>
    <link rel="top" title="laravel 1.0 文档" href="index.html"/>
        <link rel="next" title="40. 事件" href="Laravel的事件系统.html"/>
        <link rel="prev" title="38. 缓存" href="Laravel的缓存系统.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> laravel
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">目录:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="请求到响应的生命周期-web.html">1. 请求到web响应的生命周期</a></li>
<li class="toctree-l1"><a class="reference internal" href="请求到响应的生命周期-console.html">2. 请求到console响应的生命周期</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的容器.html">3. 容器</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的Facades.html">4. Facades</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的Facades原理分析.html">5. Facade的原理</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的服务提供器.html">6. 服务提供器</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的路由.html">7. 路由</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的路由—路由的正则编译.html">8. 路由的正则编译</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的路由—路由的匹配与参数绑定.html">9. 路由的匹配与参数绑定</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的路由—路由中间件.html">10. 路由的中间件</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的中间件.html">11. 中间件</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的中间件-SubstituteBindings.html">12. 中间件SubstituteBindings</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的中间件-CSRF.html">13. 中间件CSRF</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的请求.html">14. 请求</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的控制器.html">15. 控制器</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的控制器—控制器方法的参数构建与运行.html">16. 控制器方法的参数构建与运行</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的响应.html">17. 响应</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的视图.html">18. 视图</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的生成URL.html">19. URL</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的Session.html">20. Session</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的Session原理分析.html">21. Session原理分析</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的表单验证机制详解.html">22. 表单验证机制详解</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的日志.html">23. 日志</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的异常和错误处理.html">24. 异常和错误处理</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的异常和错误处理原理分析.html">25. 异常和错误处理原理分析</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的Blade.html">26. Blade</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的blade原理分析.html">27. Blade原理分析</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的前端.html">28. 前端</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的Mix.html">29. Mix</a></li>
<li class="toctree-l1"><a class="reference internal" href="laravel-mix.html">30. mix使用手册</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的用户认证系统.html">31. Laravel 的用户认证系统</a></li>
<li class="toctree-l1"><a class="reference internal" href="用户认证JWT.html">32. 用户认证JWT</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的API认证系统Passport.html">33. Laravel 的 API 认证系统 Passport</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的用户授权系统.html">34. Laravel用户授权系统</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的命令行.html">35. 命令行</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的广播系统.html">36. 广播</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的广播系统原理分析.html">37. 广播系统原理分析</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的缓存系统.html">38. 缓存</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">39. 集合</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#collection">39.1. Collection 类</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id4">39.2. 创建一个新的集合</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id5">39.2.1. 使用帮助函数和构造函数</a></li>
<li class="toctree-l3"><a class="reference internal" href="#wrap">39.2.2. 使用wrap</a></li>
<li class="toctree-l3"><a class="reference internal" href="#times">39.2.3. 使用times</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#eloquent-orm">39.3. Eloquent ORM集合</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id6">39.4. 创建演示用的样例集合</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id7">39.5. 可用的方法</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id8">39.5.1. 查找过滤数据</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id10">39.5.2. 判断类</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id11">39.5.3. 排序类</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id12">39.5.4. 重组类</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id21">39.5.5. 提取类</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id23">39.5.6. 聚合操作类</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id24">39.5.7. 转换为数组</a></li>
<li class="toctree-l3"><a class="reference internal" href="#json">39.5.8. 转换为JSON</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的事件系统.html">40. 事件</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的事件系统原理分析.html">41. 事件系统原理分析</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的文件存储.html">42. 文件存储</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的辅助函数-字符串操作.html">43. 辅助函数-字符串函数</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的辅助函数-数组和对象操作.html">44. 辅助函数-数组和对象函数</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的辅助函数-路径操作.html">45. 辅助函数-路径函数</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的辅助函数-tap分析.html">46. 辅助函数-Tap函数</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的辅助函数-其它.html">47. 辅助函数-其它杂项</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的邮件发送功能.html">48. 邮件</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的消息通知.html">49. 通知</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel Queue——消息队列任务与分发源码剖析.html">50. 消息队列任务与分发源码剖析</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的任务调度.html">51. 任务调度</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的数据库—原始方式.html">52. 数据库-原始操作</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的数据库—查询构造器.html">53. 数据库-查询构建器</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的数据分页.html">54. 数据分页</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的数据分页原理分析.html">55. 数据分页原理分析</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的数据库迁移.html">56. 数据库迁移</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的数据库填充.html">57. 数据库填充</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的Redis.html">58. Redis</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的Redis原理分析.html">59. Redis原理分析</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的数据库—Eloquent.html">60. Eloquent</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的数据库—Eloquent关联.html">61. Eloquent关联</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的数据库—Eloquent修改器.html">62. Eloquent修改器</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的验证规则.html">63. 验证规则</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">laravel</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>39. 集合</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
        
        <a href="http://blog.liaozhonghao.cn" rel="nofollow"> 返回主页</a>
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>39. 集合<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h1>
<p><a class="reference external" href="https://github.com/tightenco/collect">可移植包下载</a></p>
<div class="section" id="collection">
<h2>39.1. Collection 类<a class="headerlink" href="#collection" title="永久链接至标题">¶</a></h2>
<p><code class="docutils literal"><span class="pre">Illuminate\Support\Collection</span></code> 提供了一个更具可读性的、更便于处理数组数据的封装。</p>
<p>该 <code class="docutils literal"><span class="pre">Collection</span></code> 类实现了一些 <code class="docutils literal"><span class="pre">PHP</span></code> 和 <code class="docutils literal"><span class="pre">Laravel</span></code> 接口:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">ArrayAccess</span></code> :提供对象作为数组访问的接口；</li>
<li><code class="docutils literal"><span class="pre">IteratorAggregate</span></code> :创建一个外部迭代器的接口；</li>
<li><code class="docutils literal"><span class="pre">JsonSerializable</span></code></li>
</ul>
<p>其它实现的接口 <a class="reference external" href="https://laravel.com/api/5.2/Illuminate/Support/Collection.html">参考</a></p>
<p>具体例子看下面的代码。我们使用了 <code class="docutils literal"><span class="pre">collect</span></code> 函数从数组中创建新的集合实例，对其中的每个元素运行 <code class="docutils literal"><span class="pre">strtoupper</span></code> 函数之后再移除所有的空元素：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="s1">&#39;taylor&#39;</span><span class="p">,</span> <span class="s1">&#39;abigail&#39;</span><span class="p">,</span> <span class="k">null</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">map</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$name</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">strtoupper</span><span class="p">(</span><span class="nv">$name</span><span class="p">);</span>
<span class="p">})</span><span class="o">-&gt;</span><span class="na">reject</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$name</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">empty</span><span class="p">(</span><span class="nv">$name</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>正如你看到的， <code class="docutils literal"><span class="pre">Collection</span></code> 类允许你链式调用其方法，以达到在底层数组上优雅地执行 <code class="docutils literal"><span class="pre">map</span></code> 和 <code class="docutils literal"><span class="pre">reject</span></code> 操作。一般来说，集合是不可改变的，这意味着每个 <code class="docutils literal"><span class="pre">Collection</span></code> 方法都会返回一个全新的 <code class="docutils literal"><span class="pre">Collection</span></code> 实例。</p>
</div>
<div class="section" id="id4">
<h2>39.2. 创建一个新的集合<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h2>
<div class="section" id="id5">
<h3>39.2.1. 使用帮助函数和构造函数<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h3>
<p>可以使用 <code class="docutils literal"><span class="pre">collect()</span></code> 帮助函数从一个数组创建一个集合或者通过实例化 <code class="docutils literal"><span class="pre">Collection</span></code> 来创建。</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$newCollection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span>

<span class="nv">$newCollection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Collection</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span>
</pre></div>
</div>
</div>
<div class="section" id="wrap">
<h3>39.2.2. 使用wrap<a class="headerlink" href="#wrap" title="永久链接至标题">¶</a></h3>
<p>静态 <code class="docutils literal"><span class="pre">wrap</span></code> 方法将可用的给定值包装在集合中：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">Collection</span><span class="o">::</span><span class="na">wrap</span><span class="p">(</span><span class="s1">&#39;John Doe&#39;</span><span class="p">);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [&#39;John Doe&#39;]</span>

<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">Collection</span><span class="o">::</span><span class="na">wrap</span><span class="p">([</span><span class="s1">&#39;John Doe&#39;</span><span class="p">]);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [&#39;John Doe&#39;]</span>

<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">Collection</span><span class="o">::</span><span class="na">wrap</span><span class="p">(</span><span class="nx">collect</span><span class="p">(</span><span class="s1">&#39;John Doe&#39;</span><span class="p">));</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [&#39;John Doe&#39;]</span>
</pre></div>
</div>
</div>
<div class="section" id="times">
<h3>39.2.3. 使用times<a class="headerlink" href="#times" title="永久链接至标题">¶</a></h3>
<p>静态 <code class="docutils literal"><span class="pre">times</span></code> 方法通过回调在给定次数内创建一个新的集合：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">Collection</span><span class="o">::</span><span class="na">times</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$number</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$number</span> <span class="o">*</span> <span class="mi">9</span><span class="p">;</span>
<span class="p">});</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [9, 18, 27, 36, 45, 54, 63, 72, 81, 90]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="eloquent-orm">
<h2>39.3. Eloquent ORM集合<a class="headerlink" href="#eloquent-orm" title="永久链接至标题">¶</a></h2>
<p><code class="docutils literal"><span class="pre">Laravel</span> <span class="pre">Eloquent</span> <span class="pre">ORM</span></code> 同样返回集合类型数据。</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
 <span class="k">public</span> <span class="k">function</span> <span class="nf">getUsers</span><span class="p">()</span> <span class="p">{</span>
    <span class="nv">$users</span> <span class="o">=</span> <span class="nx">User</span><span class="o">::</span><span class="na">all</span><span class="p">();</span> <span class="c1">//返回User对象集合</span>
    <span class="nx">dd</span><span class="p">(</span><span class="nv">$users</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id6">
<h2>39.4. 创建演示用的样例集合<a class="headerlink" href="#id6" title="永久链接至标题">¶</a></h2>
<p>在接下来的几节中，我将使用用户表数据集和一些自定义集合中的以下数据集进行演示。</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="k">Array</span>
<span class="p">(</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
        <span class="p">(</span>
            <span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">1</span>
            <span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">Chasity</span> <span class="nx">Tillman</span>
            <span class="p">[</span><span class="nx">email</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">qleuschke</span><span class="o">@</span><span class="nx">example</span><span class="o">.</span><span class="nx">org</span>
            <span class="p">[</span><span class="nx">age</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">51</span>
            <span class="p">[</span><span class="nx">created_at</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">2016</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">07</span> <span class="mi">15</span><span class="o">:</span><span class="mi">50</span><span class="o">:</span><span class="mi">50</span>
            <span class="p">[</span><span class="nx">updated_at</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">2016</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">07</span> <span class="mi">15</span><span class="o">:</span><span class="mi">50</span><span class="o">:</span><span class="mi">50</span>
        <span class="p">)</span>
    <span class="o">...</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id7">
<h2>39.5. 可用的方法<a class="headerlink" href="#id7" title="永久链接至标题">¶</a></h2>
<p>这个文档接下来的内容，我们会探讨 <code class="docutils literal"><span class="pre">Collection</span></code> 类每个可用的方法。记住，所有方法都可以以方法链的形式优雅地操纵数组。而且，几乎所有的方法都会返回新的 <code class="docutils literal"><span class="pre">Collection</span></code> 实例，允许你在必要时保存集合的原始副本。</p>
<div class="section" id="id8">
<h3>39.5.1. 查找过滤数据<a class="headerlink" href="#id8" title="永久链接至标题">¶</a></h3>
<div class="section" id="where">
<h4>39.5.1.1. where类<a class="headerlink" href="#where" title="永久链接至标题">¶</a></h4>
<div class="section" id="id9">
<h5>39.5.1.1.1. where<a class="headerlink" href="#id9" title="永久链接至标题">¶</a></h5>
<p>你可以通过一个给定键值对，使用 <code class="docutils literal"><span class="pre">where</span></code> 方法从集合中搜索数据。支持链式 <code class="docutils literal"><span class="pre">where()</span></code> 方法。</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
    <span class="nv">$users</span> <span class="o">=</span> <span class="nx">User</span><span class="o">::</span><span class="na">all</span><span class="p">();</span>
    <span class="nv">$user</span> <span class="o">=</span> <span class="nv">$users</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="c1">//Collection of user with an ID of 2</span>

    <span class="nv">$user</span> <span class="o">=</span> <span class="nv">$users</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                  <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;51&#39;</span><span class="p">)</span>
                  <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;Chasity Tillman&#39;</span><span class="p">);</span>

    <span class="c1">//collection of user with an id of 1, age 51</span>
    <span class="c1">//and named Chasity Tillman</span>

    <span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span>
        <span class="p">[</span><span class="s1">&#39;product&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Desk&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">200</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;product&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Chair&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;product&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Bookcase&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">150</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;product&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Door&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="p">],</span>
    <span class="p">]);</span>

    <span class="nv">$filtered</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>

    <span class="nv">$filtered</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

    <span class="cm">/*</span>
<span class="cm">        [</span>
<span class="cm">            [&#39;product&#39; =&gt; &#39;Chair&#39;, &#39;price&#39; =&gt; 100],</span>
<span class="cm">            [&#39;product&#39; =&gt; &#39;Door&#39;, &#39;price&#39; =&gt; 100],</span>
<span class="cm">        ]</span>
<span class="cm">    */</span>
</pre></div>
</div>
<p>比较数值的时候， <code class="docutils literal"><span class="pre">where</span></code> 方法使用「宽松」比较，意味着具有整数值的字符串将被认为等于相同值的整数。使用 <code class="docutils literal"><span class="pre">whereStrict</span></code> 方法来进行「严格」比较过滤。</p>
</div>
<div class="section" id="wherestrict">
<h5>39.5.1.1.2. whereStrict<a class="headerlink" href="#wherestrict" title="永久链接至标题">¶</a></h5>
<p>这个方法与 <code class="docutils literal"><span class="pre">where</span></code> 方法一样；但是会以「严格」比较来匹配所有值。</p>
</div>
<div class="section" id="wherein">
<h5>39.5.1.1.3. whereIn<a class="headerlink" href="#wherein" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">whereIn</span></code> 方法通过给定的键和可选值数组来过滤集合：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span>
    <span class="p">[</span><span class="s1">&#39;product&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Desk&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">200</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;product&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Chair&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;product&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Bookcase&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">150</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;product&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Door&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="p">],</span>
<span class="p">]);</span>

<span class="nv">$filtered</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">whereIn</span><span class="p">(</span><span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">150</span><span class="p">,</span> <span class="mi">200</span><span class="p">]);</span>

<span class="nv">$filtered</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="cm">/*</span>
<span class="cm">    [</span>
<span class="cm">        [&#39;product&#39; =&gt; &#39;Bookcase&#39;, &#39;price&#39; =&gt; 150],</span>
<span class="cm">        [&#39;product&#39; =&gt; &#39;Desk&#39;, &#39;price&#39; =&gt; 200],</span>
<span class="cm">    ]</span>
<span class="cm">*/</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">whereIn</span></code> 方法在检查项目值时使用「宽松」比较，意味着具有整数值的字符串将被视为等于相同值的整数。你可以使用 <code class="docutils literal"><span class="pre">whereInStrict</span></code> 做「严格」比较。</p>
</div>
<div class="section" id="whereinstrict">
<h5>39.5.1.1.4. whereInStrict<a class="headerlink" href="#whereinstrict" title="永久链接至标题">¶</a></h5>
<p>此方法的使用和 <code class="docutils literal"><span class="pre">whereIn</span></code> 方法类似，只是使用了「严格」比较来匹配所有值。</p>
</div>
<div class="section" id="wherenotin">
<h5>39.5.1.1.5. whereNotIn<a class="headerlink" href="#wherenotin" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">whereNotIn</span></code> 通过集合中不包含的给定键值对进行：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span>
    <span class="p">[</span><span class="s1">&#39;product&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Desk&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">200</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;product&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Chair&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;product&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Bookcase&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">150</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;product&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Door&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="p">],</span>
<span class="p">]);</span>

<span class="nv">$filtered</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">whereNotIn</span><span class="p">(</span><span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">150</span><span class="p">,</span> <span class="mi">200</span><span class="p">]);</span>

<span class="nv">$filtered</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="cm">/*</span>
<span class="cm">    [</span>
<span class="cm">        [&#39;product&#39; =&gt; &#39;Chair&#39;, &#39;price&#39; =&gt; 100],</span>
<span class="cm">        [&#39;product&#39; =&gt; &#39;Door&#39;, &#39;price&#39; =&gt; 100],</span>
<span class="cm">    ]</span>
<span class="cm">*/</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">whereNotIn</span></code> 方法在检查项目值时使用「宽松」比较，意味着具有整数值的字符串将被视为等于相同值的整数。你可以使用 <code class="docutils literal"><span class="pre">whereNotInStrict</span></code> 做比较 严格 的匹配。</p>
</div>
<div class="section" id="wherenotinstrict">
<h5>39.5.1.1.6. whereNotInStrict<a class="headerlink" href="#wherenotinstrict" title="永久链接至标题">¶</a></h5>
<p>此方法的使用和 <code class="docutils literal"><span class="pre">whereNotIn</span></code> 方法类似，只是使用了「严格」比较来匹配所有值。</p>
</div>
<div class="section" id="first">
<h5>39.5.1.1.7. first<a class="headerlink" href="#first" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">first</span></code> 方法返回集合中通过给定真实测试的第一个元素：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">first</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$key</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$value</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">});</span>

<span class="c1">// 3</span>
</pre></div>
</div>
<p>你也可以不传入参数使用 <code class="docutils literal"><span class="pre">first</span></code> 方法以获取集合中第一个元素。如果集合是空的，则会返回 <code class="docutils literal"><span class="pre">null</span></code> ：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">first</span><span class="p">();</span>

<span class="c1">// 1</span>
</pre></div>
</div>
</div>
<div class="section" id="firstwhere">
<h5>39.5.1.1.8. firstWhere<a class="headerlink" href="#firstwhere" title="永久链接至标题">¶</a></h5>
</div>
</div>
<div class="section" id="search">
<h4>39.5.1.2. search<a class="headerlink" href="#search" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">search</span></code> 方法搜索给定的值并返回它的键。如果找不到，则返回 <code class="docutils literal"><span class="pre">false</span></code> ：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">]);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">search</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>

<span class="c1">// 1</span>
</pre></div>
</div>
<p>搜索使用「宽松」比较完成，这意味着具有整数值的字符串会被认为等于相同值的整数。要使用「严格」比较，就传入 true 作为该方法的第二个参数：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">search</span><span class="p">(</span><span class="s1">&#39;4&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>

<span class="c1">// false</span>
</pre></div>
</div>
<p>另外，你可以通过回调来搜索第一个通过真实测试的项目：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">search</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$item</span><span class="p">,</span> <span class="nv">$key</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$item</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">;</span>
<span class="p">});</span>

<span class="c1">// 2</span>
</pre></div>
</div>
</div>
<div class="section" id="filter">
<h4>39.5.1.3. filter<a class="headerlink" href="#filter" title="永久链接至标题">¶</a></h4>
<p>使用 <code class="docutils literal"><span class="pre">filter()</span></code> 方法来过滤集合。需要传入一个回调函数来过滤。</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="x">$users = User::all();</span>
<span class="x">$youngsters = $users-&gt;filter(function ($value, $key) {</span>
<span class="x">    return $value-&gt;age &lt; 35;</span>
<span class="x">});</span>

<span class="x">$youngsters-&gt;all(); // 返回数组</span>
<span class="x">//list of all users that are below the age of 35</span>
</pre></div>
</div>
<p>回调函数接受键和值作为参数。</p>
<p>如果没有提供回调函数，集合中所有返回 <code class="docutils literal"><span class="pre">false</span></code> 的元素都会被移除：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="k">false</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[]]);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">filter</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [1, 2, 3]</span>
</pre></div>
</div>
<p>与 <code class="docutils literal"><span class="pre">filter</span></code> 相反的方法，可以查看 <a class="reference internal" href="#reject">reject</a> 。</p>
</div>
<div class="section" id="reject">
<h4>39.5.1.4. reject<a class="headerlink" href="#reject" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">reject</span></code> 方法使用指定的回调过滤集合。如果回调返回 <code class="docutils literal"><span class="pre">true</span></code> ，就会把对应的项目从集合中移除：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]);</span>

<span class="nv">$filtered</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">reject</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$key</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$value</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">});</span>

<span class="nv">$filtered</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [1, 2]</span>
</pre></div>
</div>
<p>与 <code class="docutils literal"><span class="pre">reject</span></code> 相反的方法，查看 <a class="reference internal" href="#filter">filter</a> 。</p>
</div>
<div class="section" id="last">
<h4>39.5.1.5. last<a class="headerlink" href="#last" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">last</span></code> 方法返回集合中通过给定测试的最后一个元素：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">last</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$key</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$value</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">});</span>

<span class="c1">// 2</span>
</pre></div>
</div>
<p>你也可以不传入参数调用 <code class="docutils literal"><span class="pre">last</span></code> 方法来获取集合中最后一个元素。如果集合是空的，返回 <code class="docutils literal"><span class="pre">null</span></code> ：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">last</span><span class="p">();</span>

<span class="c1">// 4</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id10">
<h3>39.5.2. 判断类<a class="headerlink" href="#id10" title="永久链接至标题">¶</a></h3>
<div class="section" id="contains">
<h4>39.5.2.1. contains<a class="headerlink" href="#contains" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">contains</span></code> 方法判断集合是否包含给定的项目：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Desk&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="p">]);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">contains</span><span class="p">(</span><span class="s1">&#39;Desk&#39;</span><span class="p">);</span>

<span class="c1">// true</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">contains</span><span class="p">(</span><span class="s1">&#39;New York&#39;</span><span class="p">);</span>

<span class="c1">// false</span>
</pre></div>
</div>
<p>你也可以用 <code class="docutils literal"><span class="pre">contains</span></code> 方法匹配一对键/值，即判断给定的配对是否存在于集合中：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span>
    <span class="p">[</span><span class="s1">&#39;product&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Desk&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">200</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;product&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Chair&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="p">],</span>
<span class="p">]);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">contains</span><span class="p">(</span><span class="s1">&#39;product&#39;</span><span class="p">,</span> <span class="s1">&#39;Bookcase&#39;</span><span class="p">);</span>

<span class="c1">// false</span>
</pre></div>
</div>
<p>最后，你也可以传递一个回调到 <code class="docutils literal"><span class="pre">contains</span></code> 方法来执行自己的测试：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">contains</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$key</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$value</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">;</span>
<span class="p">});</span>

<span class="c1">// false</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">contains</span></code> 方法在检查项目值时使用「宽松」比较，意味着具有整数值的字符串将被视为等于相同值的整数。 相反 <code class="docutils literal"><span class="pre">containsStrict</span></code> 方法则是使用「严格」比较进行过滤。</p>
<div class="section" id="containsstrict">
<h5>39.5.2.1.1. containsStrict<a class="headerlink" href="#containsstrict" title="永久链接至标题">¶</a></h5>
<p>此方法和 <code class="docutils literal"><span class="pre">contains</span></code> 方法类似，但是它却是使用了「严格」比较来比较所有值。</p>
</div>
</div>
<div class="section" id="has">
<h4>39.5.2.2. has<a class="headerlink" href="#has" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">has</span></code> 方法判断集合中是否存在给定的键：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="s1">&#39;account_id&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;product&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Desk&#39;</span><span class="p">]);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">has</span><span class="p">(</span><span class="s1">&#39;product&#39;</span><span class="p">);</span>

<span class="c1">// true</span>
</pre></div>
</div>
</div>
<div class="section" id="every">
<h4>39.5.2.3. every<a class="headerlink" href="#every" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">every</span></code> 方法可用于验证集合中每一个元素都通过给定的测试：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">every</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$key</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$value</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">});</span>

<span class="c1">// false</span>
</pre></div>
</div>
</div>
<div class="section" id="isempty">
<h4>39.5.2.4. isEmpty<a class="headerlink" href="#isempty" title="永久链接至标题">¶</a></h4>
<p>如果集合是空的， <code class="docutils literal"><span class="pre">isEmpty</span></code> 方法返回 <code class="docutils literal"><span class="pre">true</span></code> ，否则返回 <code class="docutils literal"><span class="pre">false</span></code> ：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nx">collect</span><span class="p">([])</span><span class="o">-&gt;</span><span class="na">isEmpty</span><span class="p">();</span>

<span class="c1">// true</span>
</pre></div>
</div>
</div>
<div class="section" id="isnotempty">
<h4>39.5.2.5. isNotEmpty<a class="headerlink" href="#isnotempty" title="永久链接至标题">¶</a></h4>
<p>如果集合不是空的， <code class="docutils literal"><span class="pre">isNotEmpty</span></code> 方法会返回 <code class="docutils literal"><span class="pre">true</span></code> ：否则返回 <code class="docutils literal"><span class="pre">false</span></code> ：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nx">collect</span><span class="p">([])</span><span class="o">-&gt;</span><span class="na">isNotEmpty</span><span class="p">();</span>

<span class="c1">// false</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id11">
<h3>39.5.3. 排序类<a class="headerlink" href="#id11" title="永久链接至标题">¶</a></h3>
<div class="section" id="sort">
<h4>39.5.3.1. sort<a class="headerlink" href="#sort" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">sort</span></code> 方法对集合进行排序。排序后的集合保留着原数组的键，所以在这个例子中我们使用 <code class="docutils literal"><span class="pre">values</span></code> 方法来把键重置为连续编号的索引。</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]);</span>

<span class="nv">$sorted</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">sort</span><span class="p">();</span>

<span class="nv">$sorted</span><span class="o">-&gt;</span><span class="na">values</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [1, 2, 3, 4, 5]</span>
</pre></div>
</div>
<p>如果你有更高级的排序需求，你可以传入回调来用你自己的算法进行排序。请参阅 <code class="docutils literal"><span class="pre">PHP</span></code> 文档的 <code class="docutils literal"><span class="pre">usort</span></code> ，这是集合的 <code class="docutils literal"><span class="pre">sort</span></code> 方法在底层所调用的。</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">如果要对嵌套数组或对象的集合进行排序，参考 <code class="docutils literal"><span class="pre">sortBy</span></code> 和 <code class="docutils literal"><span class="pre">sortByDesc</span></code> 方法。</p>
</div>
</div>
<div class="section" id="sortby">
<h4>39.5.3.2. sortBy<a class="headerlink" href="#sortby" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">sortBy</span></code> 方法以给定的键对集合进行排序。排序后的集合保留了原数组键，所以在这个例子中，我们使用 <code class="docutils literal"><span class="pre">values</span></code> 方法将键重置为连续编号的索引：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span>
    <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Desk&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">200</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Chair&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Bookcase&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">150</span><span class="p">],</span>
<span class="p">]);</span>

<span class="nv">$sorted</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">sortBy</span><span class="p">(</span><span class="s1">&#39;price&#39;</span><span class="p">);</span>

<span class="nv">$sorted</span><span class="o">-&gt;</span><span class="na">values</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="cm">/*</span>
<span class="cm">    [</span>
<span class="cm">        [&#39;name&#39; =&gt; &#39;Chair&#39;, &#39;price&#39; =&gt; 100],</span>
<span class="cm">        [&#39;name&#39; =&gt; &#39;Bookcase&#39;, &#39;price&#39; =&gt; 150],</span>
<span class="cm">        [&#39;name&#39; =&gt; &#39;Desk&#39;, &#39;price&#39; =&gt; 200],</span>
<span class="cm">    ]</span>
<span class="cm">*/</span>
</pre></div>
</div>
<p>你还可以传入自己的回调以决定如何对集合的值进行排序：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span>
    <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Desk&#39;</span><span class="p">,</span> <span class="s1">&#39;colors&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;Black&#39;</span><span class="p">,</span> <span class="s1">&#39;Mahogany&#39;</span><span class="p">]],</span>
    <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Chair&#39;</span><span class="p">,</span> <span class="s1">&#39;colors&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;Black&#39;</span><span class="p">]],</span>
    <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Bookcase&#39;</span><span class="p">,</span> <span class="s1">&#39;colors&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;Red&#39;</span><span class="p">,</span> <span class="s1">&#39;Beige&#39;</span><span class="p">,</span> <span class="s1">&#39;Brown&#39;</span><span class="p">]],</span>
<span class="p">]);</span>

<span class="nv">$sorted</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">sortBy</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$product</span><span class="p">,</span> <span class="nv">$key</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$product</span><span class="p">[</span><span class="s1">&#39;colors&#39;</span><span class="p">]);</span>
<span class="p">});</span>

<span class="nv">$sorted</span><span class="o">-&gt;</span><span class="na">values</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="cm">/*</span>
<span class="cm">    [</span>
<span class="cm">        [&#39;name&#39; =&gt; &#39;Chair&#39;, &#39;colors&#39; =&gt; [&#39;Black&#39;]],</span>
<span class="cm">        [&#39;name&#39; =&gt; &#39;Desk&#39;, &#39;colors&#39; =&gt; [&#39;Black&#39;, &#39;Mahogany&#39;]],</span>
<span class="cm">        [&#39;name&#39; =&gt; &#39;Bookcase&#39;, &#39;colors&#39; =&gt; [&#39;Red&#39;, &#39;Beige&#39;, &#39;Brown&#39;]],</span>
<span class="cm">    ]</span>
<span class="cm">*/</span>
</pre></div>
</div>
</div>
<div class="section" id="sortbydesc">
<h4>39.5.3.3. sortByDesc<a class="headerlink" href="#sortbydesc" title="永久链接至标题">¶</a></h4>
<p>这个方法与 <code class="docutils literal"><span class="pre">sortBy</span></code> 方法一样，但是会以相反的顺序来对集合进行排序。</p>
<p>排序方法接受一个键或者回调函数作为参数来排序集合。</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
    <span class="nv">$users</span>  <span class="o">=</span> <span class="nx">User</span><span class="o">::</span><span class="na">all</span><span class="p">();</span>

    <span class="nv">$youngestToOldest</span> <span class="o">=</span> <span class="nv">$users</span><span class="o">-&gt;</span><span class="na">sortBy</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">);</span>
    <span class="nv">$youngestToOldest</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
    <span class="c1">//list of all users from youngest to oldest</span>

    <span class="nv">$movies</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span>
        <span class="p">[</span>
            <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Back To The Future&#39;</span><span class="p">,</span>
            <span class="s1">&#39;releases&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">1985</span><span class="p">,</span> <span class="mi">1989</span><span class="p">,</span> <span class="mi">1990</span><span class="p">]</span>
        <span class="p">],</span>
        <span class="p">[</span>
            <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Fast and Furious&#39;</span><span class="p">,</span>
            <span class="s1">&#39;releases&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">2001</span><span class="p">,</span> <span class="mi">2003</span><span class="p">,</span> <span class="mi">2006</span><span class="p">,</span> <span class="mi">2009</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2013</span><span class="p">,</span> <span class="mi">2015</span><span class="p">,</span> <span class="mi">2017</span><span class="p">]</span>
        <span class="p">],</span>
        <span class="p">[</span>
            <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Speed&#39;</span><span class="p">,</span>
            <span class="s1">&#39;releases&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">1994</span><span class="p">]</span>
        <span class="p">]</span>
    <span class="p">]);</span>

    <span class="nv">$mostReleases</span> <span class="o">=</span> <span class="nv">$movies</span><span class="o">-&gt;</span><span class="na">sortByDesc</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$movie</span><span class="p">,</span> <span class="nv">$key</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$movie</span><span class="p">[</span><span class="s1">&#39;releases&#39;</span><span class="p">]);</span>
    <span class="p">});</span>

    <span class="nv">$mostReleases</span><span class="o">-&gt;</span><span class="na">toArray</span><span class="p">();</span>
    <span class="c1">//list of movies in descending order of most releases.</span>

    <span class="nx">dd</span><span class="p">(</span><span class="nv">$mostReleases</span><span class="o">-&gt;</span><span class="na">values</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">toArray</span><span class="p">());</span>
    <span class="cm">/*</span>
<span class="cm">        list of movies in descending order of most releases</span>
<span class="cm">        but with the key values reset</span>
<span class="cm">    */</span>
</pre></div>
</div>
<p>排序方法为每个值维护键。 虽然这可能对您的应用程序很重要，但可以通过链式 <code class="docutils literal"><span class="pre">values()</span></code> 方法将它们重置为默认的基于零的增量值。</p>
<p>和往常一样，我还引入了一个新的集合方法 <code class="docutils literal"><span class="pre">toArray()</span></code> ，它将集合简单地转换为数组。</p>
</div>
<div class="section" id="reverse">
<h4>39.5.3.4. reverse<a class="headerlink" href="#reverse" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">reverse</span></code> 方法倒转集合中项目的顺序：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span>

<span class="nv">$reversed</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">reverse</span><span class="p">();</span>

<span class="nv">$reversed</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [5, 4, 3, 2, 1]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id12">
<h3>39.5.4. 重组类<a class="headerlink" href="#id12" title="永久链接至标题">¶</a></h3>
<div class="section" id="id13">
<h4>39.5.4.1. 拆分集合<a class="headerlink" href="#id13" title="永久链接至标题">¶</a></h4>
<div class="section" id="chunk">
<h5>39.5.4.1.1. chunk<a class="headerlink" href="#chunk" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">chunk</span></code> 方法将集合拆成多个指定大小的小集合：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]);</span>

<span class="nv">$chunks</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">chunk</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>

<span class="nv">$chunks</span><span class="o">-&gt;</span><span class="na">toArray</span><span class="p">();</span>

<span class="c1">// [[1, 2, 3, 4], [5, 6, 7]]</span>
</pre></div>
</div>
</div>
<div class="section" id="partition">
<h5>39.5.4.1.2. partition<a class="headerlink" href="#partition" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">partition</span></code> 方法可以和 <code class="docutils literal"><span class="pre">PHP</span></code> 中的 <code class="docutils literal"><span class="pre">list</span></code> 方法结合使用，来分开满足指定条件的元素以及那些不满足指定条件的元素：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]);</span>

<span class="k">list</span><span class="p">(</span><span class="nv">$underThree</span><span class="p">,</span> <span class="nv">$aboveThree</span><span class="p">)</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">partition</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$i</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="groupby">
<h5>39.5.4.1.3. groupBy<a class="headerlink" href="#groupby" title="永久链接至标题">¶</a></h5>
<p>分组集合有助于组织数据。 <code class="docutils literal"><span class="pre">groupBy</span></code> 方法采用键或回调函数，并根据键值或返回的回调值返回分组集合。</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
    <span class="nv">$movies</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span>
        <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Back To the Future&#39;</span><span class="p">,</span> <span class="s1">&#39;genre&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;scifi&#39;</span><span class="p">,</span> <span class="s1">&#39;rating&#39;</span> <span class="o">=&gt;</span> <span class="mi">8</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;The Matrix&#39;</span><span class="p">,</span>  <span class="s1">&#39;genre&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;fantasy&#39;</span><span class="p">,</span> <span class="s1">&#39;rating&#39;</span> <span class="o">=&gt;</span> <span class="mi">9</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;The Croods&#39;</span><span class="p">,</span>  <span class="s1">&#39;genre&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;animation&#39;</span><span class="p">,</span> <span class="s1">&#39;rating&#39;</span> <span class="o">=&gt;</span> <span class="mi">8</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Zootopia&#39;</span><span class="p">,</span>  <span class="s1">&#39;genre&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;animation&#39;</span><span class="p">,</span> <span class="s1">&#39;rating&#39;</span> <span class="o">=&gt;</span> <span class="mi">4</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;The Jungle Book&#39;</span><span class="p">,</span>  <span class="s1">&#39;genre&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;fantasy&#39;</span><span class="p">,</span> <span class="s1">&#39;rating&#39;</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">],</span>
    <span class="p">]);</span>

    <span class="nv">$genre</span> <span class="o">=</span> <span class="nv">$movies</span><span class="o">-&gt;</span><span class="na">groupBy</span><span class="p">(</span><span class="s1">&#39;genre&#39;</span><span class="p">);</span>
    <span class="cm">/*</span>
<span class="cm">    [</span>
<span class="cm">         &quot;scifi&quot; =&gt; [</span>
<span class="cm">           [&quot;name&quot; =&gt; &quot;Back To the Future&quot;, &quot;genre&quot; =&gt; &quot;scifi&quot;, &quot;rating&quot; =&gt; 8,],</span>
<span class="cm">         ],</span>
<span class="cm">         &quot;fantasy&quot; =&gt; [</span>
<span class="cm">           [&quot;name&quot; =&gt; &quot;The Matrix&quot;, &quot;genre&quot; =&gt; &quot;fantasy&quot;, &quot;rating&quot; =&gt; 9,],</span>
<span class="cm">           [&quot;name&quot; =&gt; &quot;The Jungle Book&quot;, &quot;genre&quot; =&gt; &quot;fantasy&quot;, &quot;rating&quot; =&gt; 5, ],</span>
<span class="cm">         ],</span>
<span class="cm">         &quot;animation&quot; =&gt; [</span>
<span class="cm">           [&quot;name&quot; =&gt; &quot;The Croods&quot;, &quot;genre&quot; =&gt; &quot;animation&quot;, &quot;rating&quot; =&gt; 8,],</span>
<span class="cm">           [&quot;name&quot; =&gt; &quot;Zootopia&quot;, &quot;genre&quot; =&gt; &quot;animation&quot;, &quot;rating&quot; =&gt; 4, ],</span>
<span class="cm">         ],</span>
<span class="cm">    ]</span>
<span class="cm">    */</span>

    <span class="nv">$rating</span> <span class="o">=</span> <span class="nv">$movies</span><span class="o">-&gt;</span><span class="na">groupBy</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$movie</span><span class="p">,</span> <span class="nv">$key</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$movie</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">];</span>
    <span class="p">});</span>

    <span class="cm">/*</span>
<span class="cm">    [</span>
<span class="cm">       8 =&gt; [</span>
<span class="cm">         [&quot;name&quot; =&gt; &quot;Back To the Future&quot;, &quot;genre&quot; =&gt; &quot;scifi&quot;, &quot;rating&quot; =&gt; 8,],</span>
<span class="cm">         [&quot;name&quot; =&gt; &quot;The Croods&quot;, &quot;genre&quot; =&gt; &quot;animation&quot;, &quot;rating&quot; =&gt; 8,],</span>
<span class="cm">       ],</span>
<span class="cm">       9 =&gt; [</span>
<span class="cm">         [&quot;name&quot; =&gt; &quot;The Matrix&quot;, &quot;genre&quot; =&gt; &quot;fantasy&quot;, &quot;rating&quot; =&gt; 9,],</span>
<span class="cm">       ],</span>
<span class="cm">       4 =&gt; [</span>
<span class="cm">         [&quot;name&quot; =&gt; &quot;Zootopia&quot;,&quot;genre&quot; =&gt; &quot;animation&quot;, &quot;rating&quot; =&gt; 4,],</span>
<span class="cm">       ],</span>
<span class="cm">       5 =&gt; [</span>
<span class="cm">         [&quot;name&quot; =&gt; &quot;The Jungle Book&quot;,&quot;genre&quot; =&gt; &quot;fantasy&quot;,&quot;rating&quot; =&gt; 5,],</span>
<span class="cm">       ],</span>
<span class="cm">    ]</span>
<span class="cm">   */</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id14">
<h4>39.5.4.2. 迭代集合<a class="headerlink" href="#id14" title="永久链接至标题">¶</a></h4>
<div class="section" id="each">
<h5>39.5.4.2.1. each<a class="headerlink" href="#each" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">each</span></code> 方法将迭代集合中的内容并将其传递到回调函数中：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">each</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$item</span><span class="p">,</span> <span class="nv">$key</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//</span>
<span class="p">});</span>
</pre></div>
</div>
<p>如果你想要中断对内容的迭代，那就从回调中返回 <code class="docutils literal"><span class="pre">false</span></code> ：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">each</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$item</span><span class="p">,</span> <span class="nv">$key</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="cm">/* some condition */</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="eachspread">
<h5>39.5.4.2.2. eachSpread<a class="headerlink" href="#eachspread" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">eachSpread</span></code> 方法迭代集合的项目，将每个嵌套项目值传递给给定的回调：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([[</span><span class="s1">&#39;John Doe&#39;</span><span class="p">,</span> <span class="mi">35</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Jane Doe&#39;</span><span class="p">,</span> <span class="mi">33</span><span class="p">]]);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">eachSpread</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="nv">$age</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//</span>
<span class="p">});</span>
</pre></div>
</div>
<p>您可以通过从回调中返回 <code class="docutils literal"><span class="pre">false</span></code> 来停止迭代项目：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">eachSpread</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="nv">$age</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="transform">
<h5>39.5.4.2.3. transform<a class="headerlink" href="#transform" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">transform</span></code> 方法迭代集合并对集合内的每个项目调用给定的回调。而集合的内容也会被回调返回的值取代：</p>
<p><strong>该方法会修改集合本身的值。</strong></p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span>
<span class="c1">// 回调函数传入项目和对应的键</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">transform</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$item</span><span class="p">,</span> <span class="nv">$key</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$item</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">});</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [2, 4, 6, 8, 10]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">与大多数集合的方法不同， <code class="docutils literal"><span class="pre">transform</span></code> 会修改集合本身。如果你想创建新的集合，就改用 <code class="docutils literal"><span class="pre">map</span></code> 方法。</p>
</div>
</div>
<div class="section" id="map">
<h5>39.5.4.2.4. map类<a class="headerlink" href="#map" title="永久链接至标题">¶</a></h5>
<div class="section" id="id15">
<h6>39.5.4.2.4.1. map<a class="headerlink" href="#id15" title="永久链接至标题">¶</a></h6>
<p><code class="docutils literal"><span class="pre">map</span></code> 方法遍历集合并将每一个值传入给定的回调。该回调可以任意修改项目并返回，从而形成新的被修改过项目的集合：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span>

<span class="nv">$multiplied</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">map</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$item</span><span class="p">,</span> <span class="nv">$key</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$item</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">});</span>

<span class="nv">$multiplied</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [2, 4, 6, 8, 10]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">像其它的集合方法一样， <code class="docutils literal"><span class="pre">map</span></code> 方法会返回一个新的集合实例；它不会修改它所调用的集合。如果你想改变原集合，请使用 <code class="docutils literal"><span class="pre">transform</span></code> 方法。</p>
</div>
</div>
<div class="section" id="mapspread">
<h6>39.5.4.2.4.2. mapSpread<a class="headerlink" href="#mapspread" title="永久链接至标题">¶</a></h6>
<p><code class="docutils literal"><span class="pre">mapSpread</span></code> 方法可以迭代集合的项目(就是说，里面的项目是集合)，将每个嵌套项目值传递给给定的回调函数。 该回调可以自由修改该项目并将其返回，从而形成一个新的修改项目集合：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$chunks</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">chunk</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="c1">// 回调函数的参数是当前块内的元素以及当前块索引值</span>
<span class="nv">$sequence</span> <span class="o">=</span> <span class="nv">$chunks</span><span class="o">-&gt;</span><span class="na">mapSpread</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$odd</span><span class="p">,</span> <span class="nv">$even</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$parms</span> <span class="o">=</span> <span class="nb">func_get_args</span><span class="p">();</span> <span class="c1">// 参数数组</span>
    <span class="nv">$numargs</span>  <span class="o">=</span>  <span class="nb">func_num_args</span> <span class="p">();</span> <span class="c1">// 参数个数</span>
    <span class="nv">$key</span> <span class="o">=</span> <span class="nb">func_get_arg</span><span class="p">(</span><span class="nv">$numargs</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// 获取当前块的索引值</span>
    <span class="nv">$chunk</span> <span class="o">=</span> <span class="nb">array_slice</span><span class="p">(</span><span class="nv">$parms</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$numargs</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s1">&#39;chunk:&#39;</span><span class="o">.</span><span class="nb">implode</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="nv">$chunk</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39;，index:&#39;</span><span class="o">.</span><span class="nv">$key</span><span class="o">.</span><span class="nx">PHP_EOL</span><span class="p">;</span>
    <span class="k">return</span> <span class="nv">$odd</span> <span class="o">+</span> <span class="nv">$even</span><span class="p">;</span>
<span class="p">});</span>

<span class="nv">$sequence</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span> <span class="c1">// // [1, 5, 9, 13, 17]</span>
</pre></div>
</div>
</div>
<div class="section" id="maptodictionary">
<h6>39.5.4.2.4.3. mapToDictionary<a class="headerlink" href="#maptodictionary" title="永久链接至标题">¶</a></h6>
<p><code class="docutils literal"><span class="pre">mapToDictionary</span></code> 方法通过给定的回调对集合的项目进行分组。 该回调应该返回一个包含单个键/值对的关联数组，从而形成一个新的集合。这个和 <code class="docutils literal"><span class="pre">mapToGroups</span></code> 区别是，该函数返回的集合内部项是数组对象，而不是集合对象。如果需要集合对象请使用 <code class="docutils literal"><span class="pre">mapToGroups</span></code> 函数。</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span>
    <span class="p">[</span>
        <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;John Doe&#39;</span><span class="p">,</span>
        <span class="s1">&#39;department&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Sales&#39;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="p">[</span>
        <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Jane Doe&#39;</span><span class="p">,</span>
        <span class="s1">&#39;department&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Sales&#39;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="p">[</span>
        <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Johnny Doe&#39;</span><span class="p">,</span>
        <span class="s1">&#39;department&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Marketing&#39;</span><span class="p">,</span>
    <span class="p">]</span>
<span class="p">]);</span>
<span class="c1">// 回调函数传入集合项，和当前集合项的索引</span>
<span class="nv">$grouped</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">mapToDictionary</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$item</span><span class="p">,</span> <span class="nv">$key</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="nv">$item</span><span class="p">[</span><span class="s1">&#39;department&#39;</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]];</span>
<span class="p">});</span>

<span class="nv">$grouped</span><span class="o">-&gt;</span><span class="na">toArray</span><span class="p">();</span> <span class="c1">// 转换为数组</span>

<span class="cm">/*</span>
<span class="cm">    [</span>
<span class="cm">        &#39;Sales&#39; =&gt; [&#39;John Doe&#39;, &#39;Jane Doe&#39;],</span>
<span class="cm">        &#39;Marketing&#39; =&gt; [&#39;Johhny Doe&#39;],</span>
<span class="cm">    ]</span>
<span class="cm">*/</span>

<span class="nv">$item</span> <span class="o">=</span> <span class="nv">$grouped</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;Sales&#39;</span><span class="p">)</span> <span class="c1">// [&#39;John Doe&#39;, &#39;Jane Doe&#39;]</span>

<span class="nv">$item</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span> <span class="c1">// 因为这里get()方法返回的对象是数组，不是集合对象，所以不能调用all()方法</span>
</pre></div>
</div>
</div>
<div class="section" id="maptogroups">
<h6>39.5.4.2.4.4. mapToGroups<a class="headerlink" href="#maptogroups" title="永久链接至标题">¶</a></h6>
<p><code class="docutils literal"><span class="pre">mapToGroups</span></code> 方法通过给定的回调对集合的项目进行分组。 该回调应该返回一个包含单个键/值对的关联数组，从而形成一个新的集合：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span>
    <span class="p">[</span>
        <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;John Doe&#39;</span><span class="p">,</span>
        <span class="s1">&#39;department&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Sales&#39;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="p">[</span>
        <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Jane Doe&#39;</span><span class="p">,</span>
        <span class="s1">&#39;department&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Sales&#39;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="p">[</span>
        <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Johnny Doe&#39;</span><span class="p">,</span>
        <span class="s1">&#39;department&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Marketing&#39;</span><span class="p">,</span>
    <span class="p">]</span>
<span class="p">]);</span>
<span class="c1">// 回调函数传入集合项，和当前集合项的索引</span>
<span class="nv">$grouped</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">mapToGroups</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$item</span><span class="p">,</span> <span class="nv">$key</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="nv">$item</span><span class="p">[</span><span class="s1">&#39;department&#39;</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]];</span>
<span class="p">});</span>

<span class="nv">$grouped</span><span class="o">-&gt;</span><span class="na">toArray</span><span class="p">();</span> <span class="c1">// 转换为数组</span>

<span class="cm">/*</span>
<span class="cm">    [</span>
<span class="cm">        &#39;Sales&#39; =&gt; [&#39;John Doe&#39;, &#39;Jane Doe&#39;],</span>
<span class="cm">        &#39;Marketing&#39; =&gt; [&#39;Johhny Doe&#39;],</span>
<span class="cm">    ]</span>
<span class="cm">*/</span>

<span class="nv">$grouped</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;Sales&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span> <span class="c1">// 获取指定键的值，并转换集合为数组</span>

<span class="c1">// [&#39;John Doe&#39;, &#39;Jane Doe&#39;]</span>
</pre></div>
</div>
</div>
<div class="section" id="mapwithkeys">
<h6>39.5.4.2.4.5. mapWithKeys<a class="headerlink" href="#mapwithkeys" title="永久链接至标题">¶</a></h6>
<p><code class="docutils literal"><span class="pre">mapWithKeys</span></code> 方法遍历集合并将每个值传入给定的回调。回调应该返回包含一个键值对的关联数组：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span>
    <span class="p">[</span>
        <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span>
        <span class="s1">&#39;department&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Sales&#39;</span><span class="p">,</span>
        <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;john@example.com&#39;</span>
    <span class="p">],</span>
    <span class="p">[</span>
        <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Jane&#39;</span><span class="p">,</span>
        <span class="s1">&#39;department&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Marketing&#39;</span><span class="p">,</span>
        <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;jane@example.com&#39;</span>
    <span class="p">]</span>
<span class="p">]);</span>

<span class="c1">// 回调函数接受项目值和项目索引，返回键值对</span>
<span class="nv">$keyed</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">mapWithKeys</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$item</span><span class="p">,</span> <span class="nv">$key</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="nv">$item</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]];</span>
<span class="p">});</span>

<span class="nv">$keyed</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="cm">/*</span>
<span class="cm">    [</span>
<span class="cm">        &#39;john@example.com&#39; =&gt; &#39;John&#39;,</span>
<span class="cm">        &#39;jane@example.com&#39; =&gt; &#39;Jane&#39;,</span>
<span class="cm">    ]</span>
<span class="cm">*/</span>
</pre></div>
</div>
</div>
<div class="section" id="flatmap">
<h6>39.5.4.2.4.6. flatMap<a class="headerlink" href="#flatmap" title="永久链接至标题">¶</a></h6>
<p><code class="docutils literal"><span class="pre">flatMap</span></code> 方法遍历集合并将其中的每个值传递到给定的回调。可以通过回调修改每个值的内容再返回出来，从而形成一个新的被修改过内容的集合。然后你就可以用 <code class="docutils literal"><span class="pre">all()</span></code> 打印修改后的数组：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span>
    <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Sally&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;school&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Arkansas&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;age&#39;</span> <span class="o">=&gt;</span> <span class="mi">28</span><span class="p">]</span>
<span class="p">]);</span>

<span class="c1">// 回调函数传入对应的项的值和键</span>
<span class="nv">$flattened</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">flatMap</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$values</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">array_map</span><span class="p">(</span><span class="s1">&#39;strtoupper&#39;</span><span class="p">,</span> <span class="nv">$values</span><span class="p">);</span> <span class="c1">// 对values中的值进行大写操作</span>
<span class="p">});</span>

<span class="nv">$flattened</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [&#39;name&#39; =&gt; &#39;SALLY&#39;, &#39;school&#39; =&gt; &#39;ARKANSAS&#39;, &#39;age&#39; =&gt; &#39;28&#39;];</span>
</pre></div>
</div>
</div>
<div class="section" id="flip">
<h6>39.5.4.2.4.7. flip<a class="headerlink" href="#flip" title="永久链接至标题">¶</a></h6>
<p><code class="docutils literal"><span class="pre">flip</span></code> 方法将集合中的键和对应的数值进行互换：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;taylor&#39;</span><span class="p">,</span> <span class="s1">&#39;framework&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;laravel&#39;</span><span class="p">]);</span>

<span class="nv">$flipped</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">flip</span><span class="p">();</span>

<span class="nv">$flipped</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [&#39;taylor&#39; =&gt; &#39;name&#39;, &#39;laravel&#39; =&gt; &#39;framework&#39;]</span>
</pre></div>
</div>
</div>
<div class="section" id="mapinto">
<h6>39.5.4.2.4.8. mapInto<a class="headerlink" href="#mapinto" title="永久链接至标题">¶</a></h6>
<p><code class="docutils literal"><span class="pre">mapInto()</span></code> 方法可以迭代集合，通过将值传递给构造函数来创建给定类的新实例：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">Currency</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Create a new currency instance.</span>
<span class="sd">     *</span>
<span class="sd">     * @param  string  $code</span>
<span class="sd">     * @return void</span>
<span class="sd">     */</span>
    <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$code</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">code</span> <span class="o">=</span> <span class="nv">$code</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="s1">&#39;USD&#39;</span><span class="p">,</span> <span class="s1">&#39;EUR&#39;</span><span class="p">,</span> <span class="s1">&#39;GBP&#39;</span><span class="p">]);</span>

<span class="nv">$currencies</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">mapInto</span><span class="p">(</span><span class="nx">Currency</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>

<span class="nv">$currencies</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [Currency(&#39;USD&#39;), Currency(&#39;EUR&#39;), Currency(&#39;GBP&#39;)]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="reduce">
<h5>39.5.4.2.5. reduce<a class="headerlink" href="#reduce" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">reduce</span></code> 方法将每次迭代的结果传递给下一次迭代直到集合减少为单个值：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]);</span>

<span class="c1">// 回调函数第一个参数为上一次计算结果，第一次该值为初始化值，第二个参数为当前迭代项</span>
<span class="nv">$total</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">reduce</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$carry</span><span class="p">,</span> <span class="nv">$item</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$parms</span> <span class="o">=</span> <span class="nb">func_get_args</span><span class="p">();</span> <span class="c1">// 参数数组</span>
    <span class="k">return</span> <span class="nv">$carry</span> <span class="o">+</span> <span class="nv">$item</span><span class="p">;</span>
<span class="p">},</span> <span class="mi">10</span><span class="p">);</span> <span class="c1">// 可以传入初始化值</span>

<span class="c1">// 16</span>
</pre></div>
</div>
</div>
<div class="section" id="pipe">
<h5>39.5.4.2.6. pipe<a class="headerlink" href="#pipe" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">pipe</span></code> 方法将集合传给给定的回调(作为回调的参数)并返回结果：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]);</span>

<span class="nv">$piped</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">pipe</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$collection</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">sum</span><span class="p">();</span>
<span class="p">});</span>

<span class="c1">// 6</span>
</pre></div>
</div>
</div>
<div class="section" id="flatten">
<h5>39.5.4.2.7. flatten<a class="headerlink" href="#flatten" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">flatten</span></code> 方法将多维集合转为一维的:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;taylor&#39;</span><span class="p">,</span> <span class="s1">&#39;languages&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;php&#39;</span><span class="p">,</span> <span class="s1">&#39;javascript&#39;</span><span class="p">]]);</span>

<span class="nv">$flattened</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">flatten</span><span class="p">();</span>

<span class="nv">$flattened</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [&#39;taylor&#39;, &#39;php&#39;, &#39;javascript&#39;];</span>
</pre></div>
</div>
<p>你还可以选择性地传入「深度」参数：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span>
    <span class="s1">&#39;Apple&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;iPhone 6S&#39;</span><span class="p">,</span> <span class="s1">&#39;brand&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Apple&#39;</span><span class="p">],</span>
    <span class="p">],</span>
    <span class="s1">&#39;Samsung&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Galaxy S7&#39;</span><span class="p">,</span> <span class="s1">&#39;brand&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Samsung&#39;</span><span class="p">]</span>
    <span class="p">],</span>
<span class="p">]);</span>

<span class="nv">$products</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">flatten</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="nv">$products</span><span class="o">-&gt;</span><span class="na">values</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="cm">/*</span>
<span class="cm">    [</span>
<span class="cm">        [&#39;name&#39; =&gt; &#39;iPhone 6S&#39;, &#39;brand&#39; =&gt; &#39;Apple&#39;],</span>
<span class="cm">        [&#39;name&#39; =&gt; &#39;Galaxy S7&#39;, &#39;brand&#39; =&gt; &#39;Samsung&#39;],</span>
<span class="cm">    ]</span>
<span class="cm">*/</span>
</pre></div>
</div>
<p>在这个例子里，调用 <code class="docutils literal"><span class="pre">flatten</span></code> 方法时不传入深度参数的话也会将嵌套数组转成一维的，然后返回 <code class="docutils literal"><span class="pre">['iPhone</span> <span class="pre">6S',</span> <span class="pre">'Apple',</span> <span class="pre">'Galaxy</span> <span class="pre">S7',</span> <span class="pre">'Samsung']</span></code> 。传入深度参数能让你限制设置返回数组的层数。</p>
</div>
</div>
<div class="section" id="id16">
<h4>39.5.4.3. 合并集合<a class="headerlink" href="#id16" title="永久链接至标题">¶</a></h4>
<div class="section" id="collapse">
<h5>39.5.4.3.1. collapse<a class="headerlink" href="#collapse" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">collapse</span></code> 方法将多个数组的集合合并成一个数组的集合：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]]);</span>

<span class="nv">$collapsed</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">collapse</span><span class="p">();</span>

<span class="nv">$collapsed</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [1, 2, 3, 4, 5, 6, 7, 8, 9]</span>
</pre></div>
</div>
</div>
<div class="section" id="combine">
<h5>39.5.4.3.2. combine<a class="headerlink" href="#combine" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">combine</span></code> 方法可以将一个集合的值作为「键」，再将另一个数组或者集合的值作为「值」合并成一个集合：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">]);</span>

<span class="nv">$combined</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">combine</span><span class="p">([</span><span class="s1">&#39;George&#39;</span><span class="p">,</span> <span class="mi">29</span><span class="p">]);</span>

<span class="nv">$combined</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [&#39;name&#39; =&gt; &#39;George&#39;, &#39;age&#39; =&gt; 29]</span>
</pre></div>
</div>
</div>
<div class="section" id="concat">
<h5>39.5.4.3.3. concat<a class="headerlink" href="#concat" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">concat</span></code> 方法将给定的 <code class="docutils literal"><span class="pre">array</span></code> 或集合值附加到集合的末尾：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="s1">&#39;John Doe&#39;</span><span class="p">]);</span>

<span class="nv">$concatenated</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">concat</span><span class="p">([</span><span class="s1">&#39;Jane Doe&#39;</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">concat</span><span class="p">([</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Johnny Doe&#39;</span><span class="p">]);</span>

<span class="nv">$concatenated</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [&#39;John Doe&#39;, &#39;Jane Doe&#39;, &#39;Johnny Doe&#39;]</span>
</pre></div>
</div>
</div>
<div class="section" id="merge">
<h5>39.5.4.3.4. merge<a class="headerlink" href="#merge" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">merge</span></code> 方法将给定数组或集合合并到原集合。如果给定项目中的字符串键与原集合中的字符串键匹配，给定的项目的值将会覆盖原集合中的值：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="s1">&#39;product_id&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="p">]);</span>

<span class="nv">$merged</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">merge</span><span class="p">([</span><span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">200</span><span class="p">,</span> <span class="s1">&#39;discount&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">]);</span>

<span class="nv">$merged</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [&#39;product_id&#39; =&gt; 1, &#39;price&#39; =&gt; 200, &#39;discount&#39; =&gt; false]</span>
</pre></div>
</div>
<p>如果给定的项目的键是数字，这些值将被追加到集合的末尾：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="s1">&#39;Desk&#39;</span><span class="p">,</span> <span class="s1">&#39;Chair&#39;</span><span class="p">]);</span>

<span class="nv">$merged</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">merge</span><span class="p">([</span><span class="s1">&#39;Bookcase&#39;</span><span class="p">,</span> <span class="s1">&#39;Door&#39;</span><span class="p">]);</span>

<span class="nv">$merged</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [&#39;Desk&#39;, &#39;Chair&#39;, &#39;Bookcase&#39;, &#39;Door&#39;]</span>
</pre></div>
</div>
</div>
<div class="section" id="zip">
<h5>39.5.4.3.5. zip<a class="headerlink" href="#zip" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">zip</span></code> 方法将给定数组的值与相应索引处的原集合的值合并在一起：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="s1">&#39;Chair&#39;</span><span class="p">,</span> <span class="s1">&#39;Desk&#39;</span><span class="p">]);</span>

<span class="nv">$zipped</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">zip</span><span class="p">([</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">]);</span>

<span class="nv">$zipped</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [[&#39;Chair&#39;, 100], [&#39;Desk&#39;, 200]]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id17">
<h4>39.5.4.4. 单集合操作<a class="headerlink" href="#id17" title="永久链接至标题">¶</a></h4>
<div class="section" id="when">
<h5>39.5.4.4.1. when<a class="headerlink" href="#when" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">when</span></code> 方法当传入的第一个参数为 <code class="docutils literal"><span class="pre">true</span></code> 的时候，将执行给定的回调：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">when</span><span class="p">(</span><span class="k">true</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$collection</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">push</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
<span class="p">});</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">when</span><span class="p">(</span><span class="k">false</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$collection</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">push</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="p">});</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [1, 2, 3, 4]</span>
</pre></div>
</div>
<p>和 <code class="docutils literal"><span class="pre">when</span></code> 方法相反，参考 <code class="docutils literal"><span class="pre">unless</span></code> 方法。</p>
</div>
<div class="section" id="unless">
<h5>39.5.4.4.2. unless<a class="headerlink" href="#unless" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">unless</span></code> 方法当传入的第一个参数不为 <code class="docutils literal"><span class="pre">true</span></code> 的时候，将执行给定的回调：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">unless</span><span class="p">(</span><span class="k">true</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$collection</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">push</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
<span class="p">});</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">unless</span><span class="p">(</span><span class="k">false</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$collection</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">push</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="p">});</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [1, 2, 3, 5]</span>
</pre></div>
</div>
<p>和 <code class="docutils literal"><span class="pre">unless</span></code> 方法相反，参考 <code class="docutils literal"><span class="pre">when</span></code> 方法。</p>
</div>
<div class="section" id="forget">
<h5>39.5.4.4.3. forget<a class="headerlink" href="#forget" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">forget</span></code> 方法通过给定的键来移除掉集合中对应的内容：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;taylor&#39;</span><span class="p">,</span> <span class="s1">&#39;framework&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;laravel&#39;</span><span class="p">]);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">forget</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [&#39;framework&#39; =&gt; &#39;laravel&#39;]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">与大多数集合的方法不同， <code class="docutils literal"><span class="pre">forget</span></code> 不会返回修改过后的新集合；它会直接修改原来的集合。</p>
</div>
</div>
<div class="section" id="put">
<h5>39.5.4.4.4. put<a class="headerlink" href="#put" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">put</span></code> 方法在集合内设置给定的键值对：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="s1">&#39;product_id&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Desk&#39;</span><span class="p">]);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">put</span><span class="p">(</span><span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [&#39;product_id&#39; =&gt; 1, &#39;name&#39; =&gt; &#39;Desk&#39;, &#39;price&#39; =&gt; 100]</span>
</pre></div>
</div>
</div>
<div class="section" id="implode">
<h5>39.5.4.4.5. implode<a class="headerlink" href="#implode" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">implode</span></code> 方法合并集合中的项目。其参数取决于集合中项目的类型。如果集合包含数组或对象，你应该传入你希望连接的属性的键，以及你希望放在值之间用来「拼接」的字符串：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span>
    <span class="p">[</span><span class="s1">&#39;account_id&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;product&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Desk&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;account_id&#39;</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;product&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Chair&#39;</span><span class="p">],</span>
<span class="p">]);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">implode</span><span class="p">(</span><span class="s1">&#39;product&#39;</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="p">);</span>

<span class="c1">// Desk, Chair</span>
</pre></div>
</div>
<p>如果集合包含简单的字符串或数值，只需要传入「拼接」用的字符串作为该方法的唯一参数即可：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">implode</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">);</span>

<span class="c1">// &#39;1-2-3-4-5&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="pad">
<h5>39.5.4.4.6. pad<a class="headerlink" href="#pad" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">pad</span></code> 方法将使用给定的值填充数组，直到数组达到指定的大小。 此方法的行为与 <code class="docutils literal"><span class="pre">array_pad</span></code> PHP 函数功能类似。</p>
<p>要填充到左侧，您应指定负号。如果给定大小的绝对值小于或等于数组的长度，则不会发生填充：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">]);</span>

<span class="nv">$filtered</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">pad</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="nv">$filtered</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, 0, 0]</span>

<span class="nv">$filtered</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">pad</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="nv">$filtered</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [0, 0, &#39;A&#39;, &#39;B&#39;, &#39;C&#39;]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id18">
<h4>39.5.4.5. 队列操作<a class="headerlink" href="#id18" title="永久链接至标题">¶</a></h4>
<div class="section" id="pop">
<h5>39.5.4.5.1. pop<a class="headerlink" href="#pop" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">pop</span></code> 方法移除并返回集合中的最后一个项目：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">pop</span><span class="p">();</span>

<span class="c1">// 5</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [1, 2, 3, 4]</span>
</pre></div>
</div>
</div>
<div class="section" id="shift">
<h5>39.5.4.5.2. shift<a class="headerlink" href="#shift" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">shift</span></code> 方法移除并返回集合的第一个项目：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">shift</span><span class="p">();</span>

<span class="c1">// 1</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [2, 3, 4, 5]</span>
</pre></div>
</div>
</div>
<div class="section" id="pull">
<h5>39.5.4.5.3. pull<a class="headerlink" href="#pull" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">pull</span></code> 方法把给定键对应的值从集合中移除并返回：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="s1">&#39;product_id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;prod-100&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Desk&#39;</span><span class="p">]);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">pull</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">);</span>

<span class="c1">// &#39;Desk&#39;</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [&#39;product_id&#39; =&gt; &#39;prod-100&#39;]</span>
</pre></div>
</div>
</div>
<div class="section" id="prepend">
<h5>39.5.4.5.4. prepend<a class="headerlink" href="#prepend" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">prepend</span></code> 方法将给定的值添加到集合的开头：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">prepend</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [0, 1, 2, 3, 4, 5]</span>
</pre></div>
</div>
<p>你也可以传递第二个参数来设置新增加项的键：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="s1">&#39;one&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">]);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">prepend</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;zero&#39;</span><span class="p">);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [&#39;zero&#39; =&gt; 0, &#39;one&#39; =&gt; 1, &#39;two&#39; =&gt; 2]</span>
</pre></div>
</div>
</div>
<div class="section" id="push">
<h5>39.5.4.5.5. push<a class="headerlink" href="#push" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">push</span></code> 方法把给定值添加到集合的末尾：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">push</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [1, 2, 3, 4, 5]</span>
</pre></div>
</div>
</div>
<div class="section" id="id19">
<h5>39.5.4.5.6. concat<a class="headerlink" href="#id19" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">concat</span></code> 方法将给定的 <code class="docutils literal"><span class="pre">array</span></code> 或集合值附加到集合的末尾：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="s1">&#39;John Doe&#39;</span><span class="p">]);</span>

<span class="nv">$concatenated</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">concat</span><span class="p">([</span><span class="s1">&#39;Jane Doe&#39;</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">concat</span><span class="p">([</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Johnny Doe&#39;</span><span class="p">]);</span>

<span class="nv">$concatenated</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [&#39;John Doe&#39;, &#39;Jane Doe&#39;, &#39;Johnny Doe&#39;]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="set">
<h4>39.5.4.6. Set操作<a class="headerlink" href="#set" title="永久链接至标题">¶</a></h4>
<p>集合类还提供了帮助我们处理数据集的方法。 这意味着我们可以比较两个数据集并基于此执行操作。</p>
<div class="section" id="union">
<h5>39.5.4.6.1. union(并集)<a class="headerlink" href="#union" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">union()</span></code> 方法用于把数组中的值添加到集合中。 如果集合中已存在一个值，则数组中的值将被忽略。</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
    <span class="nv">$coolPeople</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span>
        <span class="mi">1</span> <span class="o">=&gt;</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="mi">2</span> <span class="o">=&gt;</span> <span class="s1">&#39;James&#39;</span><span class="p">,</span> <span class="mi">3</span> <span class="o">=&gt;</span> <span class="s1">&#39;Jack&#39;</span>
    <span class="p">]);</span>

    <span class="nv">$allCoolPeople</span> <span class="o">=</span> <span class="nv">$coolPeople</span><span class="o">-&gt;</span><span class="na">union</span><span class="p">([</span>
        <span class="mi">4</span> <span class="o">=&gt;</span> <span class="s1">&#39;Sarah&#39;</span><span class="p">,</span> <span class="mi">1</span> <span class="o">=&gt;</span> <span class="s1">&#39;Susan&#39;</span><span class="p">,</span> <span class="mi">5</span> <span class="o">=&gt;</span><span class="s1">&#39;Seyi&#39;</span>
    <span class="p">]);</span>
    <span class="nv">$allCoolPeople</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
    <span class="cm">/*</span>
<span class="cm">    [</span>
<span class="cm">        1 =&gt; &quot;John&quot;, 2 =&gt; &quot;James&quot;, 3 =&gt; &quot;Jack&quot;, 4 =&gt; &quot;Sarah&quot;, 5 =&gt; &quot;Seyi&quot;,</span>
<span class="cm">   ]</span>
<span class="cm">   */</span>
</pre></div>
</div>
</div>
<div class="section" id="intersect">
<h5>39.5.4.6.2. intersect(交集)<a class="headerlink" href="#intersect" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">intersect()</span></code> 方法删除集合中不在传入数组或集合中的元素。</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
    <span class="nv">$coolPeople</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span>
        <span class="mi">1</span> <span class="o">=&gt;</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="mi">2</span> <span class="o">=&gt;</span> <span class="s1">&#39;James&#39;</span><span class="p">,</span> <span class="mi">3</span> <span class="o">=&gt;</span> <span class="s1">&#39;Jack&#39;</span>
    <span class="p">]);</span>

    <span class="nv">$veryCoolPeople</span> <span class="o">=</span> <span class="nv">$coolPeople</span><span class="o">-&gt;</span><span class="na">intersect</span><span class="p">([</span><span class="s1">&#39;Sarah&#39;</span><span class="p">,</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="s1">&#39;James&#39;</span><span class="p">]);</span>
    <span class="nv">$veryCoolPeople</span><span class="o">-&gt;</span><span class="na">toArray</span><span class="p">();</span>
    <span class="c1">//[1 =&gt; &quot;John&quot; 2 =&gt; &quot;James&quot;]</span>
</pre></div>
</div>
<p>您会注意到， <code class="docutils literal"><span class="pre">intersect</span></code> 方法保留返回值的键。</p>
<div class="section" id="intersectbykeys">
<h6>39.5.4.6.2.1. intersectByKeys<a class="headerlink" href="#intersectbykeys" title="永久链接至标题">¶</a></h6>
<p><code class="docutils literal"><span class="pre">intersectByKeys</span></code> 方法删除原集合中不存在于给定「数组」或集合中的任何键：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span>
    <span class="s1">&#39;serial&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;UX301&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;screen&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span> <span class="o">=&gt;</span> <span class="mi">2009</span>
<span class="p">]);</span>

<span class="nv">$intersect</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">intersectByKeys</span><span class="p">([</span>
    <span class="s1">&#39;reference&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;UX404&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;tab&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span> <span class="o">=&gt;</span> <span class="mi">2011</span>
<span class="p">]);</span>

<span class="nv">$intersect</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [&#39;type&#39; =&gt; &#39;screen&#39;, &#39;year&#39; =&gt; 2009]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="diff">
<h5>39.5.4.6.3. diff(差集)<a class="headerlink" href="#diff" title="永久链接至标题">¶</a></h5>
<div class="section" id="id20">
<h6>39.5.4.6.3.1. diff<a class="headerlink" href="#id20" title="永久链接至标题">¶</a></h6>
<p><code class="docutils literal"><span class="pre">diff</span></code> 方法将集合与其它集合或纯 <code class="docutils literal"><span class="pre">PHP</span></code> 数组进行 <strong>值</strong> 的比较，然后返回原集合中存在而给定集合中不存在的值：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span>

<span class="nv">$diff</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">diff</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">]);</span>

<span class="nv">$diff</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [1, 3, 5]</span>
</pre></div>
</div>
</div>
<div class="section" id="diffassoc">
<h6>39.5.4.6.3.2. diffAssoc<a class="headerlink" href="#diffassoc" title="永久链接至标题">¶</a></h6>
<p><code class="docutils literal"><span class="pre">diffAssoc</span></code> 该方法与另外一个集合或基于它的 <strong>键和值</strong> 的 <code class="docutils literal"><span class="pre">PHP</span></code> 数组进行比较。这个方法会返回原集合不存在于给定集合中的键值对 ：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span>
    <span class="s1">&#39;color&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span>
    <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;fruit&#39;</span><span class="p">,</span>
    <span class="s1">&#39;remain&#39;</span> <span class="o">=&gt;</span> <span class="mi">6</span>
<span class="p">]);</span>

<span class="nv">$diff</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">diffAssoc</span><span class="p">([</span>
    <span class="s1">&#39;color&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span>
    <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;fruit&#39;</span><span class="p">,</span>
    <span class="s1">&#39;remain&#39;</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s1">&#39;used&#39;</span> <span class="o">=&gt;</span> <span class="mi">6</span>
<span class="p">]);</span>

<span class="nv">$diff</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [&#39;color&#39; =&gt; &#39;orange&#39;, &#39;remain&#39; =&gt; 6]</span>
</pre></div>
</div>
</div>
<div class="section" id="diffkeys">
<h6>39.5.4.6.3.3. diffKeys<a class="headerlink" href="#diffkeys" title="永久链接至标题">¶</a></h6>
<p><code class="docutils literal"><span class="pre">diffKeys</span></code> 方法与另外一个集合或 <code class="docutils literal"><span class="pre">PHP</span></code> 数组的 <strong>键</strong> 进行比较，然后返回原集合中存在而给定的集合中不存在「键」所对应的键值对：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span>
    <span class="s1">&#39;one&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s1">&#39;two&#39;</span> <span class="o">=&gt;</span> <span class="mi">20</span><span class="p">,</span>
    <span class="s1">&#39;three&#39;</span> <span class="o">=&gt;</span> <span class="mi">30</span><span class="p">,</span>
    <span class="s1">&#39;four&#39;</span> <span class="o">=&gt;</span> <span class="mi">40</span><span class="p">,</span>
    <span class="s1">&#39;five&#39;</span> <span class="o">=&gt;</span> <span class="mi">50</span><span class="p">,</span>
<span class="p">]);</span>

<span class="nv">$diff</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">diffKeys</span><span class="p">([</span>
    <span class="s1">&#39;two&#39;</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s1">&#39;four&#39;</span> <span class="o">=&gt;</span> <span class="mi">4</span><span class="p">,</span>
    <span class="s1">&#39;six&#39;</span> <span class="o">=&gt;</span> <span class="mi">6</span><span class="p">,</span>
    <span class="s1">&#39;eight&#39;</span> <span class="o">=&gt;</span> <span class="mi">8</span><span class="p">,</span>
<span class="p">]);</span>

<span class="nv">$diff</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [&#39;one&#39; =&gt; 10, &#39;three&#39; =&gt; 30, &#39;five&#39; =&gt; 50]</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="id21">
<h3>39.5.5. 提取类<a class="headerlink" href="#id21" title="永久链接至标题">¶</a></h3>
<p>给定一个数据数组，然后生成一个集合，你可能想要得到它的一部分。 这可能是：</p>
<ul class="simple">
<li>前2个记录；</li>
<li>后2个记录；</li>
<li>除了第2组的所有记录；</li>
</ul>
<p>集合通过一些方法来帮助我们。</p>
<div class="section" id="unique">
<h4>39.5.5.1. unique<a class="headerlink" href="#unique" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">unique</span></code> 方法返回集合中所有唯一的项目。返回的集合保留着原数组的键，所以在这个例子中，我们使用 <code class="docutils literal"><span class="pre">values</span></code> 方法来把键重置为连续编号的索引。</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">]);</span>

<span class="nv">$unique</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">unique</span><span class="p">();</span>

<span class="nv">$unique</span><span class="o">-&gt;</span><span class="na">values</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [1, 2, 3, 4]</span>
</pre></div>
</div>
<p>处理嵌套数组或对象时，你可以指定用来决定唯一性的键：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span>
    <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;iPhone 6&#39;</span><span class="p">,</span> <span class="s1">&#39;brand&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Apple&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;phone&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;iPhone 5&#39;</span><span class="p">,</span> <span class="s1">&#39;brand&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Apple&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;phone&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Apple Watch&#39;</span><span class="p">,</span> <span class="s1">&#39;brand&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Apple&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;watch&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Galaxy S6&#39;</span><span class="p">,</span> <span class="s1">&#39;brand&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Samsung&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;phone&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Galaxy Gear&#39;</span><span class="p">,</span> <span class="s1">&#39;brand&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Samsung&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;watch&#39;</span><span class="p">],</span>
<span class="p">]);</span>

<span class="nv">$unique</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">unique</span><span class="p">(</span><span class="s1">&#39;brand&#39;</span><span class="p">);</span>

<span class="nv">$unique</span><span class="o">-&gt;</span><span class="na">values</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="cm">/*</span>
<span class="cm">    [</span>
<span class="cm">        [&#39;name&#39; =&gt; &#39;iPhone 6&#39;, &#39;brand&#39; =&gt; &#39;Apple&#39;, &#39;type&#39; =&gt; &#39;phone&#39;],</span>
<span class="cm">        [&#39;name&#39; =&gt; &#39;Galaxy S6&#39;, &#39;brand&#39; =&gt; &#39;Samsung&#39;, &#39;type&#39; =&gt; &#39;phone&#39;],</span>
<span class="cm">    ]</span>
<span class="cm">*/</span>
</pre></div>
</div>
<p>你也可以传入自己的回调来确定项目的唯一性：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$unique</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">unique</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$item</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">&#39;brand&#39;</span><span class="p">]</span><span class="o">.</span><span class="nv">$item</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">];</span>
<span class="p">});</span>

<span class="nv">$unique</span><span class="o">-&gt;</span><span class="na">values</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="cm">/*</span>
<span class="cm">    [</span>
<span class="cm">        [&#39;name&#39; =&gt; &#39;iPhone 6&#39;, &#39;brand&#39; =&gt; &#39;Apple&#39;, &#39;type&#39; =&gt; &#39;phone&#39;],</span>
<span class="cm">        [&#39;name&#39; =&gt; &#39;Apple Watch&#39;, &#39;brand&#39; =&gt; &#39;Apple&#39;, &#39;type&#39; =&gt; &#39;watch&#39;],</span>
<span class="cm">        [&#39;name&#39; =&gt; &#39;Galaxy S6&#39;, &#39;brand&#39; =&gt; &#39;Samsung&#39;, &#39;type&#39; =&gt; &#39;phone&#39;],</span>
<span class="cm">        [&#39;name&#39; =&gt; &#39;Galaxy Gear&#39;, &#39;brand&#39; =&gt; &#39;Samsung&#39;, &#39;type&#39; =&gt; &#39;watch&#39;],</span>
<span class="cm">    ]</span>
<span class="cm">*/</span>
</pre></div>
</div>
<p>在检查项目值时 <code class="docutils literal"><span class="pre">unique</span></code> 方法使用的是「宽松」比较，意味着具有整数值的字符串将被视为等于相同值的整数。使用 <code class="docutils literal"><span class="pre">uniqueStrict</span></code> 可以进行「严格」比较 。</p>
<div class="section" id="uniquestrict">
<h5>39.5.5.1.1. uniqueStrict<a class="headerlink" href="#uniquestrict" title="永久链接至标题">¶</a></h5>
<p>这个方法的使用和 <code class="docutils literal"><span class="pre">unique</span></code> 方法类似，只是使用了「严格」比较来过滤。</p>
</div>
</div>
<div class="section" id="values">
<h4>39.5.5.2. values<a class="headerlink" href="#values" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">values</span></code> 方法返回键被重置为连续编号的新集合：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span>
    <span class="mi">10</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;product&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Desk&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">200</span><span class="p">],</span>
    <span class="mi">11</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;product&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Desk&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">200</span><span class="p">]</span>
<span class="p">]);</span>

<span class="nv">$values</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">values</span><span class="p">();</span>

<span class="nv">$values</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="cm">/*</span>
<span class="cm">    [</span>
<span class="cm">        0 =&gt; [&#39;product&#39; =&gt; &#39;Desk&#39;, &#39;price&#39; =&gt; 200],</span>
<span class="cm">        1 =&gt; [&#39;product&#39; =&gt; &#39;Desk&#39;, &#39;price&#39; =&gt; 200],</span>
<span class="cm">    ]</span>
<span class="cm">*/</span>
</pre></div>
</div>
</div>
<div class="section" id="all">
<h4>39.5.5.3. all<a class="headerlink" href="#all" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">all</span></code> 方法返回该集合表示的底层 <code class="docutils literal"><span class="pre">数组</span></code> ：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [1, 2, 3]</span>
</pre></div>
</div>
</div>
<div class="section" id="only">
<h4>39.5.5.4. only<a class="headerlink" href="#only" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">only</span></code> 方法返回集合中给定键的所有项目：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="s1">&#39;product_id&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Desk&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;discount&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">]);</span>

<span class="nv">$filtered</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">only</span><span class="p">([</span><span class="s1">&#39;product_id&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">]);</span>

<span class="nv">$filtered</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [&#39;product_id&#39; =&gt; 1, &#39;name&#39; =&gt; &#39;Desk&#39;]</span>
</pre></div>
</div>
<p>与 <code class="docutils literal"><span class="pre">only</span></code> 相反的方法，请查看 <a class="reference internal" href="#except">except</a> 。</p>
</div>
<div class="section" id="except">
<h4>39.5.5.5. except<a class="headerlink" href="#except" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">except</span></code> 方法返回集合中除了指定键以外的所有项目：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="s1">&#39;product_id&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;discount&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">]);</span>

<span class="nv">$filtered</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">except</span><span class="p">([</span><span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="s1">&#39;discount&#39;</span><span class="p">]);</span>

<span class="nv">$filtered</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [&#39;product_id&#39; =&gt; 1]</span>
</pre></div>
</div>
<p>与 <code class="docutils literal"><span class="pre">except</span></code> 相反的方法，请查看 <a class="reference internal" href="#only">only</a> 。</p>
</div>
<div class="section" id="pluck">
<h4>39.5.5.6. pluck<a class="headerlink" href="#pluck" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">pluck</span></code> 方法获取集合中给定键对应的所有值：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span>
    <span class="p">[</span><span class="s1">&#39;product_id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;prod-100&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Desk&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;product_id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;prod-200&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Chair&#39;</span><span class="p">],</span>
<span class="p">]);</span>

<span class="nv">$plucked</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">pluck</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">);</span>

<span class="nv">$plucked</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [&#39;Desk&#39;, &#39;Chair&#39;]</span>
</pre></div>
</div>
<p>你也可以通过传入第二个参数来指定生成的集合的键：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$plucked</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">pluck</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;product_id&#39;</span><span class="p">);</span>

<span class="nv">$plucked</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [&#39;prod-100&#39; =&gt; &#39;Desk&#39;, &#39;prod-200&#39; =&gt; &#39;Chair&#39;]</span>
</pre></div>
</div>
</div>
<div class="section" id="keys">
<h4>39.5.5.7. keys<a class="headerlink" href="#keys" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">keys</span></code> 方法返回集合的所有键：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span>
    <span class="s1">&#39;prod-100&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;product_id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;prod-100&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Desk&#39;</span><span class="p">],</span>
    <span class="s1">&#39;prod-200&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;product_id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;prod-200&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Chair&#39;</span><span class="p">],</span>
<span class="p">]);</span>

<span class="nv">$keys</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">keys</span><span class="p">();</span>

<span class="nv">$keys</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [&#39;prod-100&#39;, &#39;prod-200&#39;]</span>
</pre></div>
</div>
</div>
<div class="section" id="forpage">
<h4>39.5.5.8. forPage<a class="headerlink" href="#forpage" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">forPage</span></code> 方法返回给定页码上显示的项目的新集合。这个方法接受页码作为其第一个参数和每页显示的项目数作为其第二个参数。</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]);</span>

<span class="nv">$chunk</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">forPage</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>

<span class="nv">$chunk</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [4, 5, 6]</span>
</pre></div>
</div>
</div>
<div class="section" id="take">
<h4>39.5.5.9. take<a class="headerlink" href="#take" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">take</span></code> 方法接受一个整数值并返回指定数量的项目。 考虑一个负数， <code class="docutils literal"><span class="pre">take()</span></code> 从集合的末尾返回指定数量的项目。</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
    <span class="nv">$list</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span>
        <span class="s1">&#39;Albert&#39;</span><span class="p">,</span> <span class="s1">&#39;Ben&#39;</span><span class="p">,</span> <span class="s1">&#39;Charles&#39;</span><span class="p">,</span> <span class="s1">&#39;Dan&#39;</span><span class="p">,</span> <span class="s1">&#39;Eric&#39;</span><span class="p">,</span> <span class="s1">&#39;Xavier&#39;</span><span class="p">,</span> <span class="s1">&#39;Yuri&#39;</span><span class="p">,</span> <span class="s1">&#39;Zane&#39;</span>
    <span class="p">]);</span>

    <span class="c1">//Get the first two names</span>
    <span class="nv">$firstTwo</span> <span class="o">=</span> <span class="nv">$list</span><span class="o">-&gt;</span><span class="na">take</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
    <span class="c1">//[&#39;Albert&#39;, &#39;Ben&#39;]</span>

    <span class="c1">//Get the last two names</span>
    <span class="nv">$lastTwo</span> <span class="o">=</span> <span class="nv">$list</span><span class="o">-&gt;</span><span class="na">take</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">);</span>
    <span class="c1">//[&#39;Yuri&#39;, &#39;Zane&#39;]</span>
</pre></div>
</div>
</div>
<div class="section" id="slice">
<h4>39.5.5.10. slice<a class="headerlink" href="#slice" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">slice</span></code> 方法返回集合中给定值后面的部分：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">]);</span>

<span class="nv">$slice</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>

<span class="nv">$slice</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [5, 6, 7, 8, 9, 10]</span>
</pre></div>
</div>
<p>如果你想限制返回内容的大小，就将期望的大小作为第二个参数传递给方法：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$slice</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>

<span class="nv">$slice</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [5, 6]</span>
</pre></div>
</div>
<p>默认情况下，返回的内容将会保留原始键。假如你不希望保留原始的键，你可以使用 <code class="docutils literal"><span class="pre">values</span></code> 方法来重新建立索引。</p>
</div>
<div class="section" id="split">
<h4>39.5.5.11. split<a class="headerlink" href="#split" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">split</span></code> 方法将集合按给定的值(该值为生成的组数)拆分：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span>

<span class="nv">$groups</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">split</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="c1">// 分成3组</span>

<span class="nv">$groups</span><span class="o">-&gt;</span><span class="na">toArray</span><span class="p">();</span>

<span class="c1">// [[1, 2], [3, 4], [5]]</span>
</pre></div>
</div>
</div>
<div class="section" id="id22">
<h4>39.5.5.12. chunk<a class="headerlink" href="#id22" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">chunk</span></code> 方法将一个集合分解成大小为n的更小的集合。</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
    <span class="nv">$list</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span>
        <span class="s1">&#39;Albert&#39;</span><span class="p">,</span> <span class="s1">&#39;Ben&#39;</span><span class="p">,</span> <span class="s1">&#39;Charles&#39;</span><span class="p">,</span> <span class="s1">&#39;Dan&#39;</span><span class="p">,</span> <span class="s1">&#39;Eric&#39;</span><span class="p">,</span> <span class="s1">&#39;Xavier&#39;</span><span class="p">,</span> <span class="s1">&#39;Yuri&#39;</span><span class="p">,</span> <span class="s1">&#39;Zane&#39;</span>
    <span class="p">]);</span>

    <span class="nv">$chunks</span> <span class="o">=</span> <span class="nv">$list</span><span class="o">-&gt;</span><span class="na">chunk</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
    <span class="nv">$chunks</span><span class="o">-&gt;</span><span class="na">toArray</span><span class="p">();</span>
    <span class="cm">/*</span>
<span class="cm">    [</span>
<span class="cm">        [1 =&gt; &quot;Albert&quot;, 2 =&gt; &quot;Ben&quot;, 3 =&gt; &quot;Charles&quot;,],</span>
<span class="cm">        [3 =&gt; &quot;Dan&quot;, 4 =&gt; &quot;Eric&quot;, 5 =&gt; &quot;Xavier&quot;,],</span>
<span class="cm">        [6 =&gt; &quot;Yuri&quot;, 7 =&gt; &quot;Zane&quot;,],</span>
<span class="cm">    ]</span>
<span class="cm">    */</span>
</pre></div>
</div>
<p>有很多地方可以派上用场。</p>
<p>将数据传递到 <code class="docutils literal"><span class="pre">Blade</span></code> 视图时，可以将其分块以获得n行，例如，将每3个名称合并到一行中。</p>
<div class="highlight-html"><div class="highlight"><pre><span></span>@foreach($list-&gt;chunk(3) as $names)
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;row&quot;</span><span class="p">&gt;</span>
        @foreach($names as $name)
            {{ $name }}
        @endforeach
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
@endforeach
</pre></div>
</div>
<p>您也可以使用 <code class="docutils literal"><span class="pre">collapse()</span></code> 方法将较小的集合组合为较大的集合，从而完成 <code class="docutils literal"><span class="pre">chunk()</span></code> 的相反操作。</p>
</div>
<div class="section" id="splice">
<h4>39.5.5.13. splice<a class="headerlink" href="#splice" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">splice</span></code> 方法删除并返回从给定索引值及之后的内容，原集合也会受到影响：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span>

<span class="nv">$chunk</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">splice</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>

<span class="nv">$chunk</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [3, 4, 5]</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [1, 2]</span>
</pre></div>
</div>
<p>你可以传入第二个参数以限制被删除内容的大小：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span>

<span class="nv">$chunk</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">splice</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

<span class="nv">$chunk</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [3]</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [1, 2, 4, 5]</span>
</pre></div>
</div>
<p>此外，你可以传入含有新项目的第三个参数来替换集合中删除的项目：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span>

<span class="nv">$chunk</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">splice</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">]);</span>

<span class="nv">$chunk</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [3]</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [1, 2, 10, 11, 4, 5]</span>
</pre></div>
</div>
</div>
<div class="section" id="tap">
<h4>39.5.5.14. tap<a class="headerlink" href="#tap" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">tap</span></code> 方法将集合传递给回调，在特定点「tap」集合。此举能让你对集合中的项目执行某些操作，而不影响集合本身：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nx">collect</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
    <span class="o">-&gt;</span><span class="na">sort</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="na">tap</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$collection</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">Log</span><span class="o">::</span><span class="na">debug</span><span class="p">(</span><span class="s1">&#39;Values after sorting&#39;</span><span class="p">,</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">values</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">toArray</span><span class="p">());</span>
    <span class="p">})</span>
    <span class="o">-&gt;</span><span class="na">shift</span><span class="p">();</span> <span class="c1">// 移除并返回集合的第一个项目</span>

<span class="c1">// 1</span>
</pre></div>
</div>
</div>
<div class="section" id="nth">
<h4>39.5.5.15. nth<a class="headerlink" href="#nth" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">nth</span></code> 方法创建由每隔 <code class="docutils literal"><span class="pre">n</span></code> 个元素组成一个新的集合：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">]);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">nth</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>

<span class="c1">// [&#39;a&#39;, &#39;e&#39;]</span>
</pre></div>
</div>
<p>你也可以选择传入一个偏移位置作为第二个参数</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">nth</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

<span class="c1">// [&#39;b&#39;, &#39;f&#39;]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id23">
<h3>39.5.6. 聚合操作类<a class="headerlink" href="#id23" title="永久链接至标题">¶</a></h3>
<div class="section" id="sum">
<h4>39.5.6.1. sum<a class="headerlink" href="#sum" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">sum</span></code> 方法返回集合内所有项目的总和：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">sum</span><span class="p">();</span>

<span class="c1">// 15</span>
</pre></div>
</div>
<p>如果集合包含嵌套数组或对象，则应该传入一个键来指定要进行求和的值：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span>
    <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;JavaScript: The Good Parts&#39;</span><span class="p">,</span> <span class="s1">&#39;pages&#39;</span> <span class="o">=&gt;</span> <span class="mi">176</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;JavaScript: The Definitive Guide&#39;</span><span class="p">,</span> <span class="s1">&#39;pages&#39;</span> <span class="o">=&gt;</span> <span class="mi">1096</span><span class="p">],</span>
<span class="p">]);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">sum</span><span class="p">(</span><span class="s1">&#39;pages&#39;</span><span class="p">);</span>

<span class="c1">// 1272</span>
</pre></div>
</div>
<p>另外，你也可以传入回调来决定要用集合中的哪些值进行求和：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span>
    <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Chair&#39;</span><span class="p">,</span> <span class="s1">&#39;colors&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;Black&#39;</span><span class="p">]],</span>
    <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Desk&#39;</span><span class="p">,</span> <span class="s1">&#39;colors&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;Black&#39;</span><span class="p">,</span> <span class="s1">&#39;Mahogany&#39;</span><span class="p">]],</span>
    <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Bookcase&#39;</span><span class="p">,</span> <span class="s1">&#39;colors&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;Red&#39;</span><span class="p">,</span> <span class="s1">&#39;Beige&#39;</span><span class="p">,</span> <span class="s1">&#39;Brown&#39;</span><span class="p">]],</span>
<span class="p">]);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">sum</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$product</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$product</span><span class="p">[</span><span class="s1">&#39;colors&#39;</span><span class="p">]);</span>
<span class="p">});</span>

<span class="c1">// 6</span>
</pre></div>
</div>
</div>
<div class="section" id="count">
<h4>39.5.6.2. count<a class="headerlink" href="#count" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">count</span></code> 方法返回该集合内的项目总数：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">count</span><span class="p">();</span>

<span class="c1">// 4</span>
</pre></div>
</div>
</div>
<div class="section" id="avg">
<h4>39.5.6.3. avg<a class="headerlink" href="#avg" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">avg</span></code> 方法返回给定键的 平均值:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$average</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([[</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="mi">20</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="mi">40</span><span class="p">]])</span><span class="o">-&gt;</span><span class="na">avg</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">);</span>

<span class="c1">// 20</span>

<span class="nv">$average</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">avg</span><span class="p">();</span>

<span class="c1">// 2</span>
</pre></div>
</div>
<div class="section" id="average">
<h5>39.5.6.3.1. average<a class="headerlink" href="#average" title="永久链接至标题">¶</a></h5>
<p><code class="docutils literal"><span class="pre">avg</span></code> 方法的别名。</p>
</div>
</div>
<div class="section" id="median">
<h4>39.5.6.4. median<a class="headerlink" href="#median" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">median</span></code> 方法返回给定键的 中值:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$median</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([[</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="mi">20</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="mi">40</span><span class="p">]])</span><span class="o">-&gt;</span><span class="na">median</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">);</span>

<span class="c1">// 15</span>

<span class="nv">$median</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">median</span><span class="p">();</span>

<span class="c1">// 1.5</span>
</pre></div>
</div>
</div>
<div class="section" id="mode">
<h4>39.5.6.5. mode<a class="headerlink" href="#mode" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">mode</span></code> 方法返回给定键的 众数:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$mode</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([[</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="mi">20</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="mi">40</span><span class="p">]])</span><span class="o">-&gt;</span><span class="na">mode</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">);</span>

<span class="c1">// [10]</span>

<span class="nv">$mode</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">mode</span><span class="p">();</span>

<span class="c1">// [1]</span>
</pre></div>
</div>
</div>
<div class="section" id="max">
<h4>39.5.6.6. max<a class="headerlink" href="#max" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">max</span></code> 方法返回给定键的最大值：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$max</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([[</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="mi">20</span><span class="p">]])</span><span class="o">-&gt;</span><span class="na">max</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">);</span>

<span class="c1">// 20</span>

<span class="nv">$max</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">max</span><span class="p">();</span>

<span class="c1">// 5</span>
</pre></div>
</div>
</div>
<div class="section" id="min">
<h4>39.5.6.7. min<a class="headerlink" href="#min" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">min</span></code> 方法返回给定键的最小值：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$min</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([[</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="mi">20</span><span class="p">]])</span><span class="o">-&gt;</span><span class="na">min</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">);</span>

<span class="c1">// 10</span>

<span class="nv">$min</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">min</span><span class="p">();</span>

<span class="c1">// 1</span>
</pre></div>
</div>
</div>
<div class="section" id="random">
<h4>39.5.6.8. random<a class="headerlink" href="#random" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">random</span></code> 方法从集合中返回一个随机项：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">random</span><span class="p">();</span>

<span class="c1">// 4 - (retrieved randomly)</span>
</pre></div>
</div>
<p>你可以选择性传入一个整数到 <code class="docutils literal"><span class="pre">random</span></code> 来指定要获取的随机项的数量。只要你显式传递你希望接收的数量时，则会返回项目的集合：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$random</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">random</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>

<span class="nv">$random</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [2, 4, 5] - (retrieved randomly)</span>
</pre></div>
</div>
</div>
<div class="section" id="shuffle">
<h4>39.5.6.9. shuffle<a class="headerlink" href="#shuffle" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">shuffle</span></code> 方法随机排序集合中的项目：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span>

<span class="nv">$shuffled</span> <span class="o">=</span> <span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">shuffle</span><span class="p">();</span>

<span class="nv">$shuffled</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [3, 2, 5, 1, 4] - (generated randomly)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id24">
<h3>39.5.7. 转换为数组<a class="headerlink" href="#id24" title="永久链接至标题">¶</a></h3>
<div class="section" id="toarray">
<h4>39.5.7.1. toArray<a class="headerlink" href="#toarray" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">toArray</span></code> 方法将集合转换成 <code class="docutils literal"><span class="pre">PHP</span></code> 数组。如果集合的值是 <code class="docutils literal"><span class="pre">Eloquent</span></code> 模型，那也会被转换成数组：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Desk&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">200</span><span class="p">]);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">toArray</span><span class="p">();</span>

<span class="cm">/*</span>
<span class="cm">    [</span>
<span class="cm">        [&#39;name&#39; =&gt; &#39;Desk&#39;, &#39;price&#39; =&gt; 200],</span>
<span class="cm">    ]</span>
<span class="cm">*/</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last"><code class="docutils literal"><span class="pre">toArray</span></code> 也会将所有集合的嵌套对象转换为数组。如果你想获取原数组，就改用 <code class="docutils literal"><span class="pre">all</span></code> 方法。这样返回的数组中可能包含对象或者集合元素。</p>
</div>
</div>
<div class="section" id="id25">
<h4>39.5.7.2. all<a class="headerlink" href="#id25" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">all</span></code> 方法返回集合表示的底层数组，就是集合中 <code class="docutils literal"><span class="pre">$items</span></code> 属性：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nx">collect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>

<span class="c1">// [1, 2, 3]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="json">
<h3>39.5.8. 转换为JSON<a class="headerlink" href="#json" title="永久链接至标题">¶</a></h3>
<div class="section" id="tojson">
<h4>39.5.8.1. toJson<a class="headerlink" href="#tojson" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal"><span class="pre">toJson</span></code> 方法将集合转换成 <code class="docutils literal"><span class="pre">JSON</span></code> 字符串：</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nx">collect</span><span class="p">([</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Desk&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">200</span><span class="p">]);</span>

<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">toJson</span><span class="p">();</span>

<span class="c1">// &#39;{&quot;name&quot;:&quot;Desk&quot;, &quot;price&quot;:200}&#39;</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Laravel的事件系统.html" class="btn btn-neutral float-right" title="40. 事件" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Laravel的缓存系统.html" class="btn btn-neutral" title="38. 缓存" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, lzh.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            LANGUAGE:'zh',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  

<script type="text/javascript">
  
      $(document).ready(function(){
        var offset = sessionStorage.getItem("offsetTop");
        $('.wy-side-scroll').scrollTop(offset);
        sessionStorage.setItem("offsetTop", 0);


        $('.wy-menu > ul').click(function(){
            sessionStorage.setItem("offsetTop", $('.wy-side-scroll').scrollTop());
        });
      })

  </script> 

</body>
</html>