

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>29. Mix &mdash; laravel 1.0 文档</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="索引"
              href="genindex.html"/>
        <link rel="search" title="搜索" href="search.html"/>
    <link rel="top" title="laravel 1.0 文档" href="index.html"/>
        <link rel="next" title="30. mix使用手册" href="laravel-mix.html"/>
        <link rel="prev" title="28. 前端" href="Laravel的前端.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> laravel
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">目录:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="请求到响应的生命周期-web.html">1. 请求到web响应的生命周期</a></li>
<li class="toctree-l1"><a class="reference internal" href="请求到响应的生命周期-console.html">2. 请求到console响应的生命周期</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的容器.html">3. 容器</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的Facades.html">4. Facades</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的Facades原理分析.html">5. Facade的原理</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的服务提供器.html">6. 服务提供器</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的路由.html">7. 路由</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的路由—路由的正则编译.html">8. 路由的正则编译</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的路由—路由的匹配与参数绑定.html">9. 路由的匹配与参数绑定</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的路由—路由中间件.html">10. 路由的中间件</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的中间件.html">11. 中间件</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的中间件-SubstituteBindings.html">12. 中间件SubstituteBindings</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的中间件-CSRF.html">13. 中间件CSRF</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的请求.html">14. 请求</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的控制器.html">15. 控制器</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的控制器—控制器方法的参数构建与运行.html">16. 控制器方法的参数构建与运行</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的响应.html">17. 响应</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的视图.html">18. 视图</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的生成URL.html">19. URL</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的Session.html">20. Session</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的Session原理分析.html">21. Session原理分析</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的表单验证机制详解.html">22. 表单验证机制详解</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的日志.html">23. 日志</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的异常和错误处理.html">24. 异常和错误处理</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的异常和错误处理原理分析.html">25. 异常和错误处理原理分析</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的Blade.html">26. Blade</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的blade原理分析.html">27. Blade原理分析</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的前端.html">28. 前端</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">29. Mix</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">29.1. 简介</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">29.2. 安装 &amp; 配置</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#node">29.2.1. 安装 Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">29.2.2. Laravel Mix</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id4">29.3. 运行 Mix</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id5">29.3.1. 监控资源文件修改</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id6">29.4. 使用样式</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#less">29.4.1. Less</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sass">29.4.2. Sass</a></li>
<li class="toctree-l3"><a class="reference internal" href="#stylus">29.4.3. Stylus</a></li>
<li class="toctree-l3"><a class="reference internal" href="#postcss">29.4.4. PostCSS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#css">29.4.5. 纯 CSS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#url">29.4.6. URL 处理</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id9">29.4.7. 资源映射</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id10">29.5. 使用脚本</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id11">29.5.1. 提取依赖库</a></li>
<li class="toctree-l3"><a class="reference internal" href="#react">29.5.2. React</a></li>
<li class="toctree-l3"><a class="reference internal" href="#js">29.5.3. 原生 JS</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id12">29.6. 自定义 Webpack 配置</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id13">29.6.1. 合并自定义配置</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id15">29.6.2. 自定义配置文件</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id16">29.7. 复制文件 &amp; 目录</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id17">29.8. 版本控制／缓存清除</a></li>
<li class="toctree-l2"><a class="reference internal" href="#browsersync">29.9. Browsersync 重新加载</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id19">29.10. 环境变量</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id20">29.11. 通知</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="laravel-mix.html">30. mix使用手册</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的用户认证系统.html">31. Laravel 的用户认证系统</a></li>
<li class="toctree-l1"><a class="reference internal" href="用户认证JWT.html">32. 用户认证JWT</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的API认证系统Passport.html">33. Laravel 的 API 认证系统 Passport</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的用户授权系统.html">34. Laravel用户授权系统</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的命令行.html">35. 命令行</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的广播系统.html">36. 广播</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的广播系统原理分析.html">37. 广播系统原理分析</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的缓存系统.html">38. 缓存</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的集合Collection.html">39. 集合</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的事件系统.html">40. 事件</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的事件系统原理分析.html">41. 事件系统原理分析</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的文件存储.html">42. 文件存储</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的辅助函数-字符串操作.html">43. 辅助函数-字符串函数</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的辅助函数-数组和对象操作.html">44. 辅助函数-数组和对象函数</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的辅助函数-路径操作.html">45. 辅助函数-路径函数</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的辅助函数-tap分析.html">46. 辅助函数-Tap函数</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的辅助函数-其它.html">47. 辅助函数-其它杂项</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的邮件发送功能.html">48. 邮件</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的消息通知.html">49. 通知</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel Queue——消息队列任务与分发源码剖析.html">50. 消息队列任务与分发源码剖析</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的任务调度.html">51. 任务调度</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的数据库—原始方式.html">52. 数据库-原始操作</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的数据库—查询构造器.html">53. 数据库-查询构建器</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的数据分页.html">54. 数据分页</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的数据分页原理分析.html">55. 数据分页原理分析</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的数据库迁移.html">56. 数据库迁移</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的数据库填充.html">57. 数据库填充</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的Redis.html">58. Redis</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的Redis原理分析.html">59. Redis原理分析</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的数据库—Eloquent.html">60. Eloquent</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的数据库—Eloquent关联.html">61. Eloquent关联</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的数据库—Eloquent修改器.html">62. Eloquent修改器</a></li>
<li class="toctree-l1"><a class="reference internal" href="Laravel的验证规则.html">63. 验证规则</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">laravel</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>29. Mix</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
        
        <a href="http://blog.liaozhonghao.cn" rel="nofollow"> 返回主页</a>
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="mix">
<h1>29. Mix<a class="headerlink" href="#mix" title="永久链接至标题">¶</a></h1>
<div class="section" id="id1">
<h2>29.1. 简介<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h2>
<p><a class="reference external" href="https://github.com/JeffreyWay/laravel-mix">Laravel Mix</a> 提供了简洁且可读性高的 <code class="docutils literal"><span class="pre">API</span></code> ，用于使用几个常见的 <code class="docutils literal"><span class="pre">CSS</span></code> 和 <code class="docutils literal"><span class="pre">JavaScript</span></code> 预处理器为应用定义 <code class="docutils literal"><span class="pre">Webpack</span></code> 构建步骤。可以通过简单链式调用来定义资源的编译。例如：</p>
<div class="highlight-js"><div class="highlight"><pre><span></span><span class="nx">mix</span><span class="p">.</span><span class="nx">js</span><span class="p">(</span><span class="s1">&#39;resources/assets/js/app.js&#39;</span><span class="p">,</span> <span class="s1">&#39;public/js&#39;</span><span class="p">)</span>
   <span class="p">.</span><span class="nx">sass</span><span class="p">(</span><span class="s1">&#39;resources/assets/sass/app.scss&#39;</span><span class="p">,</span> <span class="s1">&#39;public/css&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>如果你曾经对于使用 <code class="docutils literal"><span class="pre">Webpack</span></code> 及编译资源感到困惑和不知所措，那么你会爱上 Laravel <code class="docutils literal"><span class="pre">Mix</span></code> 。当然，Laravel 也并没有强迫你一定要使用 <code class="docutils literal"><span class="pre">Mix</span></code> ，你可以自由使用任何你喜欢的资源编译工具，或者不用也行。</p>
</div>
<div class="section" id="id2">
<h2>29.2. 安装 &amp; 配置<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
<div class="section" id="node">
<h3>29.2.1. 安装 Node<a class="headerlink" href="#node" title="永久链接至标题">¶</a></h3>
<p>在开始使用 <code class="docutils literal"><span class="pre">Mix</span></code> 之前，必须先确保你的机器上安装了 <code class="docutils literal"><span class="pre">Node.js</span></code> 和 <code class="docutils literal"><span class="pre">NPM</span></code> 。</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>node -v
npm -v
</pre></div>
</div>
<p>默认情况下， Laravel <code class="docutils literal"><span class="pre">Homestead</span></code> 会包含你所需的一切。当然，如果你没有使用 <code class="docutils literal"><span class="pre">Vagrant</span></code> ，就使用简单的图形安装程序从 其下载页面 安装最新版的 <code class="docutils literal"><span class="pre">Node</span></code> 和 <code class="docutils literal"><span class="pre">NPM</span></code> 。</p>
</div>
<div class="section" id="id3">
<h3>29.2.2. Laravel Mix<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h3>
<p>然后就只需要安装 Laravel <code class="docutils literal"><span class="pre">Mix</span></code> 。在新的 Laravel 项目中，你可以在目录结构的根目录中找到一个 <code class="docutils literal"><span class="pre">package.json</span></code> 文件，它包括了运行基本的 <code class="docutils literal"><span class="pre">Mix</span></code> 所需的内容。就如同 <code class="docutils literal"><span class="pre">composer.json</span></code> 文件，只不过它定义的是 Node 的依赖而不是 PHP 。你可以使用以下的命令安装它引用的依赖项：</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>npm install
</pre></div>
</div>
</div>
</div>
<div class="section" id="id4">
<h2>29.3. 运行 Mix<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h2>
<p><code class="docutils literal"><span class="pre">Mix</span></code> 是位于 <a class="reference external" href="https://webpack.js.org/">Webpack</a> 顶部的配置层，所以要运行 <code class="docutils literal"><span class="pre">Mix</span></code> 任务，只需要执行默认的 Laravel <code class="docutils literal"><span class="pre">package.json</span></code> 文件中包含的一个 <code class="docutils literal"><span class="pre">NPM</span></code> 脚本：</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>// 运行所有 Mix 任务...
npm run dev

// 运行所有 Mix 任务并缩小输出..
npm run production
</pre></div>
</div>
<div class="section" id="id5">
<h3>29.3.1. 监控资源文件修改<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h3>
<p><code class="docutils literal"><span class="pre">npm</span> <span class="pre">run</span> <span class="pre">watch</span></code> 会在你的终端里持续运行，监控所有相关的资源文件以便进行更改。 <code class="docutils literal"><span class="pre">Webpack</span></code> 会在检测到文件更改时自动重新编译资源：</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>npm run watch
</pre></div>
</div>
<p>在某些环境中，当文件更改时， Webpack 不会更新。如果系统出现这种情况，请考虑使用 <code class="docutils literal"><span class="pre">watch-poll</span></code> 命令：</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>npm run watch-poll
</pre></div>
</div>
</div>
</div>
<div class="section" id="id6">
<h2>29.4. 使用样式<a class="headerlink" href="#id6" title="永久链接至标题">¶</a></h2>
<p><code class="docutils literal"><span class="pre">webpack.mix.js</span></code> 文件是所有资源编译的入口点。可以把它看作是 <code class="docutils literal"><span class="pre">Webpack</span></code> 中的轻量级配置封装清单。 <code class="docutils literal"><span class="pre">Mix</span></code> 任务可以一起被链式调用，以精确定义资源的编译方式。</p>
<div class="section" id="less">
<h3>29.4.1. Less<a class="headerlink" href="#less" title="永久链接至标题">¶</a></h3>
<p><code class="docutils literal"><span class="pre">less</span></code> 方法可以用于将 <code class="docutils literal"><span class="pre">Less</span></code> 编译为 <code class="docutils literal"><span class="pre">CSS</span></code> 。在 <code class="docutils literal"><span class="pre">webpack.mix.js</span></code> 中这样写，可以将 <code class="docutils literal"><span class="pre">app.less</span></code> 编译到 <code class="docutils literal"><span class="pre">public/css/app.css</span></code> 中。</p>
<div class="highlight-js"><div class="highlight"><pre><span></span><span class="nx">mix</span><span class="p">.</span><span class="nx">less</span><span class="p">(</span><span class="s1">&#39;resources/assets/less/app.less&#39;</span><span class="p">,</span> <span class="s1">&#39;public/css&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>可以多次调用 <code class="docutils literal"><span class="pre">less</span></code> 方法来编译多个文件:</p>
<div class="highlight-js"><div class="highlight"><pre><span></span><span class="nx">mix</span><span class="p">.</span><span class="nx">less</span><span class="p">(</span><span class="s1">&#39;resources/assets/less/app.less&#39;</span><span class="p">,</span> <span class="s1">&#39;public/css&#39;</span><span class="p">)</span>
   <span class="p">.</span><span class="nx">less</span><span class="p">(</span><span class="s1">&#39;resources/assets/less/admin.less&#39;</span><span class="p">,</span> <span class="s1">&#39;public/css&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>如果要自定义编译的 <code class="docutils literal"><span class="pre">CSS</span></code> 的文件名，可以将一个完整的路径作为第二个参数传给 <code class="docutils literal"><span class="pre">less</span></code> 方法:</p>
<div class="highlight-js"><div class="highlight"><pre><span></span><span class="nx">mix</span><span class="p">.</span><span class="nx">less</span><span class="p">(</span><span class="s1">&#39;resources/assets/less/app.less&#39;</span><span class="p">,</span> <span class="s1">&#39;public/stylesheets/styles.css&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>如果你需要重写 底层 <code class="docutils literal"><span class="pre">Less</span></code>  <a class="reference external" href="https://github.com/webpack-contrib/less-loader#options">插件选项</a> ，你可以将一个对象作为第三个参数传到 <code class="docutils literal"><span class="pre">mix.less()</span></code> ：</p>
<div class="highlight-js"><div class="highlight"><pre><span></span><span class="nx">mix</span><span class="p">.</span><span class="nx">less</span><span class="p">(</span><span class="s1">&#39;resources/assets/less/app.less&#39;</span><span class="p">,</span> <span class="s1">&#39;public/css&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">strictMath</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="sass">
<h3>29.4.2. Sass<a class="headerlink" href="#sass" title="永久链接至标题">¶</a></h3>
<p><code class="docutils literal"><span class="pre">sass</span></code> 方法可以将 <code class="docutils literal"><span class="pre">Sass</span></code> 编译为 <code class="docutils literal"><span class="pre">CSS</span></code> 。用法如下所示：</p>
<div class="highlight-js"><div class="highlight"><pre><span></span><span class="nx">mix</span><span class="p">.</span><span class="nx">sass</span><span class="p">(</span><span class="s1">&#39;resources/assets/sass/app.scss&#39;</span><span class="p">,</span> <span class="s1">&#39;public/css&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>跟 <code class="docutils literal"><span class="pre">less</span></code> 方法一样，你可以将多个 <code class="docutils literal"><span class="pre">Sass</span></code> 文件编译到各自的 <code class="docutils literal"><span class="pre">CSS</span></code> 文件中，甚至可以自定义生成的 <code class="docutils literal"><span class="pre">CSS</span></code> 的输出目录：</p>
<div class="highlight-js"><div class="highlight"><pre><span></span><span class="nx">mix</span><span class="p">.</span><span class="nx">sass</span><span class="p">(</span><span class="s1">&#39;resources/assets/sass/app.sass&#39;</span><span class="p">,</span> <span class="s1">&#39;public/css&#39;</span><span class="p">)</span>
   <span class="p">.</span><span class="nx">sass</span><span class="p">(</span><span class="s1">&#39;resources/assets/sass/admin.sass&#39;</span><span class="p">,</span> <span class="s1">&#39;public/css/admin&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>另外， <code class="docutils literal"><span class="pre">Node-Sass</span></code> <a class="reference external" href="https://github.com/sass/node-sass#options">插件选项</a> 也同样可以作为第三个参数：</p>
<div class="highlight-js"><div class="highlight"><pre><span></span><span class="nx">mix</span><span class="p">.</span><span class="nx">sass</span><span class="p">(</span><span class="s1">&#39;resources/assets/sass/app.sass&#39;</span><span class="p">,</span> <span class="s1">&#39;public/css&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">precision</span><span class="o">:</span> <span class="mi">5</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="stylus">
<h3>29.4.3. Stylus<a class="headerlink" href="#stylus" title="永久链接至标题">¶</a></h3>
<p>类似于 <code class="docutils literal"><span class="pre">Less</span></code> 和 <code class="docutils literal"><span class="pre">Sass</span></code> ， <code class="docutils literal"><span class="pre">stylus</span></code> 方法可以将 <code class="docutils literal"><span class="pre">Stylus</span></code> 编译为 <code class="docutils literal"><span class="pre">CSS</span></code> ：</p>
<div class="highlight-js"><div class="highlight"><pre><span></span><span class="nx">mix</span><span class="p">.</span><span class="nx">stylus</span><span class="p">(</span><span class="s1">&#39;resources/assets/stylus/app.styl&#39;</span><span class="p">,</span> <span class="s1">&#39;public/css&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>你也可以安装其他的 <code class="docutils literal"><span class="pre">Stylus</span></code> 插件，例如 <code class="docutils literal"><span class="pre">Rupture</span></code> 。首先，通过 NPM ( <code class="docutils literal"><span class="pre">npm</span> <span class="pre">install</span> <span class="pre">rupture</span></code> ) 来安装插件，然后在调用 <code class="docutils literal"><span class="pre">mix.stylus()</span></code> 时引用它：</p>
<div class="highlight-js"><div class="highlight"><pre><span></span><span class="nx">mix</span><span class="p">.</span><span class="nx">stylus</span><span class="p">(</span><span class="s1">&#39;resources/assets/stylus/app.styl&#39;</span><span class="p">,</span> <span class="s1">&#39;public/css&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">use</span><span class="o">:</span> <span class="p">[</span>
        <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;rupture&#39;</span><span class="p">)()</span>
    <span class="p">]</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="postcss">
<h3>29.4.4. PostCSS<a class="headerlink" href="#postcss" title="永久链接至标题">¶</a></h3>
<p>Laravel <code class="docutils literal"><span class="pre">Mix</span></code> 自带了一个用来转换 <code class="docutils literal"><span class="pre">CSS</span></code> 的强大工具 <code class="docutils literal"><span class="pre">PostCSS</span></code> 。默认情况下， <code class="docutils literal"><span class="pre">Mix</span></code> 利用了流行的 <code class="docutils literal"><span class="pre">Autoprefixer</span></code> 插件来自动添加所需要的 <code class="docutils literal"><span class="pre">CSS3</span></code> 浏览器引擎前缀。不过，你也可以自由添加任何适合你应用程序的插件。首先，通过 <code class="docutils literal"><span class="pre">NPM</span></code> 安装所需的插件，然后在 <code class="docutils literal"><span class="pre">webpack.mix.js</span></code> 文件中引用它：</p>
<div class="highlight-js"><div class="highlight"><pre><span></span><span class="nx">mix</span><span class="p">.</span><span class="nx">sass</span><span class="p">(</span><span class="s1">&#39;resources/assets/sass/app.scss&#39;</span><span class="p">,</span> <span class="s1">&#39;public/css&#39;</span><span class="p">)</span>
   <span class="p">.</span><span class="nx">options</span><span class="p">({</span>
        <span class="nx">postCss</span><span class="o">:</span> <span class="p">[</span>
            <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;postcss-css-variables&#39;</span><span class="p">)()</span>
        <span class="p">]</span>
   <span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="css">
<h3>29.4.5. 纯 CSS<a class="headerlink" href="#css" title="永久链接至标题">¶</a></h3>
<p>如果你只是想将一些纯 <code class="docutils literal"><span class="pre">CSS</span></code> 样式合并成单个的文件, 你可以使用 <code class="docutils literal"><span class="pre">styles</span></code> 方法。</p>
<div class="highlight-js"><div class="highlight"><pre><span></span><span class="nx">mix</span><span class="p">.</span><span class="nx">styles</span><span class="p">([</span>
    <span class="s1">&#39;public/css/vendor/normalize.css&#39;</span><span class="p">,</span>
    <span class="s1">&#39;public/css/vendor/videojs.css&#39;</span>
<span class="p">],</span> <span class="s1">&#39;public/css/all.css&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="url">
<h3>29.4.6. URL 处理<a class="headerlink" href="#url" title="永久链接至标题">¶</a></h3>
<p>由于 Laravel <code class="docutils literal"><span class="pre">Mix</span></code> 是建立在 <code class="docutils literal"><span class="pre">Webpack</span></code> 之上的，所以了解一些 <code class="docutils literal"><span class="pre">Webpack</span></code> 概念就非常有必要。编译 <code class="docutils literal"><span class="pre">CSS</span></code> 的时候， <code class="docutils literal"><span class="pre">Webpack</span></code> 会重写和优化样式表中对 <code class="docutils literal"><span class="pre">url()</span></code> 的调用。 一开始听起来可能会觉得奇怪，但这确实是一个非常强大的功能。试想一下我们要编译一个包含图片的相对路径的 <code class="docutils literal"><span class="pre">Sass</span></code> 文件:</p>
<div class="highlight-css"><div class="highlight"><pre><span></span><span class="p">.</span><span class="nc">example</span> <span class="p">{</span>
    <span class="k">background</span><span class="p">:</span> <span class="nb">url</span><span class="p">(</span><span class="s1">&#39;../images/example.png&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">任何给定 <code class="docutils literal"><span class="pre">url()</span></code> 的绝对路径会被排除在 <code class="docutils literal"><span class="pre">URL</span></code> 重写之外。例如 <code class="docutils literal"><span class="pre">url('/images/thing.png')</span></code> 或者 <code class="docutils literal"><span class="pre">url('http://example.com/images/thing.png')</span></code> 不会被修改。</p>
</div>
<p>默认情况下，Laravel <code class="docutils literal"><span class="pre">Mix</span></code> 和 <code class="docutils literal"><span class="pre">Webpack</span></code> 会找到 <code class="docutils literal"><span class="pre">example.png</span></code> ，然后把它复制到你的 <code class="docutils literal"><span class="pre">public/images</span></code> 目录下，然后重写生成的样式中的 <code class="docutils literal"><span class="pre">url()</span></code> 。这样，你编译之后的 <code class="docutils literal"><span class="pre">CSS</span></code> 会变成：</p>
<div class="highlight-css"><div class="highlight"><pre><span></span><span class="p">.</span><span class="nc">example</span> <span class="p">{</span>
  <span class="k">background</span><span class="p">:</span> <span class="nb">url</span><span class="p">(</span><span class="sx">/images/example.png?d41d8cd98f00b204e9800998ecf8427e</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>但如果你想以你喜欢的方式配置现有的文件夹结构，可以禁用 <code class="docutils literal"><span class="pre">url()</span></code> 的重写：</p>
<div class="highlight-js"><div class="highlight"><pre><span></span><span class="nx">mix</span><span class="p">.</span><span class="nx">sass</span><span class="p">(</span><span class="s1">&#39;resources/assets/app/app.scss&#39;</span><span class="p">,</span> <span class="s1">&#39;public/css&#39;</span><span class="p">)</span>
   <span class="p">.</span><span class="nx">options</span><span class="p">({</span>
      <span class="nx">processCssUrls</span><span class="o">:</span> <span class="kc">false</span>
   <span class="p">});</span>
</pre></div>
</div>
<p>在你的 <code class="docutils literal"><span class="pre">webpack.mix.js</span></code> 文件像上面这样配置之后， <code class="docutils literal"><span class="pre">Mix</span></code> 将不再匹配 <code class="docutils literal"><span class="pre">url()</span></code> 或者将资源复制到你的 <code class="docutils literal"><span class="pre">public</span></code> 目录。换句话说，编译后的 <code class="docutils literal"><span class="pre">CSS</span></code> 会跟原来输入的一样：</p>
<div class="highlight-css"><div class="highlight"><pre><span></span><span class="p">.</span><span class="nc">example</span> <span class="p">{</span>
    <span class="k">background</span><span class="p">:</span> <span class="nb">url</span><span class="p">(</span><span class="s2">&quot;../images/thing.png&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id9">
<h3>29.4.7. 资源映射<a class="headerlink" href="#id9" title="永久链接至标题">¶</a></h3>
<p>默认情况下资源映射是禁用的，可以在 <code class="docutils literal"><span class="pre">webpack.mix.js</span></code> 文件中调用 <code class="docutils literal"><span class="pre">mix.sourceMaps()</span></code> 方法来开启它。尽管它会带来一些编译／性能的成本，但在使用编译资源时，可以为使用浏览器的开发人员工具提供额外的调试信息：</p>
<div class="highlight-js"><div class="highlight"><pre><span></span><span class="nx">mix</span><span class="p">.</span><span class="nx">js</span><span class="p">(</span><span class="s1">&#39;resources/assets/js/app.js&#39;</span><span class="p">,</span> <span class="s1">&#39;public/js&#39;</span><span class="p">)</span>
   <span class="p">.</span><span class="nx">sourceMaps</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id10">
<h2>29.5. 使用脚本<a class="headerlink" href="#id10" title="永久链接至标题">¶</a></h2>
<p><code class="docutils literal"><span class="pre">Mix</span></code> 提供了一些函数来处理 JavaScript 文件，像是编译 ECMAScript 2015、模块绑定、压缩以及简单地合并纯 JavaScript 文件。更棒的是，这些操作都不需要进行任何自定义的配置：</p>
<div class="highlight-js"><div class="highlight"><pre><span></span><span class="nx">mix</span><span class="p">.</span><span class="nx">js</span><span class="p">(</span><span class="s1">&#39;resources/assets/js/app.js&#39;</span><span class="p">,</span> <span class="s1">&#39;public/js&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>仅仅这上面的一行代码，就支持：</p>
<ul class="simple">
<li>ES 2015 语法</li>
<li>模块</li>
<li>编译 .vue 文件</li>
<li>生产环境压缩代码</li>
</ul>
<div class="section" id="id11">
<h3>29.5.1. 提取依赖库<a class="headerlink" href="#id11" title="永久链接至标题">¶</a></h3>
<p>将应用程序特定的 JavaScript 与依赖库捆绑在一起有个潜在的缺点，会使得长期缓存更加困难。例如，即使应用程序使用的依赖库没有被更改，只要有代码被单独更新，都会强制浏览器重新下载所有依赖库。</p>
<p>如果你打算频繁更新应用程序的 JavaScript ，应该考虑将所有的依赖库提取到自己的文件中。如此一来，应用程序代码的更改就不会影响到大型 <code class="docutils literal"><span class="pre">vendor.js</span></code> 文件的缓存。而 <code class="docutils literal"><span class="pre">Mix</span></code> 的 <code class="docutils literal"><span class="pre">extract</span></code> 方法能使之变得轻而易举：</p>
<div class="highlight-js"><div class="highlight"><pre><span></span><span class="nx">mix</span><span class="p">.</span><span class="nx">js</span><span class="p">(</span><span class="s1">&#39;resources/assets/js/app.js&#39;</span><span class="p">,</span> <span class="s1">&#39;public/js&#39;</span><span class="p">)</span>
   <span class="p">.</span><span class="nx">extract</span><span class="p">([</span><span class="s1">&#39;vue&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">extract</span></code> 方法接受一个数组参数。这个数组是要提取到 <code class="docutils literal"><span class="pre">vendor.js</span></code> 文件中的所有的依赖库或模块。比如上面的例子中， <code class="docutils literal"><span class="pre">Mix</span></code> 将生成以下文件：</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">public/js/manifest.js</span></code> : <code class="docutils literal"><span class="pre">Webpack</span></code> 运行清单</li>
<li><code class="docutils literal"><span class="pre">public/js/vendor.js</span></code> : 第三方库</li>
<li><code class="docutils literal"><span class="pre">public/js/app.js</span></code> : 应用代码</li>
</ul>
<p>务必按照以下文件顺序加载，以防 JavaScript 报错：</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;/js/manifest.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;/js/vendor.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;/js/app.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="react">
<h3>29.5.2. React<a class="headerlink" href="#react" title="永久链接至标题">¶</a></h3>
<p><code class="docutils literal"><span class="pre">Mix</span></code> 会自动安装 <code class="docutils literal"><span class="pre">React</span></code> 必要的 <code class="docutils literal"><span class="pre">Babel</span></code> 插件。只需替换 <code class="docutils literal"><span class="pre">mix.js()</span></code> 为 <code class="docutils literal"><span class="pre">mix.react()</span></code> ：</p>
<div class="highlight-js"><div class="highlight"><pre><span></span><span class="nx">mix</span><span class="p">.</span><span class="nx">react</span><span class="p">(</span><span class="s1">&#39;resources/assets/js/app.jsx&#39;</span><span class="p">,</span> <span class="s1">&#39;public/js&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">Mix</span></code> 会在后台自动下载包括 <code class="docutils literal"><span class="pre">babel-preset-react</span></code> Babel 插件在内的库。</p>
</div>
<div class="section" id="js">
<h3>29.5.3. 原生 JS<a class="headerlink" href="#js" title="永久链接至标题">¶</a></h3>
<p>类似 <code class="docutils literal"><span class="pre">mix.styles()</span></code> 合并样式表文件， <code class="docutils literal"><span class="pre">scripts()</span></code> 方法可以合并压缩任意数量的 JavaScript 文件：</p>
<div class="highlight-js"><div class="highlight"><pre><span></span><span class="nx">mix</span><span class="p">.</span><span class="nx">scripts</span><span class="p">([</span>
    <span class="s1">&#39;public/js/admin.js&#39;</span><span class="p">,</span>
    <span class="s1">&#39;public/js/dashboard.js&#39;</span>
<span class="p">],</span> <span class="s1">&#39;public/js/all.js&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>对那些没有用 <code class="docutils literal"><span class="pre">Webpack</span></code> 编译 JavaScript 的旧项目来说，这个方法非常实用。</p>
<div class="admonition tip">
<p class="first admonition-title">小技巧</p>
<p class="last"><code class="docutils literal"><span class="pre">mix.babel()</span></code> 与 <code class="docutils literal"><span class="pre">mix.scripts()</span></code> 还是有些差别的。在使用上与 <code class="docutils literal"><span class="pre">scripts</span></code> 一致，但是，所有文件都会经过 Babel 编译， 任何 ES2015 语法的代码都会编译成所有浏览器都支持的原生 JavaScript。</p>
</div>
</div>
</div>
<div class="section" id="id12">
<h2>29.6. 自定义 Webpack 配置<a class="headerlink" href="#id12" title="永久链接至标题">¶</a></h2>
<p>Laravel <code class="docutils literal"><span class="pre">Mix</span></code> 在背后引用一个预配置的 <code class="docutils literal"><span class="pre">webpack.config.js</span></code> 文件加速启动与运行。有时，可能有一个特殊的加载器或需要引用的插件，或倾向于 <code class="docutils literal"><span class="pre">Stylus</span></code> 而不是 <code class="docutils literal"><span class="pre">Sass</span></code> ，而不得不去手动修改这个文件。这种情况下，有两个选择：</p>
<div class="section" id="id13">
<h3>29.6.1. 合并自定义配置<a class="headerlink" href="#id13" title="永久链接至标题">¶</a></h3>
<p><code class="docutils literal"><span class="pre">Mix</span></code> 提供了一个 <code class="docutils literal"><span class="pre">webpackConfig</span></code> 方法来合并任何 <code class="docutils literal"><span class="pre">Webpack</span></code> 配置以覆盖默认配置。因此你不需要复制和维护 <code class="docutils literal"><span class="pre">webpack.config.js</span></code> 的文件副本。 <code class="docutils literal"><span class="pre">webpackConfig</span></code> 方法接受一个包含任何要应用的 <code class="docutils literal"><span class="pre">Webpack</span></code> <a class="reference external" href="https://webpack.js.org/configuration/">配置项</a> 的对象：</p>
<div class="highlight-js"><div class="highlight"><pre><span></span><span class="nx">mix</span><span class="p">.</span><span class="nx">webpackConfig</span><span class="p">({</span>
    <span class="nx">resolve</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">modules</span><span class="o">:</span> <span class="p">[</span>
            <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;vendor/laravel/spark/resources/assets/js&#39;</span><span class="p">)</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="id15">
<h3>29.6.2. 自定义配置文件<a class="headerlink" href="#id15" title="永久链接至标题">¶</a></h3>
<p>如果想完全自定义 <code class="docutils literal"><span class="pre">Webpack</span></code> 配置，就将 <code class="docutils literal"><span class="pre">node_modules/laravel-mix/setup/webpack.config.js</span></code> 文件复制到项目的根目录。然后在 <code class="docutils literal"><span class="pre">package.json</span></code> 文件中将所有 <code class="docutils literal"><span class="pre">--config</span></code> 的值指向新复制的配置文件。采用这种方法进行自定义，如果后续 <code class="docutils literal"><span class="pre">Mix</span></code> 版本有更新时，需要手动合并 <code class="docutils literal"><span class="pre">webpack.config.js</span></code> 并到你的自定义文件中。</p>
</div>
</div>
<div class="section" id="id16">
<h2>29.7. 复制文件 &amp; 目录<a class="headerlink" href="#id16" title="永久链接至标题">¶</a></h2>
<p><code class="docutils literal"><span class="pre">copy</span></code> 方法用于将文件和目录复制到新位置。当 <code class="docutils literal"><span class="pre">node_modules</span></code> 目录中的特定资源需要被重定位到 <code class="docutils literal"><span class="pre">public</span></code> 文件夹时会很有用。</p>
<div class="highlight-js"><div class="highlight"><pre><span></span><span class="nx">mix</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="s1">&#39;node_modules/foo/bar.css&#39;</span><span class="p">,</span> <span class="s1">&#39;public/css/bar.css&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>复制目录时， <code class="docutils literal"><span class="pre">copy</span></code> 方法会平面化目录的结构。要维护目录的原始结构，应该使用 <code class="docutils literal"><span class="pre">copyDirectory</span></code> 方法：</p>
<div class="highlight-js"><div class="highlight"><pre><span></span><span class="nx">mix</span><span class="p">.</span><span class="nx">copyDirectory</span><span class="p">(</span><span class="s1">&#39;assets/img&#39;</span><span class="p">,</span> <span class="s1">&#39;public/img&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id17">
<h2>29.8. 版本控制／缓存清除<a class="headerlink" href="#id17" title="永久链接至标题">¶</a></h2>
<p>许多的开发者会对其编译的资源文件中加上时间戳或是唯一的令牌作为后缀，以此来强迫浏览器加载全新的资源文件，而不是旧版本的代码副本。你可以使用 <code class="docutils literal"><span class="pre">Mix</span></code> 的 <code class="docutils literal"><span class="pre">version</span></code> 方法处理它们。</p>
<p><code class="docutils literal"><span class="pre">version</span></code> 方法会自动为所有编译文件的文件名附加一个唯一的哈希值，从而实现更方便的缓存清除功能：</p>
<div class="highlight-js"><div class="highlight"><pre><span></span> <span class="nx">mix</span><span class="p">.</span><span class="nx">js</span><span class="p">(</span><span class="s1">&#39;resources/assets/js/app.js&#39;</span><span class="p">,</span> <span class="s1">&#39;public/js&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">version</span><span class="p">();</span>
</pre></div>
</div>
<p>生成版本化文件后，你不会知道确切的文件名。因此，你应该在你的视图中使用 Laravel 的全局辅助函数 <code class="docutils literal"><span class="pre">mix</span></code> 来正确加载名称被哈希后的文件。 <code class="docutils literal"><span class="pre">mix</span></code> 函数会自动确定被哈希的文件名称：</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ mix(&#39;/css/app.css&#39;) }}&quot;</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>因为在开发中通常是不需要版本化，你可以指示版本控制过程仅在 <code class="docutils literal"><span class="pre">npm</span> <span class="pre">run</span> <span class="pre">production</span></code> 运行期间进行：</p>
<div class="highlight-js"><div class="highlight"><pre><span></span><span class="nx">mix</span><span class="p">.</span><span class="nx">js</span><span class="p">(</span><span class="s1">&#39;resources/assets/js/app.js&#39;</span><span class="p">,</span> <span class="s1">&#39;public/js&#39;</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">mix</span><span class="p">.</span><span class="nx">inProduction</span><span class="p">())</span> <span class="p">{</span>
    <span class="nx">mix</span><span class="p">.</span><span class="nx">version</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="browsersync">
<h2>29.9. Browsersync 重新加载<a class="headerlink" href="#browsersync" title="永久链接至标题">¶</a></h2>
<p><a class="reference external" href="https://browsersync.io/">BrowserSync</a> 会自动监控文件修改并将修改注入浏览器而无需手动刷新。 你可以通过调用 <code class="docutils literal"><span class="pre">mix.browserSync()</span></code> 方法启用该支持：</p>
<div class="highlight-js"><div class="highlight"><pre><span></span><span class="nx">mix</span><span class="p">.</span><span class="nx">browserSync</span><span class="p">(</span><span class="s1">&#39;my-domain.test&#39;</span><span class="p">);</span>

<span class="c1">// Or...</span>

<span class="c1">// https://browsersync.io/docs/options</span>
<span class="nx">mix</span><span class="p">.</span><span class="nx">browserSync</span><span class="p">({</span>
    <span class="nx">proxy</span><span class="o">:</span> <span class="s1">&#39;my-domain.test&#39;</span>
<span class="p">});</span>
</pre></div>
</div>
<p>你可以传递一个字符串（代理）或对象（ <code class="docutils literal"><span class="pre">BrowserSync</span></code> 设置）到该方法。 接下来，使用 <code class="docutils literal"><span class="pre">npm</span> <span class="pre">run</span> <span class="pre">watch</span></code> 命令来启动 <code class="docutils literal"><span class="pre">Webpack</span></code> 的开发服务器。现在，当你编辑一个 JavaScript 脚本或 PHP 文件时，会看到浏览器会立即刷新以响应你的修改。</p>
</div>
<div class="section" id="id19">
<h2>29.10. 环境变量<a class="headerlink" href="#id19" title="永久链接至标题">¶</a></h2>
<p>你可以通过在 <code class="docutils literal"><span class="pre">.env</span></code> 文件添加 <code class="docutils literal"><span class="pre">MIX_</span></code> 前缀将环境变量注入 <code class="docutils literal"><span class="pre">Mix</span></code> ：</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">MIX_SENTRY_DSN_PUBLIC</span><span class="o">=</span><span class="s">http://example.com</span>
</pre></div>
</div>
<p>在 <code class="docutils literal"><span class="pre">.env</span></code> 文件中定义号变量之后，可以通过 <code class="docutils literal"><span class="pre">process.env</span></code> 对象进行访问。如果在运行 <code class="docutils literal"><span class="pre">watch</span></code> 任务期间变量值有变动，需要重启任务：</p>
<div class="highlight-js"><div class="highlight"><pre><span></span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">MIX_SENTRY_DSN_PUBLIC</span>
</pre></div>
</div>
</div>
<div class="section" id="id20">
<h2>29.11. 通知<a class="headerlink" href="#id20" title="永久链接至标题">¶</a></h2>
<p>正常情况下， <code class="docutils literal"><span class="pre">Mix</span></code> 会自动为每个捆绑显示操作系统通知，这可以给你一个及时的反馈：编译成功还是失败。不过，某些场景下你可能希望禁止这些通知，一个典型的例子就是在生产境服务器触发 <code class="docutils literal"><span class="pre">Mix</span></code> 。通知可以通过 <code class="docutils literal"><span class="pre">disableNotifications</span></code> 方法被停用：</p>
<div class="highlight-js"><div class="highlight"><pre><span></span><span class="nx">mix</span><span class="p">.</span><span class="nx">disableNotifications</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="laravel-mix.html" class="btn btn-neutral float-right" title="30. mix使用手册" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Laravel的前端.html" class="btn btn-neutral" title="28. 前端" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, lzh.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            LANGUAGE:'zh',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  

<script type="text/javascript">
  
      $(document).ready(function(){
        var offset = sessionStorage.getItem("offsetTop");
        $('.wy-side-scroll').scrollTop(offset);
        sessionStorage.setItem("offsetTop", 0);


        $('.wy-menu > ul').click(function(){
            sessionStorage.setItem("offsetTop", $('.wy-side-scroll').scrollTop());
        });
      })

  </script> 

</body>
</html>